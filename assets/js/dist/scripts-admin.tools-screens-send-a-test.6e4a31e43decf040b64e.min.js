"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[3248],{9430:function(e,t,n){n.r(t);var r=n(6796),a=n(9801),s=n(5210),c=n(5720),i=n(9509),o=n.n(i),l=n(9608),u=n.n(l),d=n(7784),m=n(4070),p=n(583),_=n(8887),g=n(9805),b=n(7343),f=n(6192),v=n(6493),y=n(2030),h=n(4237),R=n(7024),x=(n(7066),n(2077)),Z=n(9208);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var w=d.React.forwardRef,O=d.React.useEffect,k=d.React.useLayoutEffect,P=d.React.useState,z=d.React.useRef,j=w((function(e,t){var n,i,l=e.customAttributes,w=void 0===l?{}:l,j=e.customClasses,C=void 0===j?[]:j,N=e.common,T=void 0===N?{}:N,A=e.data,S=void 0===A?{}:A,F=e.i18n,D=void 0===F?{}:F,B=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,d.classnames)({"gravitysmtp-tools-app__send-a-test":!0},C)},w),J=D||{},H=J.debug_messages,I=H.sending_test_email,K=void 0===I?"":I,L=H.sending_test_email_error,W=void 0===L?"":L,q=J.send_a_test,G=void 0===q?{}:q,M=G.top_heading,Q=G.top_content,U=G.send_test_box_heading,V=G.send_test_box_input_label,X=G.send_test_box_input_placeholder,Y=G.send_test_box_input_description,$=(G.send_test_box_alerts_heading,G.send_test_box_alerts_text,G.send_test_box_alerts_button_label),ee=G.send_test_box_try_again_button_label,te=G.send_test_box_error_issue_heading,ne=G.send_test_box_error_possible_reasons_heading,re=G.send_test_box_error_recommended_steps_heading,ae=G.send_test_box_view_log_button_label,se=G.send_test_box_copy_log_button_label,ce=G.send_test_box_copy_log_success_message,ie=((null==T?void 0:T.data)||{}).test_mode_enabled,oe=(null==T?void 0:T.i18n)||{},le=oe.snackbar_send_test_mail_error,ue=oe.snackbar_send_test_mail_success,de=(null==S?void 0:S.caps)||{},me=P(!1),pe=(0,s.Z)(me,2),_e=pe[0],ge=pe[1],be=P(!1),fe=(0,s.Z)(be,2),ve=fe[0],ye=fe[1],he=P({}),Re=(0,s.Z)(he,2),xe=Re[0],Ze=Re[1],Ee=P(""),we=(0,s.Z)(Ee,2),Oe=we[0],ke=we[1],Pe=P(""),ze=(0,s.Z)(Pe,2),je=ze[0],Ce=ze[1],Ne=(null==T||null===(n=T.endpoints)||void 0===n||null===(n=n.send_test)||void 0===n?void 0:n.action)||"",Te=(null==T||null===(i=T.endpoints)||void 0===i||null===(i=i.send_test)||void 0===i?void 0:i.nonce)||"",Ae=z(!0),Se=z(null),Fe=z(null),De=z(null),Be=z(null),Je=P(!1),He=(0,s.Z)(Je,2),Ie=He[0],Ke=He[1],Le=(0,d.classnames)({"gravitysmtp-tools-app__send-a-test-trigger--sending":_e});O((function(){Ie&&Be.current&&(Be.current.focus(),Ke(!1))}),[Ie]),k((function(){Ae.current?Ae.current=!1:Se&&Fe&&(ve?Fe.current.focus():Se.current&&Se.current.focus())}),[ve]);var We=(0,h.Ds)(),qe=function(){var e=(0,a.Z)(o().mark((function e(){var t,n,r,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==Oe){e.next=2;break}return e.abrupt("return");case 2:return Ce(De.current.offsetWidth),ge(!0),t={action:Ne,security:Te,email:Oe},e.next=7,(0,x.Z)((0,p.gB)(K,JSON.stringify((0,Z.Z)(["security"],t))),"info");case 7:return e.prev=7,e.next=10,(0,m.v_)({endpoint:u(),body:t});case 10:r=e.sent,ge(!1),null!=r&&null!==(n=r.data)&&void 0!==n&&n.success?We(ue):null!=r&&null!==(a=r.error)&&void 0!==a&&null!==(a=a.detail)&&void 0!==a&&a.data?(s=(0,p.sO)(r.error.detail.data)?JSON.parse(r.error.detail.data):"",(0,p.Kn)(s.data)?(Ze(s.data),ye(!0)):We(s.data||le,"error")):We(le,"error"),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(7),We(e.t0,"error"),e.next=20,(0,x.Z)((0,p.gB)(W,JSON.stringify(e.t0)),"error");case 20:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),Ge=ve?1200:630;return de.gravitysmtp_view_tools_sendatest&&d.React.createElement("div",(0,r.Z)({},B,{ref:t}),d.React.createElement(f.Z,{size:"display-sm",weight:"semibold",spacing:1,content:M}),d.React.createElement(R.Z,{size:"text-sm",spacing:6,color:"comet",content:Q}),d.React.createElement(y.Z,{HeaderContent:function(e){return d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,(0,r.Z)({content:U,size:"text-lg",weight:"medium"},e)))},FooterContent:function(e){return ve?d.React.createElement(b.Z,(0,r.Z)({label:ee,onClick:function(){ye(!1),ke(""),Ze({})},size:"size-height-m"},e)):d.React.createElement(b.Z,(0,r.Z)({active:_e,activeType:"loader",customAttributes:{style:{width:"".concat(je,"px")}},customClasses:Le,disabled:ie,icon:"paper-plane",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:$,onClick:qe,ref:De,size:"size-height-m"},e))}},d.React.createElement(g.Z,{x:Ge},ve?d.React.createElement(d.React.Fragment,null,d.React.createElement(g.Z,{x:630},d.React.createElement(_.Z,{theme:"cosmos",type:"error",customIconPrefix:"gravitysmtp-admin-icon",content:xe.error_message,spacing:[2,0,6,0]})),(null==xe?void 0:xe.issues)&&xe.issues.length>0&&xe.issues[0]&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:te}),d.React.createElement(R.Z,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},xe.issues.map((function(e,t){return d.React.createElement("li",{key:"issues-".concat(t)},e)}))))),(null==xe?void 0:xe.possible_reasons)&&xe.possible_reasons.length>0&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:ne}),d.React.createElement(R.Z,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},xe.possible_reasons.map((function(e,t){return d.React.createElement("li",{key:"possible-reasons-".concat(t)},e)}))))),(null==xe?void 0:xe.recommended_steps)&&xe.recommended_steps.length>0&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,{size:"text-sm",tagName:"h5",weight:"medium",spacing:3,content:re}),d.React.createElement(R.Z,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},xe.recommended_steps.map((function(e,t){return d.React.createElement("li",{key:"recommended-steps-".concat(t)},e)}))))),d.React.createElement(g.Z,{display:"flex",spacing:2},d.React.createElement(b.Z,{label:ae,onClick:function(){window.location.href="//".concat(window.location.host).concat(window.location.pathname,"?page=gravitysmtp-activity-log&tab=log-details&event_id=").concat(xe.full_log.log_id)},size:"size-height-m",spacing:[0,3,0,0],type:"white",ref:Fe}),d.React.createElement(b.Z,{icon:"copy",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:se,onClick:function(){(0,p.BR)(xe.log_copy),We(ce),Ke(!0)},ref:Be,size:"size-height-m",type:"white"}))):d.React.createElement(v.Z,{labelAttributes:{label:V},helpTextAttributes:{content:Y},placeholder:X,onChange:function(e){return ke(e)},type:"email",disabled:ie,customAttributes:{style:{width:"100%",display:"block"},ref:Se}}))))}));j.propTypes={customAttributes:d.PropTypes.object,customClasses:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.array,d.PropTypes.object])},j.displayName="SendATestScreen",t.default=j},2077:function(e,t,n){n.d(t,{Z:function(){return p}});var r,a=n(9801),s=n(9509),c=n.n(s),i=n(9608),o=n.n(i),l=n(3267),u=n.n(l),d=n(4070),m=(null===(r=(0,n(583).iE)(u(),"gravitysmtp_admin_config"))||void 0===r?void 0:r.common)||{};function p(){return _.apply(this,arguments)}function _(){return _=(0,a.Z)(c().mark((function e(){var t,n,r,a,s,i,l,u,p,_,g=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>0&&void 0!==g[0]?g[0]:"",a=g.length>1&&void 0!==g[1]?g[1]:"debug",s=m.data,i=void 0===s?{}:s,l=m.endpoints,p=(null==(u=void 0===l?{}:l)||null===(t=u.log_debug_item)||void 0===t?void 0:t.action)||"",_=(null==u||null===(n=u.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=i&&i.debug_log_enabled&&p&&_&&r){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.v_)({endpoint:o(),body:{action:p,security:_,message:r,priority:a}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}},9208:function(e,t,n){var r=n(6588),a=n(5210);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return function n(s){return Object.entries(s).reduce((function(s,c){var i=(0,a.Z)(c,2),o=i[0],l=i[1];return"object"===(0,r.Z)(l)&&null!==l?s[o]=n(l):e.includes(o)?s[o]=null===l?null:t.repeat(l.length):s[o]=l,s}),Array.isArray(s)?[]:{})}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);