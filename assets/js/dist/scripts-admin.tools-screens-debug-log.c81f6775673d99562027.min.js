"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[2668,5491],{43645:function(e,t,r){r.r(t);var n=r(71860),a=r(90455),o=r(88856),i=r(8140),u=r(78564),c=r.n(u),s=r(27122),l=r.n(s),d=r(97867),g=r(60177),p=r(71376),v=r(84860),b=r(5529),f=r(96343),m=r(76910),h=r(83391),_=r(57003),y=r(43054),O=r(83707),P=r(93313),A=r(79929),w=r(52014);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var j=d.React.forwardRef,R=d.React.useEffect,S=d.React.useRef,T=d.React.useState,x=d.ReactRouter.useLocation,k=d.ReactRouter.useNavigate,L=d.ReactRouter.useSearchParams,C="log_page",E="search_term",I=new URLSearchParams(window.location.search),N=I.get(C)||"1",z=I.get(E)||"",M=j((function(e,t){var r=e.customAttributes,u=void 0===r?{}:r,s=e.customClasses,j=void 0===s?[]:s,I=e.common,M=void 0===I?{}:I,H=e.data,J=void 0===H?{}:H,U=e.i18n,q=void 0===U?{}:U,B=M.endpoints,G=(void 0===B?{}:B).debug_log_page,F=G.action,K=void 0===F?"":F,Q=G.nonce,V=void 0===Q?"":Q,W=q||{},X=W.debug_log,Y=void 0===X?{}:X,Z=Y.top_heading,$=void 0===Z?"":Z,ee=Y.data_grid,te=void 0===ee?{}:ee,re=te.top_heading,ne=void 0===re?"":re,ae=te.clear_search_aria_label,oe=void 0===ae?"":ae,ie=te.empty_title,ue=void 0===ie?"":ie,ce=te.empty_message,se=void 0===ce?"":ce,le=te.grid_controls_search_button_label,de=void 0===le?"":le,ge=te.grid_controls_search_placeholder,pe=void 0===ge?"":ge,ve=te.pagination_next,be=void 0===ve?"":ve,fe=te.pagination_prev,me=void 0===fe?"":fe,he=te.pagination_next_aria_label,_e=void 0===he?"":he,ye=te.pagination_prev_aria_label,Oe=void 0===ye?"":ye,Pe=te.search_no_results_title,Ae=void 0===Pe?"":Pe,we=te.search_no_results_message,De=void 0===we?"":we,je=Y.snackbar_debug_log_error,Re=void 0===je?"":je,Se=W.debug_messages,Te=void 0===Se?{}:Se,xe=Te.fetching_debug_log_page,ke=void 0===xe?"":xe,Le=Te.fetching_debug_log_page_error,Ce=void 0===Le?"":Le,Ee=(null==J?void 0:J.debug_log)||{},Ie=Ee.data_grid,Ne=void 0===Ie?{}:Ie,ze=Ne.columns,Me=void 0===ze?[]:ze,He=Ne.column_style_props,Je=void 0===He?{}:He,Ue=Ne.data,qe=void 0===Ue?[]:Ue,Be=Ee.initial_load_timestamp,Ge=void 0===Be?"":Be,Fe=Ee.initial_row_count,Ke=void 0===Fe?0:Fe,Qe=Ee.rows_per_page,Ve=void 0===Qe?7:Qe,We=(null==J?void 0:J.caps)||{},Xe=x(),Ye=k(),Ze=(0,v.dh)(),$e=L(),et=(0,i.A)($e,2),tt=et[0],rt=(et[1],T(qe.length>0?Ve:7)),nt=(0,i.A)(rt,2),at=nt[0],ot=nt[1],it=T(Ke),ut=(0,i.A)(it,2),ct=ut[0],st=ut[1],lt=(0,w.default)((function(e){return e.setDebugDetailsDialogData})),dt=(0,w.default)((function(e){return e.setDebugDetailsDialogOpen})),gt=S(),pt=S(!1),vt=(0,A.h)({page:N,searchTerm:z}),bt=(0,A.A)((0,o.A)({},vt,{rows:qe,totalRowCount:Ke})),ft=bt.pageCache,mt=bt.addPageCache;R((function(){if(gt.current)if(pt.current)pt.current=!1;else{var e=tt.get(C)||"1",t=parseInt(e,10)-1,r=tt.get(E)||"";yt({currentPage:t,searchTerm:r},!0),Dt({currentPage:t,searchTerm:r,searchActive:""!==r})}else gt.current=!0}),[tt]);var ht=function(e){var t=e.page,r=e.searchTerm,n=void 0===r?"":r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=new URLSearchParams(Xe.search);o.set(C,t),n?o.set(E,n):o.delete(E),Ye("?".concat(o.toString()),{replace:a})},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rows,r=void 0===t?[]:t,n=e.totalRowCount,a=void 0===n?0:n,o=r.length>0;ot(o?Ve:7),xt(r),st(parseInt(a,10))},yt=function(){var e=(0,a.A)(c().mark((function e(t){var r,n,a,o,i,u,s,d,v,b,f,m=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=m.length>1&&void 0!==m[1]&&m[1])||(pt.current=!0),n={page:t.currentPage+1,searchTerm:t.searchTerm},a=(0,A.h)(n),!ft[a]){e.next=8;break}return _t(ft[a]),ht(n,r),e.abrupt("return",t.currentPage);case 8:return o={action:K,security:V,max_date:Ge,requested_page:t.currentPage+1,search_term:t.searchTerm||""},e.next=11,(0,O.A)((0,p.nv)(ke,JSON.stringify((0,P.A)(["security"],o))),"info");case 11:return e.prev=11,e.next=14,(0,g.bE)({endpoint:l(),body:o});case 14:if(d=e.sent,v=(null==d||null===(i=d.data)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.rows)||[],b=(null==d||null===(u=d.data)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.total)||"0",null==d||null===(s=d.data)||void 0===s||!s.success){e.next=23;break}return mt(a,f={rows:v,totalRowCount:b}),_t(f),ht(n,r),e.abrupt("return",t.currentPage);case 23:Ze(Re,"error"),e.next=31;break;case 26:return e.prev=26,e.t0=e.catch(11),Ze(e.t0.message,"error"),e.next=31,(0,O.A)((0,p.nv)(Ce,JSON.stringify(e.t0)),"error");case 31:case"end":return e.stop()}}),e,null,[[11,26]])})));return function(t){return e.apply(this,arguments)}}(),Ot=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({className:(0,d.classnames)({"gravitysmtp-tools-app__debug-log":!0},j)},u),Pt=[_.hi,_.vj],At=(0,y.A)({data:qe,dataPerPage:Ve,initialState:{isLoading:!1,moduleState:{currentPage:parseInt(N,10)-1,searchTerm:z,searchActive:""!==z}},modules:Pt,useAjax:!0}),wt=At.moduleState,Dt=At.updateModuleState,jt=At.isLoading,Rt=At.setIsLoading,St=At.gridLocked,Tt=At.organizedData,xt=At.setOrganizedData,kt={customClasses:["gravitysmtp-tools-app__debug-log-table"],id:"gravitysmtp-tools-app__debug-log-table",columns:Me,columnStyleProps:Je,data:Tt,dataPerPage:at,EmptyImage:f.A,gridLocked:St,handleGridClicks:function(e){if("view"===e.action){var t,r,n,a,o=(null==e||null===(t=e.data)||void 0===t?void 0:t.id)||0,i=Tt.filter((function(e){var t;return(null==e||null===(t=e.id)||void 0===t||null===(t=t.props)||void 0===t?void 0:t.content)===o}))[0];if(!i)return;lt({date:(null==i||null===(r=i.date)||void 0===r||null===(r=r.props)||void 0===r?void 0:r.content)||"",event:(null==i||null===(n=i.status)||void 0===n?void 0:n.props)||{},log:(null==i||null===(a=i.log)||void 0===a||null===(a=a.props)||void 0===a?void 0:a.label)||""}),dt(!0)}},i18n:{emptyMessageI18n:se,emptyTitleI18n:ue,gridHeadingI18n:ne},isLoading:jt,maintainHeight:0===Tt.length,modules:Pt,moduleAttributes:{pagination:{nextLabel:be,nextAriaLabel:_e,onClick:yt,pageCount:Math.ceil(ct/at),previousLabel:me,previousAriaLabel:Oe},search:{button:{customAttributes:{"data-test-id":"debug-log-search-trigger"},id:"debug-log-search-trigger",label:de},input:{customAttributes:{"data-test-id":"debug-log-search-input"},clearableButtonAttributes:{ariaLabel:oe,icon:"x-circle",iconPrefix:"gravitysmtp-admin-icon"},id:"debug-log-search-input",placeholder:pe},noResults:{Image:m.A},i18n:{noResultsTitle:Ae,noResultsMessage:De},onSearch:yt}},moduleState:wt,setIsLoading:Rt,titleAttributes:{tagName:"h2"},updateModuleState:Dt,useAjax:!0};return We.gravitysmtp_view_debug_log&&d.React.createElement("div",(0,n.A)({},Ot,{ref:t}),d.React.createElement(b.A,{size:"display-sm",weight:"semibold",spacing:6,content:$}),d.React.createElement(h.A,kt))}));M.propTypes={customAttributes:d.PropTypes.object,customClasses:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.array,d.PropTypes.object]),common:d.PropTypes.object,data:d.PropTypes.object,i18n:d.PropTypes.object},M.displayName="DebugLogScreen",t.default=M},52014:function(e,t,r){r.r(t);var n,a=r(40450),o=r.n(a),i=r(86595),u=(null===(n=(0,r(71376).zj)(o(),"gravitysmtp_admin_config"))||void 0===n||null===(n=n.components)||void 0===n||n.tools,(0,i.vt)({debugDetailsDialogData:{},debugDetailsDialogOpen:!1},(function(e){return{setDebugDetailsDialogData:function(t){return e((function(){return{debugDetailsDialogData:t}}))},setDebugDetailsDialogOpen:function(t){return e((function(){return{debugDetailsDialogOpen:t}}))}}})));t.default=u},83707:function(e,t,r){r.d(t,{A:function(){return p}});var n,a=r(90455),o=r(78564),i=r.n(o),u=r(27122),c=r.n(u),s=r(40450),l=r.n(s),d=r(60177),g=(null===(n=(0,r(71376).zj)(l(),"gravitysmtp_admin_config"))||void 0===n?void 0:n.common)||{};function p(){return v.apply(this,arguments)}function v(){return v=(0,a.A)(i().mark((function e(){var t,r,n,a,o,u,s,l,p,v,b=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>0&&void 0!==b[0]?b[0]:"",a=b.length>1&&void 0!==b[1]?b[1]:"debug",o=g.data,u=void 0===o?{}:o,s=g.endpoints,p=(null==(l=void 0===s?{}:s)||null===(t=l.log_debug_item)||void 0===t?void 0:t.action)||"",v=(null==l||null===(r=l.log_debug_item)||void 0===r?void 0:r.nonce)||"",null!=u&&u.debug_log_enabled&&p&&v&&n){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.bE)({endpoint:c(),body:{action:p,security:v,message:n,priority:a}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}},93313:function(e,t,r){var n=r(52888),a=r(8140);t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",r=function(o){return Object.entries(o).reduce((function(o,i){var u=(0,a.A)(i,2),c=u[0],s=u[1];return"object"===(0,n.A)(s)&&null!==s?o[c]=r(s):e.includes(c)?o[c]=null===s?null:t.repeat(s.length):o[c]=s,o}),Array.isArray(o)?[]:{})};return r(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},79929:function(e,t,r){r.d(t,{h:function(){return s}});var n=r(88856),a=r(8140),o=r(97867);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=o.React.useState,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,r=void 0===t?1:t,n=e.searchTerm,a=void 0===n?"":n,o=e.filters,i=void 0===o?"":o,u="page-".concat(r);return a&&(u+="-".concat(a)),i&&(u+="-".concat(i)),u};t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c((function(){return e})),r=(0,a.A)(t,2),o=r[0],i=r[1];return{pageCache:o,addPageCache:function(e,t){i((function(r){return u(u({},r),{},(0,n.A)({},e,t))}))}}}}}]);