"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[9586],{69586:function(e,t,n){n.r(t);var a=n(90455),i=n(71860),r=n(8140),s=n(88856),o=n(78564),c=n.n(o),l=n(27122),u=n.n(l),d=n(97867),g=n(8173),_=n(60177),m=n(71376),v=n(30242),p=n(80509),f=n(5529),A=n(25787),b=n(87029),y=n(66598),x=n(16265),h=n(82263),E=n(13379),k=n(84860),S=n(68381),C=n(27764),w=n(33695),R=n(49572),P=n(83707),T=n(93313),O=n(59092);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,s.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=d.React.forwardRef,D=d.React.useRef,M=d.React.useState,j=d.ReactRouter.useLocation,L=d.ReactRouter.Link,B=I((function(e,t){var n,s,o,l,z=e.customAttributes,I=void 0===z?{}:z,B=e.customClasses,J=void 0===B?[]:B,W=e.common,G=void 0===W?{}:W,U=e.data,V=void 0===U?{}:U,Y=e.i18n,F=void 0===Y?{}:Y,H=N({className:(0,d.classnames)({"gravitysmtp-general-settings":!0},J)},I),K=F||{},X=K.debug_messages,q=void 0===X?{}:X,Q=q.uninstalling_plugin,Z=q.uninstalling_plugin_error,$=K.settings,ee=void 0===$?{}:$,te=ee.top_heading,ne=ee.license_box_heading,ae=ee.license_box_content,ie=ee.license_box_input_label,re=ee.license_box_input_help_text,se=ee.license_box_button_text,oe=ee.license_valid,ce=ee.license_invalid,le=ee.test_mode_box_content_1,ue=ee.test_mode_box_toggle_label,de=ee.general_settings_box_heading,ge=ee.experiments_box_heading,_e=ee.experiments_box_content,me=ee.experiments_box_toggle_label,ve=ee.experiments_box_toggle_help_text,pe=ee.experiments_box_toggle_label_opens,fe=ee.experiments_box_toggle_help_text_opens,Ae=ee.uninstall_box_heading,be=ee.uninstall_box_content,ye=ee.uninstall_box_button_label,xe=ee.uninstall_dialog_confirm_change_heading,he=ee.uninstall_dialog_confirm_change_content,Ee=ee.uninstall_dialog_confirm_change_confirm,ke=ee.error_uninstalling_message,Se=V.license_key,Ce=V.license_key_is_valid,we=V.plugins_url,Re=(null==G?void 0:G.i18n)||{},Pe=Re.debug_messages,Te=void 0===Pe?{}:Pe,Oe=Te.saving_plugin_settings,ze=void 0===Oe?"":Oe,Ne=Te.saving_plugin_settings_error,Ie=void 0===Ne?"":Ne,De=Re.general_settings_usage_analytics_label,Me=void 0===De?"":De,je=Re.general_settings_usage_analytics_help_text,Le=void 0===je?"":je,Be=(null==G?void 0:G.data)||{},Je=Be.usage_analytics_enabled,We=Be.usage_analytics_link,Ge=M("boolean"==typeof Ce&&!Ce),Ue=(0,r.A)(Ge,2),Ve=Ue[0],Ye=Ue[1],Fe=M(Se),He=(0,r.A)(Fe,2),Ke=He[0],Xe=He[1],qe=M(Ce),Qe=(0,r.A)(qe,2),Ze=Qe[0],$e=Qe[1],et=M(""),tt=(0,r.A)(et,2),nt=tt[0],at=tt[1],it=M(!1),rt=(0,r.A)(it,2),st=rt[0],ot=rt[1],ct=(0,O.default)((function(e){return e.experimentalFeatures})),lt=(0,O.default)((function(e){return e.setExperimentalFeatures})),ut=(0,O.default)((function(e){return e.setConfirmDialogOpen})),dt=(0,O.default)((function(e){return e.setConfirmDialogSettings})),gt=(0,O.default)((function(e){return e.setPageLoaderActive})),_t=(0,O.default)((function(e){return e.testModeEnabled})),mt=(0,O.default)((function(e){return e.setTestModeEnabled})),vt=D(null),pt=(null==G||null===(n=G.endpoints)||void 0===n||null===(n=n.save_plugin_settings)||void 0===n?void 0:n.action)||"",ft=(null==G||null===(s=G.endpoints)||void 0===s||null===(s=s.save_plugin_settings)||void 0===s?void 0:s.nonce)||"",At=(null==G||null===(o=G.endpoints)||void 0===o||null===(o=o.gravitysmtp_uninstall_plugin)||void 0===o?void 0:o.action)||"",bt=(null==G||null===(l=G.endpoints)||void 0===l||null===(l=l.gravitysmtp_uninstall_plugin)||void 0===l?void 0:l.nonce)||"",yt=(0,d.classnames)({"gravitysmtp-general-settings__license-save":!0,"gravitysmtp-general-settings__license-save--saving":st}),xt=(0,k.dh)(),ht=j(),Et=function(){var e=(0,a.A)(c().mark((function e(){var t,n,a,i,r,s,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vt.current.offsetWidth,n=Ke.trim(),Ye(!1),at(t),ot(!0),Xe(n),a={action:pt,security:ft,key:(0,w.A)("license_key"),value:n},e.next=9,(0,P.A)((0,m.nv)(ze,JSON.stringify((0,T.A)(["security","value"],a))),"info");case 9:return e.prev=9,e.next=12,(0,_.bE)({endpoint:u(),body:a});case 12:r=e.sent,ot(!1),at(""),null!=r&&null!==(i=r.data)&&void 0!==i&&i.success?(o=(null==r||null===(s=r.data)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.license_is_valid)||!1,$e(o),!0===o?xt(oe):!1===o&&xt(ce,"error")):($e(!1),xt(ce,"error")),e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(9),e.next=23,(0,P.A)((0,m.nv)(Ie,JSON.stringify(e.t0)),"error");case 23:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(){return e.apply(this,arguments)}}(),kt={customClasses:["gravitysmtp-general-settings__license-input"],controlled:!0,labelAttributes:N({label:ie},(0,C.A)((0,w.A)("license_key"))),helpTextAttributes:Ze?{}:{content:re,size:"text-xs",weight:"regular"},id:"gravitysmtp-general-settings__license-input",name:(0,w.A)("license_key"),onChange:Xe,textSecurity:"disc",value:Ke,customAttributes:{readOnly:!(0,R.A)("CAPS_EDIT_LICENSE_KEY"),"data-test-id":"settings-license-input"}};!0===Ze?(kt.borderStyle="correct",kt.iconAttributes={iconPrefix:"gravitysmtp-admin-icon",preset:"status-correct"}):!1===Ze&&(kt.borderStyle="error",kt.iconAttributes={iconPrefix:"gravitysmtp-admin-icon",preset:"status-incorrect"});var St=function(){var e=new URLSearchParams(ht.search),t=V.nav_item_param_key||"tab";e.set(t,"logging");var n=N(N({},ht),{},{search:"?".concat(e.toString())}),a=le.split("%s");return d.React.createElement(d.React.Fragment,null,a[0],d.React.createElement(L,{className:"gform-link gform-typography--size-text-sm",to:n},a[1]),a[2])},Ct=function(){var e=(0,a.A)(c().mark((function e(t){var n,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mt(t),n={action:pt,security:ft,key:(0,w.A)("test_mode"),value:t?"true":"false"},e.next=4,(0,P.A)((0,m.nv)(ze,JSON.stringify((0,T.A)(["security"],n))),"info");case 4:return e.prev=4,e.next=7,(0,_.bE)({endpoint:u(),body:n});case 7:null!=(i=e.sent)&&null!==(a=i.data)&&void 0!==a&&a.success,e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(4),e.next=16,(0,P.A)((0,m.nv)(Ie,JSON.stringify(e.t0)),"error");case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),wt=function(){var e=(0,a.A)(c().mark((function e(t){var n,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:pt,security:ft,key:(0,w.A)("usage_analytics"),value:t?"true":"false"},e.next=3,(0,P.A)((0,m.nv)(ze,JSON.stringify((0,T.A)(["security"],n))),"info");case 3:return e.prev=3,e.next=6,(0,_.bE)({endpoint:u(),body:n});case 6:null!=(i=e.sent)&&null!==(a=i.data)&&void 0!==a&&a.success&&(G.data.usage_analytics_enabled=t,(0,m.Ak)({event:"gravitysmtp/setting-updated",native:!1,data:{key:(0,w.A)("usage_analytics"),value:t}})),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(3),e.next=15,(0,P.A)((0,m.nv)(Ie,JSON.stringify(e.t0)),"error");case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Rt=function(){var e=(0,a.A)(c().mark((function e(){var t,n,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gt(!0),t={action:At,security:bt},e.next=4,(0,P.A)((0,m.nv)(Q,JSON.stringify((0,T.A)(["security"],t))),"info");case 4:return e.prev=4,e.next=7,(0,_.bE)({endpoint:u(),body:t});case 7:null!=(a=e.sent)&&null!==(n=a.data)&&void 0!==n&&n.success?window.location.href=we:(gt(!1),xt(ke,"error")),e.next=18;break;case 11:return e.prev=11,e.t0=e.catch(4),gt(!1),xt(ke,"error"),e.next=18,(0,P.A)((0,m.nv)(Z,JSON.stringify(e.t0)),"error");case 18:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),Pt={customAttributes:{"data-test-id":"settings-test-mode-toggle"},initialChecked:_t,labelAttributes:N({label:ue},(0,C.A)((0,w.A)("test_mode"))),helpTextAttributes:{content:d.React.createElement(St,null),size:"text-sm"},helpTextWidth:"full",labelPosition:"left",id:"test_mode",name:(0,w.A)("test_mode"),onChange:Ct,size:"size-m",spacing:6,width:"full",disabled:!(0,R.A)("CAPS_EDIT_TEST_MODE")},Tt={initialChecked:Je,labelAttributes:N({label:Me},(0,C.A)((0,w.A)("usage_analytics"))),helpTextAttributes:{content:d.React.createElement(g.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:Le,tokens:[{component:b.A,key:"learn_link",props:{href:We,size:"text-sm",target:"_blank"}}]}),size:"text-sm"},helpTextWidth:"full",labelPosition:"left",id:"usage_analytics",name:(0,w.A)("usage_analytics"),onChange:wt,size:"size-m",width:"full",disabled:!(0,R.A)("CAPS_EDIT_USAGE_ANALYTICS")};return d.React.createElement("div",(0,i.A)({},H,{ref:t}),d.React.createElement(f.A,{size:"display-sm",weight:"semibold",spacing:6,content:te}),(0,R.A)("CAPS_VIEW_LICENSE_KEY")&&d.React.createElement(E.A,{HeaderContent:function(e){return d.React.createElement(v.A,{x:630},d.React.createElement(f.A,(0,i.A)({content:ne,tagName:"h2",size:"text-lg",weight:"medium",spacing:2},e)),d.React.createElement(y.A,(0,i.A)({content:ae,size:"text-sm",color:"comet"},e)))},FooterContent:function(e){var t={"data-test-id":"settings-license-info-save"};return nt&&(t.style={width:"".concat(nt,"px")}),t.disabled=!(0,R.A)("CAPS_EDIT_LICENSE_KEY")||st,d.React.createElement(p.A,(0,i.A)({active:st,activeType:"loader",customAttributes:t,customClasses:yt,icon:"save-disk",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:se,onClick:Et,size:"size-height-m",ref:vt},e))},spacing:6},d.React.createElement(v.A,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},d.React.createElement(A.A,kt),Ve&&d.React.createElement(h.A,{customIconPrefix:"gravitysmtp-admin-icon",spacing:[3,0,0,0],type:"error"},ce))),((0,R.A)("CAPS_VIEW_TEST_MODE")||(0,R.A)("CAPS_VIEW_USAGE_ANALYTICS"))&&d.React.createElement(E.A,{HeaderContent:function(e){return d.React.createElement(v.A,{x:630},d.React.createElement(f.A,(0,i.A)({content:de,tagName:"h2",size:"text-lg",weight:"medium"},e)))},spacing:6},d.React.createElement(v.A,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},(0,R.A)("CAPS_VIEW_TEST_MODE")&&d.React.createElement(x.A,Pt),(0,R.A)("CAPS_VIEW_USAGE_ANALYTICS")&&d.React.createElement(x.A,Tt))),(0,R.A)("CAPS_VIEW_EXPERIMENTAL_FEATURES")&&d.React.createElement(E.A,{HeaderContent:function(e){return d.React.createElement(v.A,{x:630},d.React.createElement(f.A,(0,i.A)({content:ge,tagName:"h2",size:"text-lg",spacing:3,weight:"medium"},e)),d.React.createElement(y.A,{content:_e,size:"text-sm",color:"comet"}))},spacing:6},d.React.createElement(v.A,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},d.React.createElement(x.A,{customAttributes:{"data-test-id":"settings-alerts-experiment-enable"},helpTextAttributes:{content:ve,size:"text-sm"},initialChecked:(null==ct?void 0:ct.alerts_management)||!1,labelAttributes:N({label:me},(0,C.A)("alerts_management")),onChange:function(e){(0,S.A)({addSnackbarMessage:xt,key:(0,w.A)("enabled_experimental_features"),successCallback:function(){lt("alerts_management",e),e&&void 0===(null==V?void 0:V.alerts_settings)&&window.location.reload()},value:N(N({},ct),{},{alerts_management:e})})},labelPosition:"left",name:"".concat((0,w.A)("enabled_experimental_features"),".alerts_management"),spacing:6,size:"size-m",width:"full",disabled:!(0,R.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}),d.React.createElement(x.A,{customAttributes:{"data-test-id":"settings-open-experiment-enable"},helpTextAttributes:{content:fe,size:"text-sm"},initialChecked:(null==ct?void 0:ct.email_open_tracking)||!1,labelAttributes:N({label:pe},(0,C.A)("email_open_tracking")),onChange:function(e){(0,S.A)({addSnackbarMessage:xt,key:(0,w.A)("enabled_experimental_features"),successCallback:function(){lt("email_open_tracking",e),window.location.reload()},value:N(N({},ct),{},{email_open_tracking:e})})},labelPosition:"left",name:"".concat((0,w.A)("enabled_experimental_features"),".email_open_tracking"),spacing:6,size:"size-m",width:"full",disabled:!(0,R.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}))),(0,R.A)("CAPS_VIEW_UNINSTALL")&&d.React.createElement(E.A,{HeaderContent:function(e){return d.React.createElement(v.A,{x:630},d.React.createElement(f.A,(0,i.A)({content:Ae,tagName:"h2",size:"text-lg",weight:"medium"},e)))}},d.React.createElement(v.A,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},d.React.createElement(y.A,{content:be,size:"text-sm",color:"comet",spacing:6}),d.React.createElement(p.A,{disabled:!(0,R.A)("CAPS_EDIT_UNINSTALL"),icon:"trash",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:ye,onClick:(0,a.A)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:dt({confirmDialogConfirmButtonType:"amaranth-red",confirmDialogI18n:{confirm_change_confirm:Ee,confirm_change_content:he,confirm_change_heading:xe},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return ut(!1)},confirmDialogOnClose:function(){return ut(!1)},confirmDialogOnConfirm:function(){var e=(0,a.A)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ut(!1),e.next=3,Rt();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)}))),size:"size-height-m",type:"amaranth-red"}))))}));B.propTypes={customAttributes:d.PropTypes.object,customClasses:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.array,d.PropTypes.object]),data:d.PropTypes.object,i18n:d.PropTypes.object},B.displayName="SettingsScreen",t.default=B},68381:function(e,t,n){var a,i=n(90455),r=n(78564),s=n.n(r),o=n(27122),c=n.n(o),l=n(40450),u=n.n(l),d=n(60177),g=n(71376),_=n(83707),m=n(93313),v=(null===(a=(0,g.zj)(u(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},p=function(e){var t=e.addSnackbarMessage,n=e.key,a=e.saveSuccessSnackBarMessage,i=e.showSnackBarSuccess,r=e.updateData,s=e.value;r[n]&&(r[n]=s),i&&t(a,"success")},f=function(e){var t=e.addSnackbarMessage,n=(e.error,e.saveErrorSnackBarMessage);e.showSnackBarError&&t(n,"error")},A=function(){var e=(0,i.A)(s().mark((function e(t){var n,a,i,r,o,l,u,A,b,y,x,h,E,k,S,C,w,R,P,T,O,z,N,I,D,M,j,L,B,J,W,G,U,V,Y,F,H,K,X,q,Q,Z,$,ee,te;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.addSnackbarMessage,a=void 0===n?function(){}:n,i=t.errorCallback,r=void 0===i?null:i,o=t.key,l=void 0===o?"":o,u=t.showSnackBarError,A=void 0===u||u,b=t.showSnackBarSuccess,y=void 0!==b&&b,x=t.snackBarErrorMessage,h=void 0===x?"":x,E=t.snackBarSuccessMessage,k=void 0===E?"":E,S=t.successCallback,C=void 0===S?null:S,w=t.updateData,R=void 0===w?{}:w,P=t.useDebugLogger,T=void 0===P||P,O=t.value,z=void 0===O?"":O,N=v.i18n,D=(I=void 0===N?{}:N).snackbar_generic_update_error,M=void 0===D?"":D,j=I.snackbar_generic_update_success,L=void 0===j?"":j,B=I.debug_messages,W=(J=void 0===B?{}:B).saving_plugin_settings,G=void 0===W?"":W,U=J.saving_plugin_settings_error,V=void 0===U?"":U,Y=v.endpoints,F=(void 0===Y?{}:Y).save_plugin_settings,K=(H=void 0===F?{}:F).action,X=void 0===K?"":K,q=H.nonce,Q=k||L,Z=h||M,$={action:X,security:void 0===q?"":q,key:l,value:z},!T){e.next=8;break}return e.next=8,(0,_.A)((0,g.nv)(G,JSON.stringify((0,m.A)(["security"],$))),"info");case 8:return e.prev=8,e.next=11,(0,d.bE)({endpoint:c(),body:$});case 11:null!=(te=e.sent)&&null!==(ee=te.data)&&void 0!==ee&&ee.success?(C||p)({addSnackbarMessage:a,data:null==te?void 0:te.data,key:l,saveSuccessSnackBarMessage:Q,showSnackBarSuccess:y,updateData:R,value:z}):(r||f)({addSnackbarMessage:a,error:null==te?void 0:te.error,saveErrorSnackBarMessage:Z,showSnackBarError:A}),e.next=21;break;case 15:if(e.prev=15,e.t0=e.catch(8),!T){e.next=21;break}return e.next=21,(0,_.A)((0,g.nv)(V,JSON.stringify(e.t0)),"error");case 21:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}();t.A=A},90266:function(e,t,n){n.d(t,{A:function(){return l}});var a,i,r=n(40450),s=n.n(r),o=(null===(a=(0,n(71376).zj)(s(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},c=(null==o||null===(i=o.data)||void 0===i?void 0:i.constants)||{};function l(){return c[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""]||""}},33695:function(e,t,n){n.d(t,{A:function(){return l}});var a,i,r=n(40450),s=n.n(r),o=(null===(a=(0,n(71376).zj)(s(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},c=(null==o||null===(i=o.data)||void 0===i?void 0:i.param_keys)||{};function l(){return c[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""]||""}},49572:function(e,t,n){n.d(t,{A:function(){return v}});var a,i,r,s,o=n(40450),c=n.n(o),l=n(71376),u=n(90266),d=(null===(a=(0,l.zj)(c(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.components)||{},g=(null==d||null===(i=d.activity_log)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.caps)||{},_=(null==d||null===(r=d.settings)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.caps)||{},m=(null==d||null===(s=d.tools)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.caps)||{};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,u.A)(e);return g[t]||_[t]||m[t]||!1}},27764:function(e,t,n){var a,i=n(40450),r=n.n(i),s=(null===(a=(0,n(71376).zj)(r(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{};t.A=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{iconPrefix:"gravitysmtp-admin-icon",locked:(null==s||null===(e=s.data)||void 0===e||null===(e=e.locked_settings)||void 0===e?void 0:e.includes(n))||a,lockedMessage:i||(null==s||null===(t=s.i18n)||void 0===t?void 0:t.setting_locked)||""}}}}]);