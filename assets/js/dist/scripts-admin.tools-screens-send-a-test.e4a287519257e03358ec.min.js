"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[3248],{9430:function(e,t,n){n.r(t);var a=n(6796),i=n(9801),s=n(5210),r=n(5720),o=n(9509),l=n.n(o),c=n(9608),u=n.n(c),d=n(7784),m=n(4070),_=n(375),p=n(8887),g=n(9805),b=n(7343),f=n(6192),v=n(6493),h=n(7511),y=n(2030),R=n(4237),x=n(7024),Z=n(7066),E=n(2077),w=n(9208),k=n(36);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=d.React.forwardRef,j=d.React.useEffect,A=d.React.useLayoutEffect,C=d.React.useState,T=d.React.useRef,N=d.ReactRouter.useSearchParams,S=z((function(e,t){var n,r,o=e.customAttributes,c=void 0===o?{}:o,O=e.customClasses,z=void 0===O?[]:O,S=e.common,F=void 0===S?{}:S,D=e.data,B=void 0===D?{}:D,J=e.i18n,W=void 0===J?{}:J,H=P({className:(0,d.classnames)({"gravitysmtp-tools-app__send-a-test":!0},z)},c),I=W||{},K=I.debug_messages,L=K.sending_test_email,M=void 0===L?"":L,V=K.sending_test_email_error,q=void 0===V?"":V,G=I.send_a_test,Q=void 0===G?{}:G,U=Q.top_heading,X=Q.top_content,Y=Q.send_test_box_heading,$=Q.send_test_box_input_label,ee=Q.send_test_box_input_placeholder,te=Q.send_test_box_input_description,ne=Q.send_test_box_send_with_label,ae=Q.send_test_box_send_with_description,ie=Q.send_test_box_send_as_html_label,se=Q.send_test_box_send_as_html_description,re=Q.send_test_box_alerts_button_label,oe=Q.send_test_box_try_again_button_label,le=Q.send_test_box_error_issue_heading,ce=Q.send_test_box_error_possible_reasons_heading,ue=Q.send_test_box_error_recommended_steps_heading,de=Q.send_test_box_view_log_button_label,me=Q.send_test_box_copy_log_button_label,_e=Q.send_test_box_copy_log_success_message,pe=((null==F?void 0:F.data)||{}).test_mode_enabled,ge=(null==F?void 0:F.i18n)||{},be=ge.snackbar_send_test_mail_error,fe=ge.snackbar_send_test_mail_success,ve=B.caps,he=void 0===ve?{}:ve,ye=B.integrations,Re=(void 0===ye?[]:ye).filter((function(e){return!e.data.disabled&&e.data.configured})),xe=Re.map((function(e){return{label:(null==e?void 0:e.title)||"",value:(null==e?void 0:e.id)||""}})),Ze=!!Re.length,Ee=Ze?Re.find((function(e){return e.data.is_primary}))||Re[0]:{},we=pe||!Ze,ke=N(),Oe=(0,s.Z)(ke,2),Pe=Oe[0],ze=(Oe[1],Pe.get("integration")||""),je=C(!1),Ae=(0,s.Z)(je,2),Ce=Ae[0],Te=Ae[1],Ne=C(!1),Se=(0,s.Z)(Ne,2),Fe=Se[0],De=Se[1],Be=C({}),Je=(0,s.Z)(Be,2),We=Je[0],He=Je[1],Ie=C(""),Ke=(0,s.Z)(Ie,2),Le=Ke[0],Me=Ke[1],Ve=C(ze||(null==Ee?void 0:Ee.id)||""),qe=(0,s.Z)(Ve,2),Ge=qe[0],Qe=qe[1],Ue=C(!0),Xe=(0,s.Z)(Ue,2),Ye=Xe[0],$e=Xe[1],et=C(""),tt=(0,s.Z)(et,2),nt=tt[0],at=tt[1],it=(null==F||null===(n=F.endpoints)||void 0===n||null===(n=n.send_test)||void 0===n?void 0:n.action)||"",st=(null==F||null===(r=F.endpoints)||void 0===r||null===(r=r.send_test)||void 0===r?void 0:r.nonce)||"",rt=T(!0),ot=T(null),lt=T(null),ct=T(null),ut=T(null),dt=C(!1),mt=(0,s.Z)(dt,2),_t=mt[0],pt=mt[1],gt=(0,d.classnames)({"gravitysmtp-tools-app__send-a-test-trigger--sending":Ce});j((function(){_t&&ut.current&&(ut.current.focus(),pt(!1))}),[_t]),A((function(){rt.current?rt.current=!1:ot&&lt&&(Fe?lt.current.focus():ot.current&&ot.current.focus())}),[Fe]);var bt=(0,R.Ds)(),ft=function(){var e=(0,i.Z)(l().mark((function e(){var t,n,a,i,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==Le&&""!==Ge){e.next=2;break}return e.abrupt("return");case 2:return at(ct.current.offsetWidth),Te(!0),t={action:it,security:st,email:Le,connector_type:Ge,as_html:Ye?"true":"false"},e.next=7,(0,E.Z)((0,_.gB)(M,JSON.stringify((0,w.Z)(["security"],t))),"info");case 7:return e.prev=7,e.next=10,(0,m.v_)({endpoint:u(),body:t});case 10:a=e.sent,Te(!1),null!=a&&null!==(n=a.data)&&void 0!==n&&n.success?bt(fe):null!=a&&null!==(i=a.error)&&void 0!==i&&null!==(i=i.detail)&&void 0!==i&&i.data?(s=(0,_.sO)(a.error.detail.data)?JSON.parse(a.error.detail.data):"",(0,_.Kn)(s.data)?(He(s.data),De(!0)):bt(s.data||be,"error")):bt(be,"error"),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(7),bt(e.t0,"error"),e.next=20,(0,E.Z)((0,_.gB)(q,JSON.stringify(e.t0)),"error");case 20:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),vt=Fe?1200:630;return he.gravitysmtp_view_tools_sendatest&&d.React.createElement("div",(0,a.Z)({},H,{ref:t}),d.React.createElement(f.Z,{size:"display-sm",weight:"semibold",spacing:1,content:U}),d.React.createElement(x.Z,{size:"text-sm",spacing:6,color:"comet",content:X}),d.React.createElement(y.Z,{HeaderContent:function(e){return d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,(0,a.Z)({content:Y,size:"text-lg",weight:"medium"},e)))},FooterContent:function(e){return Fe?d.React.createElement(b.Z,(0,a.Z)({label:oe,onClick:function(){De(!1),Me(""),He({})},size:"size-height-m"},e)):d.React.createElement(b.Z,(0,a.Z)({active:Ce,activeType:"loader",customAttributes:{"data-test-id":"send-a-test-email-trigger",style:{width:"".concat(nt,"px")}},customClasses:gt,disabled:we,icon:"paper-plane",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:re,onClick:ft,ref:ct,size:"size-height-m"},e))}},d.React.createElement(g.Z,{x:vt},Fe?d.React.createElement(d.React.Fragment,null,d.React.createElement(g.Z,{x:630},d.React.createElement(p.Z,{theme:"cosmos",type:"error",customIconPrefix:"gravitysmtp-admin-icon",content:We.error_message,spacing:[2,0,6,0]})),(null==We?void 0:We.issues)&&We.issues.length>0&&We.issues[0]&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:le}),d.React.createElement(x.Z,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},We.issues.map((function(e,t){return d.React.createElement("li",{key:"issues-".concat(t)},e)}))))),(null==We?void 0:We.possible_reasons)&&We.possible_reasons.length>0&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:ce}),d.React.createElement(x.Z,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},We.possible_reasons.map((function(e,t){return d.React.createElement("li",{key:"possible-reasons-".concat(t)},e)}))))),(null==We?void 0:We.recommended_steps)&&We.recommended_steps.length>0&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,{size:"text-sm",tagName:"h5",weight:"medium",spacing:3,content:ue}),d.React.createElement(x.Z,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},We.recommended_steps.map((function(e,t){return d.React.createElement("li",{key:"recommended-steps-".concat(t)},e)}))))),d.React.createElement(g.Z,{display:"flex",spacing:2},d.React.createElement(b.Z,{label:de,onClick:function(){window.location.href="//".concat(window.location.host).concat(window.location.pathname,"?page=gravitysmtp-activity-log&tab=log-details&event_id=").concat(We.full_log.log_id)},size:"size-height-m",spacing:[0,3,0,0],type:"white",ref:lt}),d.React.createElement(b.Z,{icon:"copy",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:me,onClick:function(){(0,_.BR)(We.log_copy),bt(_e),pt(!0)},ref:ut,size:"size-height-m",type:"white"}))):d.React.createElement(d.React.Fragment,null,d.React.createElement(v.Z,{labelAttributes:{label:$},helpTextAttributes:{content:te},placeholder:ee,onChange:function(e){return Me(e)},type:"email",disabled:we,customAttributes:{"data-test-id":"send-a-test-email-input",ref:ot},spacing:6}),Ze&&d.React.createElement(h.Z,{customAttributes:{"data-test-id":"send-a-test-integration"},initialValue:Ge,labelAttributes:{label:ne},helpTextAttributes:{content:ae},name:"integration",onChange:function(e){return Qe(e)},options:xe,disabled:we,spacing:6}),d.React.createElement(Z.Z,{customAttributes:{"data-test-id":"send-a-test-html"},initialChecked:Ye,labelAttributes:P({label:ie},(0,k.Z)("send-a-test-html")),helpTextAttributes:{content:se,size:"text-sm"},helpTextWidth:"full",labelPosition:"left",id:"send-a-test-html",name:"send-a-test-html",onChange:function(e){return $e(e)},size:"size-m",width:"full",disabled:we})))))}));S.propTypes={customAttributes:d.PropTypes.object,customClasses:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.array,d.PropTypes.object])},S.displayName="SendATestScreen",t.default=S},2077:function(e,t,n){n.d(t,{Z:function(){return _}});var a,i=n(9801),s=n(9509),r=n.n(s),o=n(9608),l=n.n(o),c=n(3267),u=n.n(c),d=n(4070),m=(null===(a=(0,n(375).iE)(u(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{};function _(){return p.apply(this,arguments)}function p(){return p=(0,i.Z)(r().mark((function e(){var t,n,a,i,s,o,c,u,_,p,g=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g.length>0&&void 0!==g[0]?g[0]:"",i=g.length>1&&void 0!==g[1]?g[1]:"debug",s=m.data,o=void 0===s?{}:s,c=m.endpoints,_=(null==(u=void 0===c?{}:c)||null===(t=u.log_debug_item)||void 0===t?void 0:t.action)||"",p=(null==u||null===(n=u.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=o&&o.debug_log_enabled&&_&&p&&a){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.v_)({endpoint:l(),body:{action:_,security:p,message:a,priority:i}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}},9208:function(e,t,n){var a=n(6588),i=n(5210);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return function n(s){return Object.entries(s).reduce((function(s,r){var o=(0,i.Z)(r,2),l=o[0],c=o[1];return"object"===(0,a.Z)(c)&&null!==c?s[l]=n(c):e.includes(l)?s[l]=null===c?null:t.repeat(c.length):s[l]=c,s}),Array.isArray(s)?[]:{})}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},36:function(e,t,n){var a,i=n(3267),s=n.n(i),r=(null===(a=(0,n(375).iE)(s(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{};t.Z=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{iconPrefix:"gravitysmtp-admin-icon",locked:(null==r||null===(e=r.data)||void 0===e||null===(e=e.locked_settings)||void 0===e?void 0:e.includes(n))||a,lockedMessage:i||(null==r||null===(t=r.i18n)||void 0===t?void 0:t.setting_locked)||""}}}}]);