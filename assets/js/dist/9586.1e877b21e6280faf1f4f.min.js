"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[9586],{69586:function(e,t,n){n.r(t);var a=n(90455),i=n(71860),r=n(8140),s=n(88856),c=n(78564),l=n.n(c),o=n(27122),u=n.n(o),_=n(97867),g=n(8173),m=n(60177),d=n(71376),p=n(30242),A=n(80509),f=n(5529),v=n(25787),b=n(87029),y=n(66598),x=n(16265),h=n(82263),E=n(13379),S=n(84860),C=n(68381),R=n(27764),k=n(33695),P=n(49572),T=n(83707),w=n(93313),O=n(59092);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,s.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=_.React.forwardRef,D=_.React.useRef,L=_.React.useState,j=_.ReactRouter.useLocation,W=_.ReactRouter.Link,J=z((function(e,t){var n,s,c,o,N=e.customAttributes,z=void 0===N?{}:N,J=e.customClasses,M=void 0===J?[]:J,U=e.common,V=void 0===U?{}:U,Y=e.data,F=void 0===Y?{}:Y,G=e.i18n,H=void 0===G?{}:G,K=I({className:(0,_.classnames)({"gravitysmtp-general-settings":!0},M)},z),X=H||{},B=X.debug_messages,q=void 0===B?{}:B,Q=q.uninstalling_plugin,Z=q.uninstalling_plugin_error,$=X.settings,ee=void 0===$?{}:$,te=ee.top_heading,ne=ee.license_box_heading,ae=ee.license_box_content,ie=ee.license_box_input_label,re=ee.license_box_input_help_text,se=ee.license_box_button_text,ce=ee.license_valid,le=ee.license_invalid,oe=ee.test_mode_box_content_1,ue=ee.test_mode_box_toggle_label,_e=ee.general_settings_box_heading,ge=ee.experiments_box_heading,me=ee.experiments_box_content,de=ee.experiments_box_toggle_label,pe=ee.experiments_box_toggle_help_text,Ae=ee.uninstall_box_heading,fe=ee.uninstall_box_content,ve=ee.uninstall_box_button_label,be=ee.uninstall_dialog_confirm_change_heading,ye=ee.uninstall_dialog_confirm_change_content,xe=ee.uninstall_dialog_confirm_change_confirm,he=ee.error_uninstalling_message,Ee=F.license_key,Se=F.license_key_is_valid,Ce=F.plugins_url,Re=(null==V?void 0:V.i18n)||{},ke=Re.debug_messages,Pe=void 0===ke?{}:ke,Te=Pe.saving_plugin_settings,we=void 0===Te?"":Te,Oe=Pe.saving_plugin_settings_error,Ne=void 0===Oe?"":Oe,Ie=Re.general_settings_usage_analytics_label,ze=void 0===Ie?"":Ie,De=Re.general_settings_usage_analytics_help_text,Le=void 0===De?"":De,je=(null==V?void 0:V.data)||{},We=je.usage_analytics_enabled,Je=je.usage_analytics_link,Me=L("boolean"==typeof Se&&!Se),Ue=(0,r.A)(Me,2),Ve=Ue[0],Ye=Ue[1],Fe=L(Ee),Ge=(0,r.A)(Fe,2),He=Ge[0],Ke=Ge[1],Xe=L(Se),Be=(0,r.A)(Xe,2),qe=Be[0],Qe=Be[1],Ze=L(""),$e=(0,r.A)(Ze,2),et=$e[0],tt=$e[1],nt=L(!1),at=(0,r.A)(nt,2),it=at[0],rt=at[1],st=(0,O.default)((function(e){return e.experimentalFeatures})),ct=(0,O.default)((function(e){return e.setExperimentalFeatures})),lt=(0,O.default)((function(e){return e.setConfirmDialogOpen})),ot=(0,O.default)((function(e){return e.setConfirmDialogSettings})),ut=(0,O.default)((function(e){return e.setPageLoaderActive})),_t=(0,O.default)((function(e){return e.testModeEnabled})),gt=(0,O.default)((function(e){return e.setTestModeEnabled})),mt=D(null),dt=(null==V||null===(n=V.endpoints)||void 0===n||null===(n=n.save_plugin_settings)||void 0===n?void 0:n.action)||"",pt=(null==V||null===(s=V.endpoints)||void 0===s||null===(s=s.save_plugin_settings)||void 0===s?void 0:s.nonce)||"",At=(null==V||null===(c=V.endpoints)||void 0===c||null===(c=c.gravitysmtp_uninstall_plugin)||void 0===c?void 0:c.action)||"",ft=(null==V||null===(o=V.endpoints)||void 0===o||null===(o=o.gravitysmtp_uninstall_plugin)||void 0===o?void 0:o.nonce)||"",vt=(0,_.classnames)({"gravitysmtp-general-settings__license-save":!0,"gravitysmtp-general-settings__license-save--saving":it}),bt=(0,S.dh)(),yt=j(),xt=function(){var e=(0,a.A)(l().mark((function e(){var t,n,a,i,r,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=mt.current.offsetWidth,n=He.trim(),Ye(!1),tt(t),rt(!0),Ke(n),a={action:dt,security:pt,key:(0,k.A)("license_key"),value:n},e.next=9,(0,T.A)((0,d.nv)(we,JSON.stringify((0,w.A)(["security","value"],a))),"info");case 9:return e.prev=9,e.next=12,(0,m.bE)({endpoint:u(),body:a});case 12:r=e.sent,rt(!1),tt(""),null!=r&&null!==(i=r.data)&&void 0!==i&&i.success?(c=(null==r||null===(s=r.data)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.license_is_valid)||!1,Qe(c),!0===c?bt(ce):!1===c&&bt(le,"error")):(Qe(!1),bt(le,"error")),e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(9),e.next=23,(0,T.A)((0,d.nv)(Ne,JSON.stringify(e.t0)),"error");case 23:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(){return e.apply(this,arguments)}}(),ht={customClasses:["gravitysmtp-general-settings__license-input"],controlled:!0,labelAttributes:I({label:ie},(0,R.A)((0,k.A)("license_key"))),helpTextAttributes:qe?{}:{content:re,size:"text-xs",weight:"regular"},id:"gravitysmtp-general-settings__license-input",name:(0,k.A)("license_key"),onChange:Ke,textSecurity:"disc",value:He,customAttributes:{readOnly:!(0,P.A)("CAPS_EDIT_LICENSE_KEY"),"data-test-id":"settings-license-input"}};!0===qe?(ht.borderStyle="correct",ht.iconAttributes={iconPrefix:"gravitysmtp-admin-icon",preset:"status-correct"}):!1===qe&&(ht.borderStyle="error",ht.iconAttributes={iconPrefix:"gravitysmtp-admin-icon",preset:"status-incorrect"});var Et=function(){var e=new URLSearchParams(yt.search),t=F.nav_item_param_key||"tab";e.set(t,"logging");var n=I(I({},yt),{},{search:"?".concat(e.toString())}),a=oe.split("%s");return _.React.createElement(_.React.Fragment,null,a[0],_.React.createElement(W,{className:"gform-link gform-typography--size-text-sm",to:n},a[1]),a[2])},St=function(){var e=(0,a.A)(l().mark((function e(t){var n,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gt(t),n={action:dt,security:pt,key:(0,k.A)("test_mode"),value:t?"true":"false"},e.next=4,(0,T.A)((0,d.nv)(we,JSON.stringify((0,w.A)(["security"],n))),"info");case 4:return e.prev=4,e.next=7,(0,m.bE)({endpoint:u(),body:n});case 7:null!=(i=e.sent)&&null!==(a=i.data)&&void 0!==a&&a.success,e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(4),e.next=16,(0,T.A)((0,d.nv)(Ne,JSON.stringify(e.t0)),"error");case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=(0,a.A)(l().mark((function e(t){var n,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:dt,security:pt,key:(0,k.A)("usage_analytics"),value:t?"true":"false"},e.next=3,(0,T.A)((0,d.nv)(we,JSON.stringify((0,w.A)(["security"],n))),"info");case 3:return e.prev=3,e.next=6,(0,m.bE)({endpoint:u(),body:n});case 6:null!=(i=e.sent)&&null!==(a=i.data)&&void 0!==a&&a.success&&(V.data.usage_analytics_enabled=t,(0,d.Ak)({event:"gravitysmtp/setting-updated",native:!1,data:{key:(0,k.A)("usage_analytics"),value:t}})),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(3),e.next=15,(0,T.A)((0,d.nv)(Ne,JSON.stringify(e.t0)),"error");case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Rt=function(){var e=(0,a.A)(l().mark((function e(){var t,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ut(!0),t={action:At,security:ft},e.next=4,(0,T.A)((0,d.nv)(Q,JSON.stringify((0,w.A)(["security"],t))),"info");case 4:return e.prev=4,e.next=7,(0,m.bE)({endpoint:u(),body:t});case 7:null!=(a=e.sent)&&null!==(n=a.data)&&void 0!==n&&n.success?window.location.href=Ce:(ut(!1),bt(he,"error")),e.next=18;break;case 11:return e.prev=11,e.t0=e.catch(4),ut(!1),bt(he,"error"),e.next=18,(0,T.A)((0,d.nv)(Z,JSON.stringify(e.t0)),"error");case 18:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),kt={customAttributes:{"data-test-id":"settings-test-mode-toggle"},initialChecked:_t,labelAttributes:I({label:ue},(0,R.A)((0,k.A)("test_mode"))),helpTextAttributes:{content:_.React.createElement(Et,null),size:"text-sm"},helpTextWidth:"full",labelPosition:"left",id:"test_mode",name:(0,k.A)("test_mode"),onChange:St,size:"size-m",spacing:6,width:"full",disabled:!(0,P.A)("CAPS_EDIT_TEST_MODE")},Pt={initialChecked:We,labelAttributes:I({label:ze},(0,R.A)((0,k.A)("usage_analytics"))),helpTextAttributes:{content:_.React.createElement(g.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:Le,tokens:[{component:b.A,key:"learn_link",props:{href:Je,size:"text-sm",target:"_blank"}}]}),size:"text-sm"},helpTextWidth:"full",labelPosition:"left",id:"usage_analytics",name:(0,k.A)("usage_analytics"),onChange:Ct,size:"size-m",width:"full",disabled:!(0,P.A)("CAPS_EDIT_USAGE_ANALYTICS")};return _.React.createElement("div",(0,i.A)({},K,{ref:t}),_.React.createElement(f.A,{size:"display-sm",weight:"semibold",spacing:6,content:te}),(0,P.A)("CAPS_VIEW_LICENSE_KEY")&&_.React.createElement(E.A,{HeaderContent:function(e){return _.React.createElement(p.A,{x:630},_.React.createElement(f.A,(0,i.A)({content:ne,tagName:"h2",size:"text-lg",weight:"medium",spacing:2},e)),_.React.createElement(y.A,(0,i.A)({content:ae,size:"text-sm",color:"comet"},e)))},FooterContent:function(e){var t={"data-test-id":"settings-license-info-save"};return et&&(t.style={width:"".concat(et,"px")}),t.disabled=!(0,P.A)("CAPS_EDIT_LICENSE_KEY")||it,_.React.createElement(A.A,(0,i.A)({active:it,activeType:"loader",customAttributes:t,customClasses:vt,icon:"save-disk",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:se,onClick:xt,size:"size-height-m",ref:mt},e))},spacing:6},_.React.createElement(p.A,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},_.React.createElement(v.A,ht),Ve&&_.React.createElement(h.A,{customIconPrefix:"gravitysmtp-admin-icon",spacing:[3,0,0,0],type:"error"},le))),((0,P.A)("CAPS_VIEW_TEST_MODE")||(0,P.A)("CAPS_VIEW_USAGE_ANALYTICS"))&&_.React.createElement(E.A,{HeaderContent:function(e){return _.React.createElement(p.A,{x:630},_.React.createElement(f.A,(0,i.A)({content:_e,tagName:"h2",size:"text-lg",weight:"medium"},e)))},spacing:6},_.React.createElement(p.A,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},(0,P.A)("CAPS_VIEW_TEST_MODE")&&_.React.createElement(x.A,kt),(0,P.A)("CAPS_VIEW_USAGE_ANALYTICS")&&_.React.createElement(x.A,Pt))),(0,P.A)("CAPS_VIEW_EXPERIMENTAL_FEATURES")&&_.React.createElement(E.A,{HeaderContent:function(e){return _.React.createElement(p.A,{x:630},_.React.createElement(f.A,(0,i.A)({content:ge,tagName:"h2",size:"text-lg",weight:"medium"},e)))},spacing:6},_.React.createElement(p.A,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},_.React.createElement(y.A,{content:me,size:"text-sm",color:"comet",spacing:8}),_.React.createElement(x.A,{customAttributes:{"data-test-id":"settings-alerts-experiment-enable"},helpTextAttributes:{content:pe,size:"text-sm"},initialChecked:(null==st?void 0:st.alerts_management)||!1,labelAttributes:I({label:de},(0,R.A)("alerts_management")),onChange:function(e){(0,C.A)({addSnackbarMessage:bt,key:(0,k.A)("enabled_experimental_features"),successCallback:function(){ct("alerts_management",e),e&&void 0===(null==F?void 0:F.alerts_settings)&&window.location.reload()},value:I(I({},st),{},{alerts_management:e})})},labelPosition:"left",name:"".concat((0,k.A)("enabled_experimental_features"),".alerts_management"),spacing:6,size:"size-m",width:"full",disabled:!(0,P.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}))),(0,P.A)("CAPS_VIEW_UNINSTALL")&&_.React.createElement(E.A,{HeaderContent:function(e){return _.React.createElement(p.A,{x:630},_.React.createElement(f.A,(0,i.A)({content:Ae,tagName:"h2",size:"text-lg",weight:"medium"},e)))}},_.React.createElement(p.A,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},_.React.createElement(y.A,{content:fe,size:"text-sm",color:"comet",spacing:6}),_.React.createElement(A.A,{disabled:!(0,P.A)("CAPS_EDIT_UNINSTALL"),icon:"trash",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:ve,onClick:(0,a.A)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ot({confirmDialogConfirmButtonType:"amaranth-red",confirmDialogI18n:{confirm_change_confirm:xe,confirm_change_content:ye,confirm_change_heading:be},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return lt(!1)},confirmDialogOnClose:function(){return lt(!1)},confirmDialogOnConfirm:function(){var e=(0,a.A)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lt(!1),e.next=3,Rt();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)}))),size:"size-height-m",type:"amaranth-red"}))))}));J.propTypes={customAttributes:_.PropTypes.object,customClasses:_.PropTypes.oneOfType([_.PropTypes.string,_.PropTypes.array,_.PropTypes.object]),data:_.PropTypes.object,i18n:_.PropTypes.object},J.displayName="SettingsScreen",t.default=J}}]);