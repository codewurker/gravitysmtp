"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[2668,5491],{43645:function(e,t,r){r.r(t);var n=r(71860),a=r(90455),o=r(88856),i=r(8140),u=r(78564),c=r.n(u),s=r(97867),l=r(60177),d=r(71376),g=r(84860),p=r(5529),v=r(96343),b=r(76910),f=r(83391),m=r(12084),h=r(43054),_=r(83707),y=r(93313),O=r(79929),P=r(52014);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var j=s.React.forwardRef,w=s.React.useEffect,D=s.React.useRef,R=s.React.useState,S=s.ReactRouter.useLocation,T=s.ReactRouter.useNavigate,x=s.ReactRouter.useSearchParams,k="log_page",L="search_term",C=new URLSearchParams(window.location.search),E=C.get(k)||"1",I=C.get(L)||"",N=j((function(e,t){var r=e.customAttributes,u=void 0===r?{}:r,j=e.customClasses,C=void 0===j?[]:j,N=e.common,z=void 0===N?{}:N,M=e.data,H=void 0===M?{}:M,J=e.i18n,U=void 0===J?{}:J,q=z.endpoints,B=(void 0===q?{}:q).debug_log_page,G=B.action,F=void 0===G?"":G,K=B.nonce,Q=void 0===K?"":K,V=U||{},W=V.debug_log,X=void 0===W?{}:W,Y=X.top_heading,Z=void 0===Y?"":Y,$=X.data_grid,ee=void 0===$?{}:$,te=ee.top_heading,re=void 0===te?"":te,ne=ee.clear_search_aria_label,ae=void 0===ne?"":ne,oe=ee.empty_title,ie=void 0===oe?"":oe,ue=ee.empty_message,ce=void 0===ue?"":ue,se=ee.grid_controls_search_button_label,le=void 0===se?"":se,de=ee.grid_controls_search_placeholder,ge=void 0===de?"":de,pe=ee.pagination_next,ve=void 0===pe?"":pe,be=ee.pagination_prev,fe=void 0===be?"":be,me=ee.pagination_next_aria_label,he=void 0===me?"":me,_e=ee.pagination_prev_aria_label,ye=void 0===_e?"":_e,Oe=ee.search_no_results_title,Pe=void 0===Oe?"":Oe,Ae=ee.search_no_results_message,je=void 0===Ae?"":Ae,we=X.snackbar_debug_log_error,De=void 0===we?"":we,Re=V.debug_messages,Se=void 0===Re?{}:Re,Te=Se.fetching_debug_log_page,xe=void 0===Te?"":Te,ke=Se.fetching_debug_log_page_error,Le=void 0===ke?"":ke,Ce=(null==H?void 0:H.debug_log)||{},Ee=Ce.ajax_grid_pagination_url,Ie=void 0===Ee?"":Ee,Ne=Ce.data_grid,ze=void 0===Ne?{}:Ne,Me=ze.columns,He=void 0===Me?[]:Me,Je=ze.column_style_props,Ue=void 0===Je?{}:Je,qe=ze.data,Be=void 0===qe?[]:qe,Ge=Ce.initial_load_timestamp,Fe=void 0===Ge?"":Ge,Ke=Ce.initial_row_count,Qe=void 0===Ke?0:Ke,Ve=Ce.rows_per_page,We=void 0===Ve?7:Ve,Xe=(null==H?void 0:H.caps)||{},Ye=S(),Ze=T(),$e=(0,g.dh)(),et=x(),tt=(0,i.A)(et,2),rt=tt[0],nt=(tt[1],R(Be.length>0?We:7)),at=(0,i.A)(nt,2),ot=at[0],it=at[1],ut=R(Qe),ct=(0,i.A)(ut,2),st=ct[0],lt=ct[1],dt=(0,P.default)((function(e){return e.setDebugDetailsDialogData})),gt=(0,P.default)((function(e){return e.setDebugDetailsDialogOpen})),pt=D(),vt=D(!1),bt=(0,O.h)({page:E,searchTerm:I}),ft=(0,O.A)((0,o.A)({},bt,{rows:Be,totalRowCount:Qe})),mt=ft.pageCache,ht=ft.addPageCache;w((function(){if(pt.current)if(vt.current)vt.current=!1;else{var e=rt.get(k)||"1",t=parseInt(e,10)-1,r=rt.get(L)||"";Ot({currentPage:t,searchTerm:r},!0),Dt({currentPage:t,searchTerm:r,searchActive:""!==r})}else pt.current=!0}),[rt]);var _t=function(e){var t=e.page,r=e.searchTerm,n=void 0===r?"":r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=new URLSearchParams(Ye.search);o.set(k,t),n?o.set(L,n):o.delete(L),Ze("?".concat(o.toString()),{replace:a})},yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rows,r=void 0===t?[]:t,n=e.totalRowCount,a=void 0===n?0:n,o=r.length>0;it(o?We:7),kt(r),lt(parseInt(a,10))},Ot=function(){var e=(0,a.A)(c().mark((function e(t){var r,n,a,o,i,u,s,g,p,v,b,f=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=f.length>1&&void 0!==f[1]&&f[1])||(vt.current=!0),n={page:t.currentPage+1,searchTerm:t.searchTerm},a=(0,O.h)(n),!mt[a]){e.next=8;break}return yt(mt[a]),_t(n,r),e.abrupt("return",t.currentPage);case 8:return o={action:F,security:Q,max_date:Fe,requested_page:t.currentPage+1,search_term:t.searchTerm||""},e.next=11,(0,_.A)((0,d.nv)(xe,JSON.stringify((0,y.A)(["security"],o))),"info");case 11:return e.prev=11,e.next=14,(0,l.bE)({endpoint:Ie,body:o});case 14:if(g=e.sent,p=(null==g||null===(i=g.data)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.rows)||[],v=(null==g||null===(u=g.data)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.total)||"0",null==g||null===(s=g.data)||void 0===s||!s.success){e.next=23;break}return ht(a,b={rows:p,totalRowCount:v}),yt(b),_t(n,r),e.abrupt("return",t.currentPage);case 23:$e(De,"error"),e.next=31;break;case 26:return e.prev=26,e.t0=e.catch(11),$e(e.t0.message,"error"),e.next=31,(0,_.A)((0,d.nv)(Le,JSON.stringify(e.t0)),"error");case 31:case"end":return e.stop()}}),e,null,[[11,26]])})));return function(t){return e.apply(this,arguments)}}(),Pt=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({className:(0,s.classnames)({"gravitysmtp-tools-app__debug-log":!0},C)},u),At=[m.hi,m.vj],jt=(0,h.A)({data:Be,dataPerPage:We,initialState:{isLoading:!1,moduleState:{currentPage:parseInt(E,10)-1,searchTerm:I,searchActive:""!==I}},modules:At,useAjax:!0}),wt=jt.moduleState,Dt=jt.updateModuleState,Rt=jt.isLoading,St=jt.setIsLoading,Tt=jt.gridLocked,xt=jt.organizedData,kt=jt.setOrganizedData,Lt={customClasses:["gravitysmtp-tools-app__debug-log-table"],id:"gravitysmtp-tools-app__debug-log-table",columns:He,columnStyleProps:Ue,data:xt,dataPerPage:ot,EmptyImage:v.A,gridLocked:Tt,handleGridClicks:function(e){if("view"===e.action){var t,r,n,a,o=(null==e||null===(t=e.data)||void 0===t?void 0:t.id)||0,i=xt.filter((function(e){var t;return(null==e||null===(t=e.id)||void 0===t||null===(t=t.props)||void 0===t?void 0:t.content)===o}))[0];if(!i)return;dt({date:(null==i||null===(r=i.date)||void 0===r||null===(r=r.props)||void 0===r?void 0:r.content)||"",event:(null==i||null===(n=i.status)||void 0===n?void 0:n.props)||{},log:(null==i||null===(a=i.log)||void 0===a||null===(a=a.props)||void 0===a?void 0:a.label)||""}),gt(!0)}},i18n:{emptyMessageI18n:ce,emptyTitleI18n:ie,gridHeadingI18n:re},isLoading:Rt,maintainHeight:0===xt.length,modules:At,moduleAttributes:{pagination:{nextLabel:ve,nextAriaLabel:he,onClick:Ot,pageCount:Math.ceil(st/ot),previousLabel:fe,previousAriaLabel:ye},search:{button:{customAttributes:{"data-test-id":"debug-log-search-trigger"},id:"debug-log-search-trigger",label:le},input:{customAttributes:{"data-test-id":"debug-log-search-input"},clearableButtonAttributes:{ariaLabel:ae,icon:"x-circle",iconPrefix:"gravitysmtp-admin-icon"},id:"debug-log-search-input",placeholder:ge},noResults:{Image:b.A},i18n:{noResultsTitle:Pe,noResultsMessage:je},onSearch:Ot}},moduleState:wt,setIsLoading:St,titleAttributes:{tagName:"h2"},updateModuleState:Dt,useAjax:!0};return Xe.gravitysmtp_view_debug_log&&s.React.createElement("div",(0,n.A)({},Pt,{ref:t}),s.React.createElement(p.A,{size:"display-sm",weight:"semibold",spacing:6,content:Z}),s.React.createElement(f.A,Lt))}));N.propTypes={customAttributes:s.PropTypes.object,customClasses:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.array,s.PropTypes.object]),common:s.PropTypes.object,data:s.PropTypes.object,i18n:s.PropTypes.object},N.displayName="DebugLogScreen",t.default=N},52014:function(e,t,r){r.r(t);var n,a=r(40450),o=r.n(a),i=r(8173),u=(null===(n=(0,r(71376).zj)(o(),"gravitysmtp_admin_config"))||void 0===n||null===(n=n.components)||void 0===n||n.tools,(0,i.vt)({debugDetailsDialogData:{},debugDetailsDialogOpen:!1},(function(e){return{setDebugDetailsDialogData:function(t){return e((function(){return{debugDetailsDialogData:t}}))},setDebugDetailsDialogOpen:function(t){return e((function(){return{debugDetailsDialogOpen:t}}))}}})));t.default=u},83707:function(e,t,r){r.d(t,{A:function(){return p}});var n,a=r(90455),o=r(78564),i=r.n(o),u=r(27122),c=r.n(u),s=r(40450),l=r.n(s),d=r(60177),g=(null===(n=(0,r(71376).zj)(l(),"gravitysmtp_admin_config"))||void 0===n?void 0:n.common)||{};function p(){return v.apply(this,arguments)}function v(){return v=(0,a.A)(i().mark((function e(){var t,r,n,a,o,u,s,l,p,v,b=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>0&&void 0!==b[0]?b[0]:"",a=b.length>1&&void 0!==b[1]?b[1]:"debug",o=g.data,u=void 0===o?{}:o,s=g.endpoints,p=(null==(l=void 0===s?{}:s)||null===(t=l.log_debug_item)||void 0===t?void 0:t.action)||"",v=(null==l||null===(r=l.log_debug_item)||void 0===r?void 0:r.nonce)||"",null!=u&&u.debug_log_enabled&&p&&v&&n){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.bE)({endpoint:c(),body:{action:p,security:v,message:n,priority:a}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}},93313:function(e,t,r){var n=r(52888),a=r(8140);t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",r=function(o){return Object.entries(o).reduce((function(o,i){var u=(0,a.A)(i,2),c=u[0],s=u[1];return"object"===(0,n.A)(s)&&null!==s?o[c]=r(s):e.includes(c)?o[c]=null===s?null:t.repeat(s.length):o[c]=s,o}),Array.isArray(o)?[]:{})};return r(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},79929:function(e,t,r){r.d(t,{h:function(){return s}});var n=r(88856),a=r(8140),o=r(97867);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=o.React.useState,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,r=void 0===t?1:t,n=e.searchTerm,a=void 0===n?"":n,o=e.filters,i=void 0===o?"":o,u="page-".concat(r);return a&&(u+="-".concat(a)),i&&(u+="-".concat(i)),u};t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c((function(){return e})),r=(0,a.A)(t,2),o=r[0],i=r[1];return{pageCache:o,addPageCache:function(e,t){i((function(r){return u(u({},r),{},(0,n.A)({},e,t))}))}}}}}]);