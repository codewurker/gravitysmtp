"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[3248],{9430:function(e,t,n){n.r(t);var r=n(6796),a=n(9801),s=n(5210),c=n(5720),i=n(9509),o=n.n(i),l=n(9608),u=n.n(l),d=n(7784),m=n(4070),p=n(583),_=n(8887),g=n(9805),b=n(7343),f=n(6192),v=n(6493),y=n(2030),h=n(4237),R=n(7024),x=(n(7066),n(2077)),Z=n(9208);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var w=d.React.forwardRef,O=d.React.useEffect,k=d.React.useLayoutEffect,P=d.React.useState,z=d.React.useRef,j=w((function(e,t){var n,i,l=e.customAttributes,w=void 0===l?{}:l,j=e.customClasses,C=void 0===j?[]:j,N=e.common,T=void 0===N?{}:N,A=e.data,S=void 0===A?{}:A,F=e.i18n,D=void 0===F?{}:F,B=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,d.classnames)({"gravitysmtp-tools-app__send-a-test":!0},C)},w),J=D||{},I=J.debug_messages,H=I.sending_test_email,K=void 0===H?"":H,L=I.sending_test_email_error,W=void 0===L?"":L,q=J.send_a_test,G=void 0===q?{}:q,M=G.top_heading,Q=G.top_content,U=G.send_test_box_heading,V=G.send_test_box_input_label,X=G.send_test_box_input_placeholder,Y=G.send_test_box_input_description,$=(G.send_test_box_alerts_heading,G.send_test_box_alerts_text,G.send_test_box_alerts_button_label),ee=G.send_test_box_try_again_button_label,te=G.send_test_box_error_issue_heading,ne=G.send_test_box_error_possible_reasons_heading,re=G.send_test_box_error_recommended_steps_heading,ae=G.send_test_box_view_log_button_label,se=G.send_test_box_copy_log_button_label,ce=G.send_test_box_copy_log_success_message,ie=((null==T?void 0:T.data)||{}).test_mode,oe=(null==T?void 0:T.i18n)||{},le=oe.snackbar_send_test_mail_error,ue=oe.snackbar_send_test_mail_success,de=oe.test_mode_warning_notice,me=(null==S?void 0:S.caps)||{},pe=P(!1),_e=(0,s.Z)(pe,2),ge=_e[0],be=_e[1],fe=P(!1),ve=(0,s.Z)(fe,2),ye=ve[0],he=ve[1],Re=P({}),xe=(0,s.Z)(Re,2),Ze=xe[0],Ee=xe[1],we=P(""),Oe=(0,s.Z)(we,2),ke=Oe[0],Pe=Oe[1],ze=P(""),je=(0,s.Z)(ze,2),Ce=je[0],Ne=je[1],Te=(null==T||null===(n=T.endpoints)||void 0===n||null===(n=n.send_test)||void 0===n?void 0:n.action)||"",Ae=(null==T||null===(i=T.endpoints)||void 0===i||null===(i=i.send_test)||void 0===i?void 0:i.nonce)||"",Se=z(!0),Fe=z(null),De=z(null),Be=z(null),Je=z(null),Ie=P(!1),He=(0,s.Z)(Ie,2),Ke=He[0],Le=He[1],We=(0,d.classnames)({"gravitysmtp-tools-app__send-a-test-trigger--sending":ge});O((function(){Ke&&Je.current&&(Je.current.focus(),Le(!1))}),[Ke]),k((function(){Se.current?Se.current=!1:Fe&&De&&(ye?De.current.focus():Fe.current&&Fe.current.focus())}),[ye]);var qe=(0,h.Ds)(),Ge=function(){var e=(0,a.Z)(o().mark((function e(){var t,n,r,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==ke){e.next=2;break}return e.abrupt("return");case 2:return Ne(Be.current.offsetWidth),be(!0),t={action:Te,security:Ae,email:ke},e.next=7,(0,x.Z)((0,p.gB)(K,JSON.stringify((0,Z.Z)(["security"],t))),"info");case 7:return e.prev=7,e.next=10,(0,m.v_)({endpoint:u(),body:t});case 10:r=e.sent,be(!1),null!=r&&null!==(n=r.data)&&void 0!==n&&n.success?qe(ue):null!=r&&null!==(a=r.error)&&void 0!==a&&null!==(a=a.detail)&&void 0!==a&&a.data?(s=(0,p.sO)(r.error.detail.data)?JSON.parse(r.error.detail.data):"",(0,p.Kn)(s.data)?(Ee(s.data),he(!0)):qe(s.data||le,"error")):qe(le,"error"),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(7),qe(e.t0,"error"),e.next=20,(0,x.Z)((0,p.gB)(W,JSON.stringify(e.t0)),"error");case 20:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),Me=ye?1200:630;return me.gravitysmtp_view_tools_sendatest&&d.React.createElement("div",(0,r.Z)({},B,{ref:t}),d.React.createElement(f.Z,{size:"display-sm",weight:"semibold",spacing:1,content:M}),d.React.createElement(R.Z,{size:"text-sm",spacing:6,color:"comet",content:Q}),ie&&d.React.createElement(_.Z,{customIconPrefix:"gravitysmtp-admin-icon",spacing:[6,0,6,0],type:"notice"},de),d.React.createElement(y.Z,{HeaderContent:function(e){return d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,(0,r.Z)({content:U,size:"text-lg",weight:"medium"},e)))},FooterContent:function(e){return ye?d.React.createElement(b.Z,(0,r.Z)({label:ee,onClick:function(){he(!1),Pe(""),Ee({})},size:"size-height-m"},e)):d.React.createElement(b.Z,(0,r.Z)({active:ge,activeType:"loader",customAttributes:{style:{width:"".concat(Ce,"px")}},customClasses:We,disabled:ie,icon:"paper-plane",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:$,onClick:Ge,ref:Be,size:"size-height-m"},e))}},d.React.createElement(g.Z,{x:Me},ye?d.React.createElement(d.React.Fragment,null,d.React.createElement(g.Z,{x:630},d.React.createElement(_.Z,{theme:"cosmos",type:"error",customIconPrefix:"gravitysmtp-admin-icon",content:Ze.error_message,spacing:[2,0,6,0]})),(null==Ze?void 0:Ze.issues)&&Ze.issues.length>0&&Ze.issues[0]&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:te}),d.React.createElement(R.Z,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},Ze.issues.map((function(e,t){return d.React.createElement("li",{key:"issues-".concat(t)},e)}))))),(null==Ze?void 0:Ze.possible_reasons)&&Ze.possible_reasons.length>0&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:ne}),d.React.createElement(R.Z,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},Ze.possible_reasons.map((function(e,t){return d.React.createElement("li",{key:"possible-reasons-".concat(t)},e)}))))),(null==Ze?void 0:Ze.recommended_steps)&&Ze.recommended_steps.length>0&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,{size:"text-sm",tagName:"h5",weight:"medium",spacing:3,content:re}),d.React.createElement(R.Z,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},Ze.recommended_steps.map((function(e,t){return d.React.createElement("li",{key:"recommended-steps-".concat(t)},e)}))))),d.React.createElement(g.Z,{display:"flex",spacing:2},d.React.createElement(b.Z,{label:ae,onClick:function(){window.location.href="//".concat(window.location.host).concat(window.location.pathname,"?page=gravitysmtp-activity-log&tab=log-details&event_id=").concat(Ze.full_log.log_id)},size:"size-height-m",spacing:[0,3,0,0],type:"white",ref:De}),d.React.createElement(b.Z,{icon:"copy",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:se,onClick:function(){(0,p.BR)(Ze.log_copy),qe(ce),Le(!0)},ref:Je,size:"size-height-m",type:"white"}))):d.React.createElement(v.Z,{labelAttributes:{label:V},helpTextAttributes:{content:Y},placeholder:X,onChange:function(e){return Pe(e)},type:"email",disabled:ie,customAttributes:{style:{width:"100%",display:"block"},ref:Fe}}))))}));j.propTypes={customAttributes:d.PropTypes.object,customClasses:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.array,d.PropTypes.object])},j.displayName="SendATestScreen",t.default=j},2077:function(e,t,n){n.d(t,{Z:function(){return p}});var r,a=n(9801),s=n(9509),c=n.n(s),i=n(9608),o=n.n(i),l=n(3267),u=n.n(l),d=n(4070),m=(null===(r=(0,n(583).iE)(u(),"gravitysmtp_admin_config"))||void 0===r?void 0:r.common)||{};function p(){return _.apply(this,arguments)}function _(){return _=(0,a.Z)(c().mark((function e(){var t,n,r,a,s,i,l,u,p,_,g=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>0&&void 0!==g[0]?g[0]:"",a=g.length>1&&void 0!==g[1]?g[1]:"debug",s=m.data,i=void 0===s?{}:s,l=m.endpoints,p=(null==(u=void 0===l?{}:l)||null===(t=u.log_debug_item)||void 0===t?void 0:t.action)||"",_=(null==u||null===(n=u.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=i&&i.debug_log_enabled&&p&&_&&r){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.v_)({endpoint:o(),body:{action:p,security:_,message:r,priority:a}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}},9208:function(e,t,n){var r=n(6588),a=n(5210);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return function n(s){return Object.entries(s).reduce((function(s,c){var i=(0,a.Z)(c,2),o=i[0],l=i[1];return"object"===(0,r.Z)(l)&&null!==l?s[o]=n(l):e.includes(o)?s[o]=null===l?null:t.repeat(l.length):s[o]=l,s}),Array.isArray(s)?[]:{})}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);