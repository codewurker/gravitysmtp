"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[9702,4880,4688],{69586:function(e,t,n){n.r(t);var i=n(90455),a=n(71860),r=n(8140),o=n(88856),s=n(78564),c=n.n(s),l=n(27122),u=n.n(l),d=n(97867),g=n(13296),m=n(60177),v=n(71376),f=n(30242),p=n(80509),_=n(5529),y=n(25787),b=n(87029),h=n(66598),A=n(16265),x=n(82263),O=n(13379),k=n(84860),D=n(27764),C=n(83707),w=n(93313),E=n(59092);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=d.React.forwardRef,z=d.React.useRef,j=d.React.useState,T=d.ReactRouter.useLocation,I=d.ReactRouter.Link,N=P((function(e,t){var n,o,s,l,R=e.customAttributes,P=void 0===R?{}:R,N=e.customClasses,L=void 0===N?[]:N,J=e.common,F=void 0===J?{}:J,M=e.data,B=void 0===M?{}:M,H=e.i18n,W=void 0===H?{}:H,U=S({className:(0,d.classnames)({"gravitysmtp-general-settings":!0},L)},P),X=W||{},q=X.debug_messages,G=void 0===q?{}:q,K=G.uninstalling_plugin,Q=G.uninstalling_plugin_error,V=X.settings,Y=void 0===V?{}:V,Z=Y.top_heading,$=Y.license_box_heading,ee=Y.license_box_content,te=Y.license_box_input_label,ne=Y.license_box_input_help_text,ie=Y.license_box_button_text,ae=Y.license_valid,re=Y.license_invalid,oe=Y.test_mode_box_content_1,se=Y.test_mode_box_toggle_label,ce=Y.general_settings_box_heading,le=Y.uninstall_box_heading,ue=Y.uninstall_box_content,de=Y.uninstall_box_button_label,ge=Y.uninstall_dialog_confirm_change_heading,me=Y.uninstall_dialog_confirm_change_content,ve=Y.uninstall_dialog_confirm_change_confirm,fe=Y.error_uninstalling_message,pe=B.license_key,_e=B.license_key_is_valid,ye=B.plugins_url,be=(null==F?void 0:F.i18n)||{},he=be.debug_messages,Ae=void 0===he?{}:he,xe=Ae.saving_plugin_settings,Oe=void 0===xe?"":xe,ke=Ae.saving_plugin_settings_error,De=void 0===ke?"":ke,Ce=be.general_settings_usage_analytics_label,we=void 0===Ce?"":Ce,Ee=be.general_settings_usage_analytics_help_text,Re=void 0===Ee?"":Ee,Se=(null==F?void 0:F.data)||{},Pe=Se.usage_analytics_enabled,ze=Se.usage_analytics_link,je=Se.param_keys,Te=(null==B?void 0:B.caps)||{},Ie=j("boolean"==typeof _e&&!_e),Ne=(0,r.A)(Ie,2),Le=Ne[0],Je=Ne[1],Fe=j(pe),Me=(0,r.A)(Fe,2),Be=Me[0],He=Me[1],We=j(_e),Ue=(0,r.A)(We,2),Xe=Ue[0],qe=Ue[1],Ge=j(""),Ke=(0,r.A)(Ge,2),Qe=Ke[0],Ve=Ke[1],Ye=j(!1),Ze=(0,r.A)(Ye,2),$e=Ze[0],et=Ze[1],tt=(0,E.default)((function(e){return e.setConfirmDialogOpen})),nt=(0,E.default)((function(e){return e.setConfirmDialogSettings})),it=(0,E.default)((function(e){return e.setPageLoaderActive})),at=(0,E.default)((function(e){return e.testModeEnabled})),rt=(0,E.default)((function(e){return e.setTestModeEnabled})),ot=z(null),st=(null==F||null===(n=F.endpoints)||void 0===n||null===(n=n.save_plugin_settings)||void 0===n?void 0:n.action)||"",ct=(null==F||null===(o=F.endpoints)||void 0===o||null===(o=o.save_plugin_settings)||void 0===o?void 0:o.nonce)||"",lt=(null==F||null===(s=F.endpoints)||void 0===s||null===(s=s.gravitysmtp_uninstall_plugin)||void 0===s?void 0:s.action)||"",ut=(null==F||null===(l=F.endpoints)||void 0===l||null===(l=l.gravitysmtp_uninstall_plugin)||void 0===l?void 0:l.nonce)||"",dt=(0,d.classnames)({"gravitysmtp-general-settings__license-save":!0,"gravitysmtp-general-settings__license-save--saving":$e}),gt=(0,k.dh)(),mt=T(),vt=function(){var e=(0,i.A)(c().mark((function e(){var t,n,i,a,r,o,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ot.current.offsetWidth,n=Be.trim(),Je(!1),Ve(t),et(!0),He(n),i={action:st,security:ct,key:je.license_key,value:n},e.next=9,(0,C.A)((0,v.nv)(Oe,JSON.stringify((0,w.A)(["security","value"],i))),"info");case 9:return e.prev=9,e.next=12,(0,m.bE)({endpoint:u(),body:i});case 12:r=e.sent,et(!1),Ve(""),null!=r&&null!==(a=r.data)&&void 0!==a&&a.success?(s=(null==r||null===(o=r.data)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.license_is_valid)||!1,qe(s),!0===s?gt(ae):!1===s&&gt(re,"error")):(qe(!1),gt(re,"error")),e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(9),e.next=23,(0,C.A)((0,v.nv)(De,JSON.stringify(e.t0)),"error");case 23:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(){return e.apply(this,arguments)}}(),ft={customClasses:["gravitysmtp-general-settings__license-input"],controlled:!0,labelAttributes:S({label:te},(0,D.A)(je.license_key)),helpTextAttributes:Xe?{}:{content:ne,size:"text-xs",weight:"regular"},id:"gravitysmtp-general-settings__license-input",name:je.license_key,onChange:He,textSecurity:"disc",value:Be,customAttributes:{readOnly:!Te.gravitysmtp_edit_license_key,"data-test-id":"settings-license-input"}};!0===Xe?(ft.borderStyle="correct",ft.iconAttributes={iconPrefix:"gravitysmtp-admin-icon",preset:"status-correct"}):!1===Xe&&(ft.borderStyle="error",ft.iconAttributes={iconPrefix:"gravitysmtp-admin-icon",preset:"status-incorrect"});var pt=function(){var e=new URLSearchParams(mt.search),t=B.nav_item_param_key||"tab";e.set(t,"logging");var n=S(S({},mt),{},{search:"?".concat(e.toString())}),i=oe.split("%s");return d.React.createElement(d.React.Fragment,null,i[0],d.React.createElement(I,{className:"gform-link gform-typography--size-text-sm",to:n},i[1]),i[2])},_t=function(){var e=(0,i.A)(c().mark((function e(t){var n,i,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rt(t),n={action:st,security:ct,key:je.test_mode,value:t?"true":"false"},e.next=4,(0,C.A)((0,v.nv)(Oe,JSON.stringify((0,w.A)(["security"],n))),"info");case 4:return e.prev=4,e.next=7,(0,m.bE)({endpoint:u(),body:n});case 7:null!=(a=e.sent)&&null!==(i=a.data)&&void 0!==i&&i.success,e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(4),e.next=16,(0,C.A)((0,v.nv)(De,JSON.stringify(e.t0)),"error");case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),yt=function(){var e=(0,i.A)(c().mark((function e(t){var n,i,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:st,security:ct,key:je.usage_analytics,value:t?"true":"false"},e.next=3,(0,C.A)((0,v.nv)(Oe,JSON.stringify((0,w.A)(["security"],n))),"info");case 3:return e.prev=3,e.next=6,(0,m.bE)({endpoint:u(),body:n});case 6:null!=(a=e.sent)&&null!==(i=a.data)&&void 0!==i&&i.success&&(F.data.usage_analytics_enabled=t,(0,v.Ak)({event:"gravitysmtp/setting-updated",native:!1,data:{key:je.usage_analytics,value:t}})),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(3),e.next=15,(0,C.A)((0,v.nv)(De,JSON.stringify(e.t0)),"error");case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),bt=function(){var e=(0,i.A)(c().mark((function e(){var t,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return it(!0),t={action:lt,security:ut},e.next=4,(0,C.A)((0,v.nv)(K,JSON.stringify((0,w.A)(["security"],t))),"info");case 4:return e.prev=4,e.next=7,(0,m.bE)({endpoint:u(),body:t});case 7:null!=(i=e.sent)&&null!==(n=i.data)&&void 0!==n&&n.success?window.location.href=ye:(it(!1),gt(fe,"error")),e.next=18;break;case 11:return e.prev=11,e.t0=e.catch(4),it(!1),gt(fe,"error"),e.next=18,(0,C.A)((0,v.nv)(Q,JSON.stringify(e.t0)),"error");case 18:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),ht={customAttributes:{"data-test-id":"settings-test-mode-toggle"},initialChecked:at,labelAttributes:S({label:se},(0,D.A)(je.test_mode)),helpTextAttributes:{content:d.React.createElement(pt,null),size:"text-sm"},helpTextWidth:"full",labelPosition:"left",id:"test_mode",name:je.test_mode,onChange:_t,size:"size-m",spacing:6,width:"full",disabled:!Te.gravitysmtp_edit_test_mode},At={initialChecked:Pe,labelAttributes:S({label:we},(0,D.A)(je.usage_analytics)),helpTextAttributes:{content:d.React.createElement(g.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:Re,tokens:[{component:b.A,key:"learn_link",props:{href:ze,size:"text-sm",target:"_blank"}}]}),size:"text-sm"},helpTextWidth:"full",labelPosition:"left",id:"usage_analytics",name:je.usage_analytics,onChange:yt,size:"size-m",width:"full",disabled:!Te.gravitysmtp_edit_usage_analytics};return d.React.createElement("div",(0,a.A)({},U,{ref:t}),d.React.createElement(_.A,{size:"display-sm",weight:"semibold",spacing:6,content:Z}),Te.gravitysmtp_view_license_key&&d.React.createElement(O.A,{HeaderContent:function(e){return d.React.createElement(f.A,{x:630},d.React.createElement(_.A,(0,a.A)({content:$,tagName:"h2",size:"text-lg",weight:"medium",spacing:2},e)),d.React.createElement(h.A,(0,a.A)({content:ee,size:"text-sm",color:"comet"},e)))},FooterContent:function(e){var t={"data-test-id":"settings-license-info-save"};return Qe&&(t.style={width:"".concat(Qe,"px")}),t.disabled=!Te.gravitysmtp_edit_license_key,d.React.createElement(p.A,(0,a.A)({active:$e,activeType:"loader",customAttributes:t,customClasses:dt,icon:"save-disk",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:ie,onClick:vt,size:"size-height-m",ref:ot},e))},spacing:6},d.React.createElement(f.A,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},d.React.createElement(y.A,ft),Le&&d.React.createElement(x.A,{customIconPrefix:"gravitysmtp-admin-icon",spacing:[3,0,0,0],type:"error"},re))),(Te.gravitysmtp_view_test_mode||Te.gravitysmtp_view_usage_analytics)&&d.React.createElement(O.A,{HeaderContent:function(e){return d.React.createElement(f.A,{x:630},d.React.createElement(_.A,(0,a.A)({content:ce,tagName:"h2",size:"text-lg",weight:"medium"},e)))},spacing:6},d.React.createElement(f.A,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},Te.gravitysmtp_view_test_mode&&d.React.createElement(A.A,ht),Te.gravitysmtp_view_usage_analytics&&d.React.createElement(A.A,At))),Te.gravitysmtp_view_uninstall&&d.React.createElement(O.A,{HeaderContent:function(e){return d.React.createElement(f.A,{x:630},d.React.createElement(_.A,(0,a.A)({content:le,tagName:"h2",size:"text-lg",weight:"medium"},e)))}},d.React.createElement(f.A,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},d.React.createElement(h.A,{content:ue,size:"text-sm",color:"comet",spacing:6}),d.React.createElement(p.A,{disabled:!Te.gravitysmtp_edit_uninstall,icon:"trash",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:de,onClick:(0,i.A)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nt({confirmDialogConfirmButtonType:"amaranth-red",confirmDialogI18n:{confirm_change_confirm:ve,confirm_change_content:me,confirm_change_heading:ge},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return tt(!1)},confirmDialogOnClose:function(){return tt(!1)},confirmDialogOnConfirm:function(){var e=(0,i.A)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tt(!1),e.next=3,bt();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)}))),size:"size-height-m",type:"amaranth-red"}))))}));N.propTypes={customAttributes:d.PropTypes.object,customClasses:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.array,d.PropTypes.object]),data:d.PropTypes.object,i18n:d.PropTypes.object},N.displayName="SettingsScreen",t.default=N},59092:function(e,t,n){n.r(t);var i,a,r,o,s,c,l,u,d,g=n(40450),m=n.n(g),v=n(97867),f=n(13296),p=n(71376),_=(null===(i=(0,p.zj)(m(),"gravitysmtp_admin_config"))||void 0===i||null===(i=i.components)||void 0===i?void 0:i.settings)||{},y=(null===(a=(0,p.zj)(m(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},b={activeIntegration:(d=null==_||null===(u=_.data)||void 0===u||null===(u=u.integrations)||void 0===u?void 0:u.find((function(e){var t;return null==e||null===(t=e.data)||void 0===t?void 0:t.enabled})),(null==d?void 0:d.id)||""),activeIntegrationSettings:"",confirmDialogCustomAttributes:{},confirmDialogI18n:{},confirmDialogOnCancel:function(){},confirmDialogOnClose:function(){},confirmDialogOnConfirm:function(){},confirmDialogOpen:!1,confirmDialogConfirmButtonType:"primary-new",debugLogEnabled:(null==y||null===(r=y.data)||void 0===r?void 0:r.debug_log_enabled)||!1,integrations:(null==_||null===(o=_.data)||void 0===o?void 0:o.integrations)||[],integrationSettingsDialogOpen:!1,integrationSettingsFormData:(l={},null==_||null===(c=_.data)||void 0===c||null===(c=c.integrations)||void 0===c||c.forEach((function(e){l[e.id]=(null==e?void 0:e.data)||{}})),l),noticeDialogOpen:!1,pageLoaderActive:!1,testModeEnabled:(null==y||null===(s=y.data)||void 0===s?void 0:s.test_mode_enabled)||!1},h=(0,f.vt)(b,(function(e){return{setActiveIntegration:function(t){return e((function(){return{activeIntegration:t}}))},setActiveIntegrationSettings:function(t){return e((function(){return{activeIntegrationSettings:t}}))},setConfirmDialogOpen:function(t){return e((function(){return{confirmDialogOpen:t}}))},setConfirmDialogSettings:function(t){var n=t.confirmDialogCustomAttributes,i=void 0===n?{}:n,a=t.confirmDialogI18n,r=void 0===a?{}:a,o=t.confirmDialogOpen,s=void 0!==o&&o,c=t.confirmDialogOnCancel,l=void 0===c?function(){}:c,u=t.confirmDialogOnClose,d=void 0===u?function(){}:u,g=t.confirmDialogOnConfirm,m=void 0===g?function(){}:g,v=t.confirmDialogConfirmButtonType,f=void 0===v?"primary-new":v;e((function(){return{confirmDialogCustomAttributes:i,confirmDialogConfirmButtonType:f,confirmDialogI18n:r,confirmDialogOpen:s,confirmDialogOnCancel:l,confirmDialogOnClose:d,confirmDialogOnConfirm:m}}))},setIntegrationSettingsDialogOpen:function(t){return e((function(){return{integrationSettingsDialogOpen:t}}))},setNoticeDialogOpen:function(t){return e((function(){return{noticeDialogOpen:t}}))},setPageLoaderActive:function(t){return e((function(){return{pageLoaderActive:t}}))},setIntegrationSettingsFormData:function(t,n,i){return e((0,v.immer)((function(e){e.integrationSettingsFormData[t]||(e.integrationSettingsFormData[t]={}),e.integrationSettingsFormData[t][n]=i})))},setDebugLogEnabled:function(t){return e((function(){return{debugLogEnabled:t}}))},setTestModeEnabled:function(t){return e((function(){return{testModeEnabled:t}}))},updateIntegrationSettings:function(t,n){return e((function(){return{activeIntegrationSettings:t,integrationSettingsDialogOpen:n}}))},updateIntegrationStatus:function(t,n){var i=n.activated,a=n.configured,r=n.enabled,o=n.is_primary,s=n.is_backup;return e((0,v.immer)((function(e){var n=e.integrations.find((function(e){return e.id===t}));n&&(n.data||(n.data={}),void 0!==i&&(n.data.activated=i),void 0!==a&&(n.data.configured=a),void 0!==r&&(n.data.enabled=r),void 0!==o&&(n.data.is_primary=o),void 0!==s&&(n.data.is_backup=s))})))}}}));t.default=h},83707:function(e,t,n){n.d(t,{A:function(){return m}});var i,a=n(90455),r=n(78564),o=n.n(r),s=n(27122),c=n.n(s),l=n(40450),u=n.n(l),d=n(60177),g=(null===(i=(0,n(71376).zj)(u(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};function m(){return v.apply(this,arguments)}function v(){return v=(0,a.A)(o().mark((function e(){var t,n,i,a,r,s,l,u,m,v,f=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=f.length>0&&void 0!==f[0]?f[0]:"",a=f.length>1&&void 0!==f[1]?f[1]:"debug",r=g.data,s=void 0===r?{}:r,l=g.endpoints,m=(null==(u=void 0===l?{}:l)||null===(t=u.log_debug_item)||void 0===t?void 0:t.action)||"",v=(null==u||null===(n=u.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=s&&s.debug_log_enabled&&m&&v&&i){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.bE)({endpoint:c(),body:{action:m,security:v,message:i,priority:a}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}},93313:function(e,t,n){var i=n(52888),a=n(8140);t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return function n(r){return Object.entries(r).reduce((function(r,o){var s=(0,a.A)(o,2),c=s[0],l=s[1];return"object"===(0,i.A)(l)&&null!==l?r[c]=n(l):e.includes(c)?r[c]=null===l?null:t.repeat(l.length):r[c]=l,r}),Array.isArray(r)?[]:{})}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},27764:function(e,t,n){var i,a=n(40450),r=n.n(a),o=(null===(i=(0,n(71376).zj)(r(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};t.A=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{iconPrefix:"gravitysmtp-admin-icon",locked:(null==o||null===(e=o.data)||void 0===e||null===(e=e.locked_settings)||void 0===e?void 0:e.includes(n))||i,lockedMessage:a||(null==o||null===(t=o.i18n)||void 0===t?void 0:t.setting_locked)||""}}}}]);