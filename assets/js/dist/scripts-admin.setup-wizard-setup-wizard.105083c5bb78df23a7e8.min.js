"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[6963],{2142:function(t,e,n){n.r(e);var r=n(5720),a=n(9801),i=n(6588),s=n(5210),c=n(9509),o=n.n(c),u=n(9608),l=n.n(u),d=n(7784),p=n(760),f=n(4070),m=n(375),g=n(9805),v=n(6192),_=n(7024),b=n(5271),y=n(5806),w=n(5212),h=n(2077),z=n(9208),k=n(1047),x=d.React.useEffect,S=d.React.useRef,R=d.React.useState;e.default=function(t){var e,n,c,u=t.data,Z=t.endpoints,E=t.i18n,C=E.debug_messages,A=void 0===C?{}:C,B=A.migrating_data,O=A.migrating_data_error,N=E.setup_wizard_next_button,P=E.setup_wizard_import_data_title,j=E.setup_wizard_import_data_copy,I=u.import_data,D=u.integrations,T=(0,k.default)((function(t){return t.activeStep})),J=(0,k.default)((function(t){return t.isAnimatedIn})),L=(0,k.default)((function(t){return t.importPlugin})),F=(0,k.default)((function(t){return t.setActiveStepNext})),H=(0,k.default)((function(t){return t.setHasDebugError})),M=(0,k.default)((function(t){return t.setImportPlugin})),U=(0,k.default)((function(t){return t.setIntegrationSettingsFormData})),V=(0,k.default)((function(t){return t.setSettingsUpdated})),W=(null==Z||null===(e=Z.migrate_settings)||void 0===e?void 0:e.action)||"",G=(null==Z||null===(n=Z.migrate_settings)||void 0===n?void 0:n.nonce)||"",K=R(!1),X=(0,s.Z)(K,2),$=X[0],q=X[1],Q=function t(e,n,r){e.forEach((function(e){var a,i;((null===(a=e.props)||void 0===a?void 0:a.name)===n||"InputGroup"===e.component&&(null===(i=e.props)||void 0===i?void 0:i.id)==="".concat(n,"_group"))&&("Toggle"===e.component?e.props.initialChecked=r:"InputGroup"===e.component?e.props.initialValue=r:e.props.value=r),e.fields&&t(e.fields,n,r)}))},Y=function(t,e){t.forEach((function(t){var n=e[t.id];"object"!==(0,i.Z)(n)||null===n||Array.isArray(n)||Object.entries(n).forEach((function(e){var n=(0,s.Z)(e,2),r=n[0],a=n[1];t.settings&&Array.isArray(t.settings.fields)&&Q(t.settings.fields,r,a)}))}))},tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(t).forEach((function(t){var e=(0,s.Z)(t,2),n=e[0],r=e[1];"object"===(0,i.Z)(r)&&null!==r&&!Array.isArray(r)&&Object.keys(r).length>0&&Object.entries(r).forEach((function(t){var e=(0,s.Z)(t,2),r=e[0],a=e[1];U(n,r,a)}))}))},et=function(){var t=(0,a.Z)(o().mark((function t(){var e,n,r,a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={action:W,security:G,plugin_to_migrate:L},t.next=4,(0,h.Z)((0,m.gB)(B,JSON.stringify((0,z.Z)(["security"],n))),"info");case 4:return t.next=6,(0,f.v_)({endpoint:l(),body:n});case 6:if(r=t.sent,q(!1),null!=r&&null!==(e=r.data)&&void 0!==e&&e.success){t.next=15;break}return t.next=12,(0,h.Z)((0,m.gB)(O,JSON.stringify(null==r?void 0:r.error)),"error");case 12:H(!0),t.next=18;break;case 15:tt(null==r||null===(a=r.data)||void 0===a?void 0:a.data),Y(D,null==r||null===(i=r.data)||void 0===i?void 0:i.data),V();case 18:t.next=26;break;case 20:return t.prev=20,t.t0=t.catch(0),t.next=25,(0,h.Z)((0,m.gB)(O,JSON.stringify(t.t0)),"error");case 25:H(!0);case 26:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(){return t.apply(this,arguments)}}(),nt=I.filter((function(t){return t.activated})).map((function(t){var e="import_data_".concat(t.id),n=w["".concat(t.logo,"Logo")];return{id:e,labelAttributes:{label:t.title},name:"import_data",type:"image",value:t.id,children:d.React.createElement(n,null)}})),rt=S();x((function(){2===T&&rt.current&&rt.current.focus()}),[T]);var at,it={ref:(0,p.P5)(2===T&&J),className:(0,d.classnames)((0,r.Z)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(2),!0)),"aria-hidden":2!==T,"data-test-id":"setup-wizard-screen-02"},st=(null===(c=I.filter((function(t){return t.activated&&t.initialChecked}))[0])||void 0===c?void 0:c.id)||"";return d.React.createElement("div",it,d.React.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},d.React.createElement(d.SimpleBar,{scrollableNodeProps:{ref:rt}},d.React.createElement("div",{className:"gravitysmtp-setup-wizard__content"},d.React.createElement(g.Z,{customClasses:["gravitysmtp-setup-wizard__content-header"],spacing:6},d.React.createElement(v.Z,{content:P,spacing:4,size:"display-sm",tagName:"h2",weight:"medium"}),d.React.createElement(_.Z,{content:j,spacing:8})),d.React.createElement(b.Z,{customClasses:["gravitysmtp-setup-wizard__content-cards","gform-grid--container","gform-grid--wrap","gform-grid--row-spacing-6","gform-grid--col-spacing-6"],data:nt,id:"import_data",inputType:"radio",initialValue:st,onChange:function(t,e){return M(e.target.value)},useWrapper:!0,wrapperAttributes:{customClasses:["gravitysmtp-setup-wizard__content-card","gform-grid--item"]}}),d.React.createElement(y.default,{i18n:E,backButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-02-back-button"}},nextButtonCustomAttributes:{disabled:!L||$,onClick:(at=(0,a.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return q(!0),t.next=3,et();case 3:F();case 4:case"end":return t.stop()}}),t)}))),function(){return at.apply(this,arguments)}),active:$,activeType:"loader",activeText:N,icon:$?"":"arrow-narrow-right",lockSize:!0,customAttributes:{"data-test-id":"setup-wizard-screen-02-next-button"}},skipButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-02-skip-button"}}})))))}},2867:function(t,e,n){n.r(e);var r=n(5720),a=n(5210),i=n(7784),s=n(760),c=n(9805),o=n(6192),u=n(7024),l=n(5271),d=n(5806),p=n(5212),f=n(1047),m=i.React.useEffect,g=i.React.useRef;e.default=function(t){var e=t.data,n=t.i18n,v=n.setup_wizard_integration_title,_=n.setup_wizard_integration_copy_1,b=(n.setup_wizard_integration_copy_2,e.integrations),y=(0,f.default)((function(t){return t.activeStep})),w=(0,f.default)((function(t){return t.isAnimatedIn})),h=(0,f.default)((function(t){return t.integration})),z=(0,f.default)((function(t){return t.integrationSettingsFormData})),k=(0,f.default)((function(t){return t.setIntegration})),x=(0,f.default)((function(t){return t.setActiveStep})),S=(0,f.default)((function(t){return t.setActiveNavBarStep})),R=(0,f.default)((function(t){return t.setActiveNavBarStepNext})),Z=(0,f.default)((function(t){return t.setActiveNavBarStepPrevious})),E=(0,f.default)((function(t){return t.setIntegrationSetupAction})),C=(0,f.default)((function(t){return t.setSetupStatus})),A=b.filter((function(t){var e;return!(null!=t&&null!==(e=t.data)&&void 0!==e&&e.disabled)})).map((function(t){var e="integration_".concat(t.id),n=null!=t&&t.full_logo?p["".concat(t.full_logo,"Logo")]:null;return{customAttributes:{"data-test-id":"setup-wizard-screen-03-integration-".concat(t.id)},id:e,labelAttributes:{label:t.title},name:"integration",type:"image",value:t.id,children:n?i.React.createElement(n,null):null}})),B=g();m((function(){3===y&&B.current&&B.current.focus()}),[y]);var O={ref:(0,s.P5)(3===y&&w),className:(0,i.classnames)((0,r.Z)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(3),!0)),"aria-hidden":3!==y,"data-test-id":"setup-wizard-screen-03"};return i.React.createElement("div",O,i.React.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},i.React.createElement(i.SimpleBar,{scrollableNodeProps:{ref:B}},i.React.createElement("div",{className:"gravitysmtp-setup-wizard__content"},i.React.createElement(c.Z,{customClasses:["gravitysmtp-setup-wizard__content-header"],spacing:6},i.React.createElement(o.Z,{content:v,spacing:4,size:"display-sm",tagName:"h2",weight:"medium"}),i.React.createElement(u.Z,{content:_,spacing:8})),i.React.createElement(l.Z,{customClasses:["gravitysmtp-setup-wizard__content-cards","gform-grid--container","gform-grid--wrap","gform-grid--row-spacing-6","gform-grid--col-spacing-6"],data:A,id:"integrations",inputType:"radio",initialValue:function(){for(var t=0,e=Object.entries(z);t<e.length;t++){var n=(0,a.Z)(e[t],2),r=n[0];if(n[1].enabled)return r}return""}(),onChange:function(t,e){return k(e.target.value)},useWrapper:!0,wrapperAttributes:{customClasses:["gravitysmtp-setup-wizard__content-card","gform-grid--item"]}}),i.React.createElement(d.default,{i18n:n,backButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-03-back-button"},onClick:function(){x(2),Z()}},skipButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-03-skip-button"},onClick:function(){C("skipped"),E("skip"),x(5),S(5)}},nextButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-03-next-button"},disabled:!h,onClick:function(){E("next"),x(4),R()}}})))))}},8114:function(t,e,n){n.r(e);var r=n(5720),a=n(9801),i=n(5210),s=n(9509),c=n.n(s),o=n(9608),u=n.n(o),l=n(7784),d=n(760),p=n(375),f=n(4070),m=n(9805),g=n(6192),v=n(7024),_=n(8957),b=n(4237),y=n(7003),w=n(2077),h=n(9208),z=n(5212),k=n(5806),x=n(1047),S=l.React.useEffect,R=l.React.useRef,Z=l.React.useState,E=["google","microsoft"];e.default=function(t){var e,n,s,o=t.common,C=t.data,A=t.endpoints,B=t.i18n,O=o.i18n,N=(void 0===O?{}:O).debug_messages,P=void 0===N?{}:N,j=P.saving_integration_settings,I=void 0===j?"":j,D=P.saving_integration_settings_error,T=void 0===D?"":D,J=B.setup_wizard_next_button,L=void 0===J?"":J,F=B.setup_wizard_mail_settings_title,H=void 0===F?"":F,M=B.setup_wizard_mail_settings_copy,U=void 0===M?"":M,V=B.setup_wizard_integration_settings_error,W=void 0===V?"":V,G=C.integrations,K=(0,x.default)((function(t){return t.activeStep})),X=(0,x.default)((function(t){return t.isAnimatedIn})),$=(0,x.default)((function(t){return t.integration})),q=(0,x.default)((function(t){return t.integrationSettingsFormData})),Q=(0,x.default)((function(t){return t.setActiveStepNext})),Y=(0,x.default)((function(t){return t.setActiveNavBarStepNext})),tt=(0,x.default)((function(t){return t.setSetupStatus})),et=(0,x.default)((function(t){return t.setIntegrationSettingsFormData})),nt=(0,x.default)((function(t){return t.setSettingsUpdated})),rt=(0,x.default)((function(t){return t.setHasDebugError})),at=R(null),it=Z(!1),st=(0,i.Z)(it,2),ct=st[0],ot=st[1],ut=(0,p.Bl)(G,"id",$),lt=(null==ut||null===(e=ut.settings)||void 0===e?void 0:e.fields)||[],dt=(null==A||null===(n=A.save_connector_settings)||void 0===n?void 0:n.action)||"",pt=(null==A||null===(s=A.save_connector_settings)||void 0===s?void 0:s.nonce)||"",ft=(0,b.Ds)(),mt=function(){var t=(0,a.Z)(c().mark((function t(){var e,n,r,a,i,s,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ot(!0),e=at.current.offsetWidth,at.current.style.width="".concat(e,"px"),n={action:dt,security:pt,connector_type:$,settings:q[$]},t.next=6,(0,w.Z)((0,p.gB)(I,$,JSON.stringify((0,h.Z)(["api_key","server_api_token","password","security"],n))),"info");case 6:return t.prev=6,t.next=9,(0,f.v_)({endpoint:u(),body:n});case 9:if(a=t.sent,ot(!1),null!=a&&null!==(r=a.data)&&void 0!==r&&r.success){t.next=19;break}return o=(0,p.sO)(null==a||null===(i=a.error)||void 0===i||null===(i=i.detail)||void 0===i?void 0:i.data)?JSON.parse(null==a||null===(s=a.error)||void 0===s||null===(s=s.detail)||void 0===s?void 0:s.data):"",t.next=15,(0,w.Z)((0,p.gB)(T,$,JSON.stringify(o)),"error");case 15:rt(!0),ft((null==o?void 0:o.data)||W,"error"),t.next=22;break;case 19:tt("success"),E.includes($)||(Q(),Y()),nt();case 22:t.next=30;break;case 24:return t.prev=24,t.t0=t.catch(6),t.next=29,(0,w.Z)((0,p.gB)(T,$,JSON.stringify(t.t0)),"error");case 29:rt(!0);case 30:at.current&&(at.current.style.width="");case 31:case"end":return t.stop()}}),t,null,[[6,24]])})));return function(){return t.apply(this,arguments)}}(),gt=R();S((function(){4===K&&gt.current&&gt.current.focus()}),[K]);var vt={ref:(0,d.P5)(4===K&&X),className:(0,l.classnames)((0,r.Z)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(4),!0)),"aria-hidden":4!==K,"data-test-id":"setup-wizard-screen-04"},_t=(0,y.Z)(lt,{activeIntegrationSettings:$,context:"wizard",integrationSettingsFormData:q,saveConnectorSettings:mt,savingSettings:ct,Svgs:z,i18n:null==o?void 0:o.i18n,addSnackBarMessage:ft});return l.React.createElement("div",vt,l.React.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},l.React.createElement(l.SimpleBar,{scrollableNodeProps:{ref:gt}},l.React.createElement("div",{className:"gravitysmtp-setup-wizard__content"},l.React.createElement(m.Z,{customClasses:["gravitysmtp-setup-wizard__content-header"],spacing:6},l.React.createElement(g.Z,{content:H,spacing:8,size:"display-sm",tagName:"h2",weight:"medium"}),l.React.createElement(v.Z,{content:(0,p.gB)(U,null==ut?void 0:ut.title),spacing:6,size:"text-lg",weight:"medium"}),l.React.createElement("form",{id:$},l.React.createElement(_.Z,{id:$,fields:_t,setFieldData:function(t,e){return et($,t,e)}}))),l.React.createElement(k.default,{i18n:B,backButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-04-back-button"}},skipButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-04-skip-button"},onClick:function(){tt("skipped"),Q(),Y()}},nextButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-04-next-button"},onClick:mt,active:ct,activeType:"loader",activeText:L,disabled:ct||E.includes($),icon:ct?"":"arrow-narrow-right",lockSize:!0,ref:at}})))))}},5155:function(t,e,n){n.r(e);var r=n(9801),a=n(5720),i=n(5210),s=n(9509),c=n.n(s),o=n(9608),u=n.n(o),l=n(7784),d=n(760),p=n(4070),f=n(375),m=n(9805),g=n(7343),v=n(6192),_=n(7024),b=n(2077),y=n(9208),w=n(5212),h=n(1047),z=l.React.useEffect,k=l.React.useRef,x=l.React.useState;e.default=function(t){var e=t.common,n=t.data,s=t.i18n,o=s.setup_wizard_back_button,S=s.setup_wizard_dashboard_button,R=s.setup_wizard_setup_skipped_title,Z=s.setup_wizard_setup_skipped_copy,E=s.setup_wizard_setup_success_title,C=s.setup_wizard_setup_success_copy,A=s.setup_wizard_setup_failed_title,B=s.setup_wizard_setup_failed_copy,O=s.setup_wizard_activate_integration_button,N=n.integrations,P=e.endpoints,j=(void 0===P?{}:P).save_connector_settings,I=void 0===j?{}:j,D=I.action,T=void 0===D?"":D,J=I.nonce,L=void 0===J?"":J,F=e.i18n,H=(void 0===F?{}:F).debug_messages,M=void 0===H?{}:H,U=M.saving_integration_settings,V=void 0===U?"":U,W=M.saving_integration_settings_error,G=void 0===W?"":W,K=(0,h.default)((function(t){return t.activeStep})),X=(0,h.default)((function(t){return t.isAnimatedIn})),$=(0,h.default)((function(t){return t.integrationSetupAction})),q=(0,h.default)((function(t){return t.setupStatus})),Q=(0,h.default)((function(t){return t.integration})),Y=(0,h.default)((function(t){return t.closeDialog})),tt=(0,h.default)((function(t){return t.setActiveStep})),et=(0,h.default)((function(t){return t.setActiveNavBarStep})),nt=(0,h.default)((function(t){return t.setSettingsUpdated})),rt=(0,h.default)((function(t){return t.setHasDebugError})),at=x(!1),it=(0,i.Z)(at,2),st=it[0],ct=it[1],ot="failed"===q?w.MailFailedBg:w.MailSuccessBg,ut="",lt="",dt="primary-new";switch(q){case"skipped":ut=R,lt=Z;break;case"success":ut=E,lt=C,dt="white";break;case"failed":ut=A,lt=B}var pt=k();z((function(){5===K&&pt.current&&pt.current.focus()}),[K]);var ft={ref:(0,d.P5)(5===K&&X),className:(0,l.classnames)((0,a.Z)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(5),!0)),"aria-hidden":5!==K,"data-test-id":"setup-wizard-screen-05"},mt=N.reduce((function(t,e){return t||e.id!==Q?t:e.title}),""),gt=(0,f.gB)(O,mt),vt=N.filter((function(t){return!(t.data&&t.data.disabled)})).map((function(t){return t.id})),_t=function(){var t=(0,r.Z)(c().mark((function t(e){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={action:T,security:L,connector_type:e,no_validate:!0,settings:{is_primary:!1}},t.next=3,(0,b.Z)((0,f.gB)(V,e,JSON.stringify((0,y.Z)(["security"],n))),"info");case 3:t.prev=3,(0,p.v_)({endpoint:u(),body:n}),t.next=12;break;case 7:return t.prev=7,t.t0=t.catch(3),t.next=12,(0,b.Z)((0,f.gB)(G,e,JSON.stringify(t.t0)),"error");case 12:case"end":return t.stop()}}),t,null,[[3,7]])})));return function(e){return t.apply(this,arguments)}}(),bt=function(){var t=(0,r.Z)(c().mark((function t(){var e,n,r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=vt.filter((function(t){return t!==Q})).map(_t),t.next=3,Promise.all(e);case 3:return n={action:T,security:L,connector_type:Q,settings:{enabled:!0,is_primary:!0}},t.next=6,(0,b.Z)((0,f.gB)(V,Q,JSON.stringify((0,y.Z)(["security"],n))),"info");case 6:return t.prev=6,t.next=9,(0,p.v_)({endpoint:u(),body:n});case 9:if(null!=(a=t.sent)&&null!==(r=a.data)&&void 0!==r&&r.success){t.next=17;break}return t.next=14,(0,b.Z)((0,f.gB)(G,Q,JSON.stringify(null==a?void 0:a.error)),"error");case 14:rt(!0),t.next=18;break;case 17:nt();case 18:t.next=26;break;case 20:return t.prev=20,t.t0=t.catch(6),t.next=25,(0,b.Z)((0,f.gB)(G,Q,JSON.stringify(t.t0)),"error");case 25:rt(!0);case 26:case"end":return t.stop()}}),t,null,[[6,20]])})));return function(){return t.apply(this,arguments)}}();return l.React.createElement("div",ft,l.React.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},l.React.createElement(l.SimpleBar,{scrollableNodeProps:{ref:pt}},l.React.createElement("div",{className:"gravitysmtp-setup-wizard__content"},l.React.createElement(m.Z,{customClasses:["gravitysmtp-setup-wizard__screen-nav-buttons"],display:"flex",spacing:10},l.React.createElement(g.Z,{customAttributes:{"data-test-id":"setup-wizard-screen-05-back-button"},customClasses:["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--back"],icon:"arrow-narrow-left",iconPrefix:"gravitysmtp-admin-icon",label:o,size:"size-height-xl",type:"icon-white",onClick:function(){var t="skip"===$?3:4;tt(t),et(t)}}),l.React.createElement(g.Z,{customAttributes:{"data-test-id":"setup-wizard-screen-05-skip-button"},customClasses:["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--skip"],icon:"arrow-narrow-right",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"trailing",label:S,size:"size-height-xl",type:dt,onClick:function(){return Y()}}),"success"===q&&l.React.createElement(g.Z,{customAttributes:{"data-test-id":"setup-wizard-screen-05-next-button"},active:st,activeType:"loader",customClasses:["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--next"],label:gt,lockSize:!0,size:"size-height-xl",type:"primary-new",onClick:(0,r.Z)(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(!0),t.next=3,bt();case 3:(0,f.X$)({event:"gravitysmtp/page_loader/active",native:!1,data:!0}),Y();case 5:case"end":return t.stop()}}),t)})))})),l.React.createElement(m.Z,{customClasses:["gravitysmtp-setup-wizard__content-header"],spacing:4},l.React.createElement(v.Z,{content:ut,spacing:4,size:"display-sm",tagName:"h2",weight:"medium"}),l.React.createElement(_.Z,{content:lt})),l.React.createElement(m.Z,{customClasses:["gravitysmtp-setup-wizard__content-body"]},l.React.createElement(ot,null))))))}},5806:function(t,e,n){n.r(e);var r=n(107),a=n(5720),i=n(5689),s=n(7784),c=n(9805),o=n(7343),u=n(1047),l=["customClasses"],d=["customClasses"],p=["customClasses"],f=["customClasses"];function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){(0,a.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v=(0,s.React.forwardRef)((function(t,e){var n=t.backButtonCustomAttributes,a=void 0===n?{}:n,m=t.nextButtonCustomAttributes,v=void 0===m?{}:m,_=t.i18n,b=t.showBackButton,y=void 0===b||b,w=t.showSkipButton,h=void 0===w||w,z=t.showNextButton,k=void 0===z||z,x=t.skipButtonCustomAttributes,S=void 0===x?{}:x,R=t.wrapperCustomAttributes,Z=void 0===R?{}:R,E=_.setup_wizard_back_button,C=_.setup_wizard_skip_button,A=_.setup_wizard_next_button,B=(0,u.default)((function(t){return t.setActiveStepNext})),O=(0,u.default)((function(t){return t.setActiveStepPrevious})),N=(0,u.default)((function(t){return t.setActiveNavBarStepNext})),P=(0,u.default)((function(t){return t.setActiveNavBarStepPrevious})),j=Z.customClasses,I=(0,i.Z)(Z,l),D=g({customClasses:s.classnames.apply(void 0,[["gravitysmtp-setup-wizard__screen-nav-buttons"]].concat((0,r.Z)(j||[]))),display:"flex",spacing:[6,0,0],ref:e},I),T=a.customClasses,J=(0,i.Z)(a,d),L=g({customClasses:s.classnames.apply(void 0,[["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--back"]].concat((0,r.Z)(T||[]))),icon:"arrow-narrow-left",iconPrefix:"gravitysmtp-admin-icon",label:E,size:"size-height-xl",type:"icon-white",onClick:function(){O(),P()}},J),F=S.customClasses,H=(0,i.Z)(S,p),M=g({customClasses:s.classnames.apply(void 0,[["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--skip"]].concat((0,r.Z)(F||[]))),icon:"arrow-narrow-right",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"trailing",label:C,size:"size-height-xl",type:"white",onClick:function(){B(),N()}},H),U=v.customClasses,V=(0,i.Z)(v,f),W=g({customClasses:s.classnames.apply(void 0,[["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--next"]].concat((0,r.Z)(U||[]))),icon:"arrow-narrow-right",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"trailing",label:A,size:"size-height-xl",onClick:function(){B(),N()}},V);return s.React.createElement(c.Z,D,y&&s.React.createElement(o.Z,L),h&&s.React.createElement(o.Z,M),k&&s.React.createElement(o.Z,W))}));e.default=v},1868:function(t,e,n){n.r(e);var r=n(9801),a=n(5210),i=n(9509),s=n.n(i),c=n(9608),o=n.n(c),u=n(7784),l=n(4070),d=n(375),p=n(4237),f=n(7343),m=n(1480),g=n(7980),v=n(9805),_=n(4427),b=n(1057),y=n(2142),w=n(2867),h=n(8114),z=n(5155),k=n(1047),x=n(2077),S=u.React.useState,R=u.React.useEffect,Z=u.React.useRef;e.default=function(t){var e,n,i,c,E,C,A=S(!0),B=(0,a.Z)(A,2),O=B[0],N=B[1],P=(0,k.default)((function(t){return t.innerDialogOpen})),j=(0,k.default)((function(t){return t.activeStep})),I=(0,k.default)((function(t){return t.activeNavBarStep})),D=(0,k.default)((function(t){return t.isOpen})),T=(0,k.default)((function(t){return t.settingsUpdated})),J=(0,k.default)((function(t){return t.shouldRedirect})),L=(0,k.default)((function(t){return t.hasDebugError})),F=(0,k.default)((function(t){return t.closeDialog})),H=(0,k.default)((function(t){return t.openDialog})),M=(0,k.default)((function(t){return t.setIsAnimatedIn})),U=(0,d.xK)(),V="gravitysmtp-settings"===(null==U?void 0:U.page)&&"integrations"===(null==U?void 0:U.tab),W=Z(),G=t.data,K=G.admin_url,X=G.integrations_url,$=G.license_key_is_valid,q=G.should_display,Q=t.i18n.debug_messages,Y=(void 0===Q?{}:Q).starting_first_run,tt=t.common,et=tt.data,nt=void 0===et?{}:et,rt=tt.endpoints,at=void 0===rt?{}:rt,it=(null==at||null===(e=at.save_plugin_settings)||void 0===e?void 0:e.action)||"",st=(null==at||null===(n=at.save_plugin_settings)||void 0===n?void 0:n.nonce)||"",ct=(null==at||null===(i=at.delete_debug_logs)||void 0===i?void 0:i.action)||"",ot=(null==at||null===(c=at.delete_debug_logs)||void 0===c?void 0:c.nonce)||"",ut={closeOnMaskClick:!1,closeButtonTitle:t.i18n.setup_wizard_close_button,customCloseButtonClasses:["gravitysmtp-setup-wizard--exit-button"],customCloseButtonLabelAttributes:{className:(0,u.classnames)({"gform-button__icon":!0,"gravitysmtp-admin-icon":!0,"gravitysmtp-admin-icon--x":!0})},customWrapperClasses:["gravitysmtp-setup-wizard","gravitysmtp-setup-wizard--step-".concat(j),"gravitysmtp-setup-wizard--inner-dialog-".concat(P)],customMaskClasses:[!O&&"gravitysmtp-setup-wizard--not-fullscreen"],id:"gravitysmtp-setup-wizard",isOpen:D,lockBody:!0,onOpen:(C=(0,r.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(q){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,nt.debug_log_enabled=!0,t.next=6,(0,l.v_)({endpoint:o(),body:{action:it,security:st,key:"debug_log_enabled",value:!0}});case 6:(0,x.Z)((0,d.gB)(Y,JSON.stringify({activeStep:j,licenseKeyIsValid:$})),"info"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),function(){return C.apply(this,arguments)}),onOpenAfterAnimation:function(){M(!0)},onClose:(E=(0,r.Z)(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=new URL(window.location.href)).searchParams.delete("setup-wizard-page"),history.pushState({},"",e.toString()),L||!q){t.next=16;break}return t.prev=5,nt.debug_log_enabled=!1,t.next=9,(0,l.v_)({endpoint:o(),body:{action:it,security:st,key:"debug_log_enabled",value:!1}});case 9:return t.next=11,(0,l.v_)({endpoint:o(),body:{action:ct,security:ot,all_logs:"1"}});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5);case 16:if(!(W.current&&V&&T)){t.next=19;break}return window.location.reload(),t.abrupt("return");case 19:J||(document.body.classList.remove("gravitysmtp-apps--hidden"),!V&&W.current&&(window.location.href=X));case 20:case"end":return t.stop()}}),t,null,[[5,13]])}))),function(){return E.apply(this,arguments)}),onCloseAfterAnimation:function(){W.current&&V&&T||(J||V)&&(F(),M(!1),J&&(window.location.href=K))},padContent:!1,position:O?"fixed":"absolute",mode:"container",zIndex:100001};return R((function(){var t=function(){H()};return document.addEventListener("gravitysmtp/setup_wizard/open",t),function(){document.removeEventListener("gravitysmtp/setup_wizard/open",t)}}),[]),R((function(){D&&document.body.classList.add("gravitysmtp-setup-wizard--open")}),[D]),R((function(){W.current||(W.current=!0)}),[]),u.React.createElement(p.wT,{defaultSettings:{errorIconAttributes:{icon:"exclamation-simple",iconPrefix:"gravitysmtp-admin-icon"},successIconAttributes:{icon:"correct",iconPrefix:"gravitysmtp-admin-icon"}}},u.React.createElement(m.Z,ut,u.React.createElement(g.Z,{customClasses:["gravitysmtp-setup-wizard__nav-bar"]},u.React.createElement(_.Z,{activeStep:I,customClasses:["gravitysmtp-setup-wizard__steps"],icon:"check",iconPrefix:"gravitysmtp-admin-icon",numSteps:5,spacing:[8,0,0]})),u.React.createElement(v.Z,{x:1030,customClasses:["gravitysmtp-setup-wizard__content-mask"],setDisplay:!1}),!P&&u.React.createElement(f.Z,{ariaLabel:"Toggle Fullscreen",circular:!0,customClasses:["gravitysmtp-setup-wizard__fullscreen-toggle"],icon:O?"contract":"expand",iconPrefix:"gravitysmtp-admin-icon",onClick:function(){N(!O)},type:"white"}),u.React.createElement(b.default,t),u.React.createElement(y.default,t),u.React.createElement(w.default,t),u.React.createElement(h.default,t),u.React.createElement(z.default,t)))}},7003:function(t,e,n){var r=n(9801),a=n(5720),i=n(9509),s=n.n(i),c=n(7784),o=n(5489),u=n(8731),l=n(6901),d=n(6493),p=n(375),f=n(760);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){(0,a.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!["microsoft","google","generic"].includes(e.activeIntegrationSettings))return t;var n=e.integrationSettingsFormData[e.activeIntegrationSettings],a=t;return["microsoft","google"].includes(e.activeIntegrationSettings)?a=t.map((function(t){if(!["BrandedButton","BrandedLink","CopyInput","LinkedHelpTextInput"].includes(t.component)||!t.external)return t;var a,i=e.i18n.snackbar_url_copied,m=void 0===i?"":i,v=e.Svgs[t.props.Svg],_=null,b={};switch(t.component){case"BrandedButton":_=o.Z,b=g(g({},t.props),{},{disabled:!(null!=n&&n.client_id&&null!=n&&n.client_secret)||e.savingSettings,onClick:(a=(0,r.Z)(s().mark((function t(r){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,e.saveConnectorSettings();case 3:window.location.href="".concat(n.oauth_url,"?client_id=").concat(n.client_id).concat(n.oauth_params);case 4:case"end":return t.stop()}}),t)}))),function(t){return a.apply(this,arguments)}),Svg:c.React.createElement(v,null)});break;case"BrandedLink":_=u.Z,b=g(g({},t.props),{},{href:"wizard"===e.context?t.wizardHref:t.props.href,Svg:c.React.createElement(v,null)});break;case"CopyInput":_=d.Z,b=g(g({},t.props),{},{actionButtonAttributes:g(g({},t.props.actionButtonAttributes),{},{onClick:function(t,n){e.addSnackBarMessage(m),(0,p.BR)(n)}})});break;case"LinkedHelpTextInput":_=d.Z,b=g(g({},t.props),{},{helpTextAttributes:g(g({},t.props.helpTextAttributes),{},{content:c.React.createElement(f.ji,{openingSymbol:"{{",closingSymbol:"}}",text:t.props.helpTextAttributes.content,tokens:t.links.map((function(t){return{component:l.Z,key:t.key,props:t.props}}))})})})}return g(g({},t),{},{component:_,props:b})})):"generic"===e.activeIntegrationSettings&&(a=t.map((function(t){var e;if("Input"!==t.component||!["username","password"].includes(null==t||null===(e=t.props)||void 0===e?void 0:e.name))return t;var r=g(g({},t.props),{},{disabled:!n.auth});return g(g({},t),{},{props:r})}))),a}}}]);