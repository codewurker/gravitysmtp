"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[1707,4832,4854,6558],{24679:function(t,e,n){n.r(e);var r=n(88856),i=n(90455),o=n(8140),a=n(78564),u=n.n(a),s=n(27122),c=n.n(s),l=n(97867),p=n(8173),d=n(71376),v=n(60177),f=n(30242),g=n(5529),m=n(66598),b=n(55899),A=n(84860),y=n(28099),_=n(83707),S=n(93313),h=n(18698),w=n(65224),k=n(57290),O=l.React.useEffect,x=l.React.useRef,z=l.React.useState,P=["google","microsoft"];e.default=function(t){var e,n,a,s=t.common,j=t.data,C=t.endpoints,B=t.i18n,D=s.i18n,E=(void 0===D?{}:D).debug_messages,N=void 0===E?{}:E,F=N.saving_integration_settings,R=void 0===F?"":F,I=N.saving_integration_settings_error,L=void 0===I?"":I,M=B.setup_wizard_next_button,T=void 0===M?"":M,H=B.setup_wizard_mail_settings_title,G=void 0===H?"":H,J=B.setup_wizard_mail_settings_copy,U=void 0===J?"":J,W=B.setup_wizard_integration_settings_error,X=void 0===W?"":W,Z=j.integrations,q=(0,k.default)((function(t){return t.activeStep})),K=(0,k.default)((function(t){return t.isAnimatedIn})),Q=(0,k.default)((function(t){return t.integration})),V=(0,k.default)((function(t){return t.integrationSettingsFormData})),Y=(0,k.default)((function(t){return t.setActiveStepNext})),$=(0,k.default)((function(t){return t.setActiveNavBarStepNext})),tt=(0,k.default)((function(t){return t.setSetupStatus})),et=(0,k.default)((function(t){return t.setIntegrationSettingsFormData})),nt=(0,k.default)((function(t){return t.setSettingsUpdated})),rt=(0,k.default)((function(t){return t.setHasDebugError})),it=x(null),ot=z(!1),at=(0,o.A)(ot,2),ut=at[0],st=at[1],ct=(0,d.uN)(Z,"id",Q),lt=(null==ct||null===(e=ct.settings)||void 0===e?void 0:e.fields)||[],pt=(null==C||null===(n=C.save_connector_settings)||void 0===n?void 0:n.action)||"",dt=(null==C||null===(a=C.save_connector_settings)||void 0===a?void 0:a.nonce)||"",vt=(0,A.dh)(),ft=function(){var t=(0,i.A)(u().mark((function t(){var e,n,r,i,o,a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return st(!0),e=it.current.offsetWidth,it.current.style.width="".concat(e,"px"),n={action:pt,security:dt,connector_type:Q,settings:V[Q]},t.next=6,(0,_.A)((0,d.nv)(R,Q,JSON.stringify((0,S.A)(["api_key","server_api_token","password","security"],n))),"info");case 6:return t.prev=6,t.next=9,(0,v.bE)({endpoint:c(),body:n});case 9:if(i=t.sent,st(!1),null!=i&&null!==(r=i.data)&&void 0!==r&&r.success){t.next=19;break}return s=(0,d.Fh)(null==i||null===(o=i.error)||void 0===o||null===(o=o.detail)||void 0===o?void 0:o.data)?JSON.parse(null==i||null===(a=i.error)||void 0===a||null===(a=a.detail)||void 0===a?void 0:a.data):"",t.next=15,(0,_.A)((0,d.nv)(L,Q,JSON.stringify(s)),"error");case 15:rt(!0),vt((null==s?void 0:s.data)||X,"error"),t.next=22;break;case 19:tt("success"),P.includes(Q)||(Y(),$()),nt();case 22:t.next=30;break;case 24:return t.prev=24,t.t0=t.catch(6),t.next=29,(0,_.A)((0,d.nv)(L,Q,JSON.stringify(t.t0)),"error");case 29:rt(!0);case 30:it.current&&(it.current.style.width="");case 31:case"end":return t.stop()}}),t,null,[[6,24]])})));return function(){return t.apply(this,arguments)}}(),gt=x();O((function(){4===q&&gt.current&&gt.current.focus()}),[q]);var mt={ref:(0,p.rM)(4===q&&K),className:(0,l.classnames)((0,r.A)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(4),!0)),"aria-hidden":4!==q,"data-test-id":"setup-wizard-screen-04"},bt=(0,y.A)(lt,{activeIntegrationSettings:Q,context:"wizard",integrationSettingsFormData:V,saveConnectorSettings:ft,savingSettings:ut,Svgs:h,i18n:null==s?void 0:s.i18n,addSnackBarMessage:vt});return l.React.createElement("div",mt,l.React.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},l.React.createElement(l.SimpleBar,{scrollableNodeProps:{ref:gt}},l.React.createElement("div",{className:"gravitysmtp-setup-wizard__content"},l.React.createElement(f.A,{customClasses:["gravitysmtp-setup-wizard__content-header"],spacing:6},l.React.createElement(g.A,{content:G,spacing:8,size:"display-sm",tagName:"h2",weight:"medium"}),l.React.createElement(m.A,{content:(0,d.nv)(U,null==ct?void 0:ct.title),spacing:6,size:"text-lg",weight:"medium"}),l.React.createElement("form",{id:Q},l.React.createElement(b.A,{id:Q,fields:bt,setFieldData:function(t,e){return et(Q,t,e)}}))),l.React.createElement(w.default,{i18n:B,backButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-04-back-button"}},skipButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-04-skip-button"},onClick:function(){tt("skipped"),Y(),$()}},nextButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-04-next-button"},onClick:ft,active:ut,activeType:"loader",activeText:T,disabled:ut||P.includes(Q),icon:ut?"":"arrow-narrow-right",lockSize:!0,ref:it}})))))}},65224:function(t,e,n){n.r(e);var r=n(18134),i=n(88856),o=n(58449),a=n(97867),u=n(30242),s=n(80509),c=n(57290),l=["customClasses"],p=["customClasses"],d=["customClasses"],v=["customClasses"];function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){(0,i.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=(0,a.React.forwardRef)((function(t,e){var n=t.backButtonCustomAttributes,i=void 0===n?{}:n,f=t.nextButtonCustomAttributes,m=void 0===f?{}:f,b=t.i18n,A=t.showBackButton,y=void 0===A||A,_=t.showSkipButton,S=void 0===_||_,h=t.showNextButton,w=void 0===h||h,k=t.skipButtonCustomAttributes,O=void 0===k?{}:k,x=t.wrapperCustomAttributes,z=void 0===x?{}:x,P=b.setup_wizard_back_button,j=b.setup_wizard_skip_button,C=b.setup_wizard_next_button,B=(0,c.default)((function(t){return t.setActiveStepNext})),D=(0,c.default)((function(t){return t.setActiveStepPrevious})),E=(0,c.default)((function(t){return t.setActiveNavBarStepNext})),N=(0,c.default)((function(t){return t.setActiveNavBarStepPrevious})),F=z.customClasses,R=(0,o.A)(z,l),I=g({customClasses:a.classnames.apply(void 0,[["gravitysmtp-setup-wizard__screen-nav-buttons"]].concat((0,r.A)(F||[]))),display:"flex",spacing:[6,0,0],ref:e},R),L=i.customClasses,M=(0,o.A)(i,p),T=g({customClasses:a.classnames.apply(void 0,[["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--back"]].concat((0,r.A)(L||[]))),icon:"arrow-narrow-left",iconPrefix:"gravitysmtp-admin-icon",label:P,size:"size-height-xl",type:"icon-white",onClick:function(){D(),N()}},M),H=O.customClasses,G=(0,o.A)(O,d),J=g({customClasses:a.classnames.apply(void 0,[["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--skip"]].concat((0,r.A)(H||[]))),icon:"arrow-narrow-right",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"trailing",label:j,size:"size-height-xl",type:"white",onClick:function(){B(),E()}},G),U=m.customClasses,W=(0,o.A)(m,v),X=g({customClasses:a.classnames.apply(void 0,[["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--next"]].concat((0,r.A)(U||[]))),icon:"arrow-narrow-right",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"trailing",label:C,size:"size-height-xl",onClick:function(){B(),E()}},W);return a.React.createElement(u.A,I,y&&a.React.createElement(s.A,T),S&&a.React.createElement(s.A,J),w&&a.React.createElement(s.A,X))}));e.default=m},18698:function(t,e,n){n.r(e),n.d(e,{AmazonAWSFullLogo:function(){return r.A},BrevoFullLogo:function(){return i.A},CustomSMTPFullLogo:function(){return o.A},GoogleAltLogo:function(){return a.A},GoogleFullLogo:function(){return u.A},GravityFormsStackedLogo:function(){return s.A},GravitySMTPFullLogo:function(){return c.A},MailFailedBg:function(){return l.A},MailSuccessBg:function(){return d.A},MailchimpFullLogo:function(){return y.A},MailgunFullLogo:function(){return p.A},MicrosoftAltLogo:function(){return v.A},MicrosoftFullLogo:function(){return f.A},PHPFullLogo:function(){return g.A},PostmarkFullLogo:function(){return m.A},SendGridFullLogo:function(){return b.A},WPMailSMTPFullLogo:function(){return A.A},ZohoAltLogo:function(){return _.A},ZohoFullLogo:function(){return S.A}});var r=n(61294),i=n(93015),o=n(59417),a=n(63660),u=n(57438),s=n(79124),c=n(10997),l=n(91570),p=n(67652),d=n(89564),v=n(40783),f=n(51511),g=n(69703),m=n(10162),b=n(45279),A=n(33653),y=n(41921),_=n(64158),S=n(65911)},57290:function(t,e,n){n.r(e);var r,i,o,a,u,s=n(88856),c=n(97867),l=n(8173),p=n(71376),d=n(40450),v=n.n(d);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){(0,s.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m,b,A=(null===(r=(0,p.zj)(v(),"gravitysmtp_admin_config"))||void 0===r||null===(r=r.components)||void 0===r?void 0:r.setup_wizard)||{},y=(null===(o=((null==A||null===(i=A.data)||void 0===i?void 0:i.import_data)||[]).filter((function(t){return t.activated&&t.initialChecked}))[0])||void 0===o?void 0:o.id)||"",_="",S=g(g({hasDebugError:!1,isAnimatedIn:!1,integrationSetupAction:"skip",setupStatus:"skipped",settingsUpdated:!1,shouldRedirect:(null==A||null===(a=A.data)||void 0===a?void 0:a.should_display)||!1,integrationSettingsFormData:(b={},null==A||null===(m=A.data)||void 0===m||null===(m=m.integrations)||void 0===m||m.forEach((function(t){var e;b[t.id]=(null==t?void 0:t.data)||{},null!==(e=b[t.id])&&void 0!==e&&e.enabled&&(_=t.id)})),b)},(null===(u=(0,p.zj)(v(),"gravitysmtp_admin_config"))||void 0===u||null===(u=u.components)||void 0===u||null===(u=u.setup_wizard)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.defaults)||{}),{},{integration:_,importPlugin:y}),h=(0,l.vt)(S,(function(t){return{closeDialog:function(){return t((function(){return{isOpen:!1}}))},openDialog:function(){return t((function(){return{isOpen:!0}}))},setActiveStepNext:function(){return t((function(t){return{activeStep:t.activeStep+1}}))},setActiveStepPrevious:function(){return t((function(t){return{activeStep:t.activeStep-1}}))},setActiveStep:function(e){return t((function(){return{activeStep:e}}))},setActiveNavBarStepNext:function(){return t((function(t){return{activeNavBarStep:t.activeNavBarStep+1}}))},setActiveNavBarStepPrevious:function(){return t((function(t){return{activeNavBarStep:t.activeNavBarStep-1}}))},setActiveNavBarStep:function(e){return t((function(){return{activeNavBarStep:e}}))},setHasDebugError:function(e){return t((function(){return{hasDebugError:e}}))},setImportPlugin:function(e){return t((function(){return{importPlugin:e}}))},setIntegration:function(e){return t((function(){return{integration:e}}))},setIsAnimatedIn:function(e){return t((function(){return{isAnimatedIn:e}}))},setIntegrationSetupAction:function(e){return t((function(){return{integrationSetupAction:e}}))},setSetupStatus:function(e){return t((function(){return{setupStatus:e}}))},setSettingsUpdated:function(){return t((function(){return{settingsUpdated:!0}}))},setShouldRedirect:function(e){return t((function(){return{shouldRedirect:e}}))},setInnerDialogOpen:function(e){return t((function(){return{innerDialogOpen:e}}))},setIntegrationSettingsFormData:function(e,n,r){return t((0,c.immer)((function(t){t.integrationSettingsFormData[e]||(t.integrationSettingsFormData[e]={}),t.integrationSettingsFormData[e][n]=r})))}}}));e.default=h},28099:function(t,e,n){var r=n(90455),i=n(88856),o=n(78564),a=n.n(o),u=n(97867),s=n(63662),c=n(12094),l=n(87029),p=n(25787),d=n(66598),v=n(71376),f=n(8173),g=n(27764);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){(0,i.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var A=function(t,e){return t.map((function(t){var n,r;if(null==t||null===(n=t.props)||void 0===n||!n.name)return t;var i="".concat(e,"_").concat(t.props.name),o=(null==t||null===(r=t.props)||void 0===r?void 0:r.labelAttributes)||{};return b(b({},t),{},{props:b(b({},t.props),{},{labelAttributes:b(b({},o),(0,g.A)(i))})})}))},y=function(t,e){var n=e.integrationSettingsFormData[e.activeIntegrationSettings],r=null==n?void 0:n.from_email;return t.map((function(t){var e;if("force_from_email"!==(null==t||null===(e=t.props)||void 0===e?void 0:e.name))return t;var i=b(b({},t),{},{props:b(b({},t.props),{},{externalControl:!0,externalChecked:null==n?void 0:n.force_from_email})});return r||(i.props.disabled=!0),i}))},_=function(t,e){return t.map((function(t,n){var r;if(0!==n||"Alert"!==(null==t?void 0:t.component)||"google-alias-notice"!==(null==t||null===(r=t.props)||void 0===r?void 0:r.id))return t;var i=S((null==t?void 0:t.fields)||[],e);return b(b({},t),{},{fields:i})}))},S=function(t,e){var n=e.integrationSettingsFormData[e.activeIntegrationSettings],i=t.map((function(t){if(!["BrandedButton","BrandedLink","CopyInput","LinkedHelpTextInput","LinkedText"].includes(t.component)||!t.external)return t;var i,o=e.i18n.snackbar_url_copied,g=void 0===o?"":o,m=e.Svgs[t.props.Svg],A=null,y={};switch(t.component){case"BrandedButton":A=s.A,y=b(b({},t.props),{},{disabled:!(null!=n&&n.client_id&&null!=n&&n.client_secret)||e.savingSettings,onClick:(i=(0,r.A)(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,e.saveConnectorSettings();case 3:window.location.href="".concat(n.oauth_url,"?client_id=").concat(n.client_id).concat(n.oauth_params);case 4:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)}),Svg:u.React.createElement(m,null)});break;case"BrandedLink":A=c.A,y=b(b({},t.props),{},{href:"wizard"===e.context?t.wizardHref:t.props.href,Svg:u.React.createElement(m,null)});break;case"CopyInput":A=p.A,y=b(b({},t.props),{},{actionButtonAttributes:b(b({},t.props.actionButtonAttributes),{},{onClick:function(t,n){e.addSnackBarMessage(g),(0,v.Ns)(n)}})});break;case"LinkedHelpTextInput":A=p.A,y=b(b({},t.props),{},{helpTextAttributes:b(b({},t.props.helpTextAttributes),{},{content:u.React.createElement(f.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:t.props.helpTextAttributes.content,tokens:t.links.map((function(t){return{component:l.A,key:t.key,props:t.props}}))})})});break;case"LinkedText":A=d.A,y=b(b({},t.props),{},{content:u.React.createElement(f.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:t.props.content,tokens:t.links.map((function(t){return{component:l.A,key:t.key,props:t.props}}))})})}return b(b({},t),{},{component:A,props:y})}));return i},h=function(t,e){var n=e.integrationSettingsFormData[e.activeIntegrationSettings];return t.map((function(t){var e;if("Input"!==t.component||!["username","password"].includes(null==t||null===(e=t.props)||void 0===e?void 0:e.name))return t;var r=b(b({},t.props),{},{disabled:!n.auth});return b(b({},t),{},{props:r})}))},w=function(t){return t.map((function(t){var e,n=((null==t||null===(e=t.props)||void 0===e||null===(e=e.labelAttributes)||void 0===e?void 0:e.label)||"").toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),r=b(b({},t.props),{},{customAttributes:b(b({},t.props.customAttributes),{},{"data-test-id":"form-field-".concat(n)})});return b(b({},t),{},{props:r})}))};e.A=function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t),n=w(e),r=A(n,t.activeIntegrationSettings);if(!["microsoft","google","generic","amazon","zoho"].includes(t.activeIntegrationSettings))return r;var i=r;return"google"===t.activeIntegrationSettings&&(i=_(i,t)),["microsoft","google","amazon","zoho"].includes(t.activeIntegrationSettings)?i=S(i,t):"generic"===t.activeIntegrationSettings&&(i=h(i,t)),i}},83707:function(t,e,n){n.d(e,{A:function(){return v}});var r,i=n(90455),o=n(78564),a=n.n(o),u=n(27122),s=n.n(u),c=n(40450),l=n.n(c),p=n(60177),d=(null===(r=(0,n(71376).zj)(l(),"gravitysmtp_admin_config"))||void 0===r?void 0:r.common)||{};function v(){return f.apply(this,arguments)}function f(){return f=(0,i.A)(a().mark((function t(){var e,n,r,i,o,u,c,l,v,f,g=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=g.length>0&&void 0!==g[0]?g[0]:"",i=g.length>1&&void 0!==g[1]?g[1]:"debug",o=d.data,u=void 0===o?{}:o,c=d.endpoints,v=(null==(l=void 0===c?{}:c)||null===(e=l.log_debug_item)||void 0===e?void 0:e.action)||"",f=(null==l||null===(n=l.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=u&&u.debug_log_enabled&&v&&f&&r){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,(0,p.bE)({endpoint:s(),body:{action:v,security:f,message:r,priority:i}}).catch((function(t){}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}},93313:function(t,e,n){var r=n(52888),i=n(8140);e.A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",n=function(o){return Object.entries(o).reduce((function(o,a){var u=(0,i.A)(a,2),s=u[0],c=u[1];return"object"===(0,r.A)(c)&&null!==c?o[s]=n(c):t.includes(s)?o[s]=null===c?null:e.repeat(c.length):o[s]=c,o}),Array.isArray(o)?[]:{})};return n(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},27764:function(t,e,n){var r,i=n(40450),o=n.n(i),a=(null===(r=(0,n(71376).zj)(o(),"gravitysmtp_admin_config"))||void 0===r?void 0:r.common)||{};e.A=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{iconPrefix:"gravitysmtp-admin-icon",locked:(null==a||null===(t=a.data)||void 0===t||null===(t=t.locked_settings)||void 0===t?void 0:t.includes(n))||r,lockedMessage:i||(null==a||null===(e=a.i18n)||void 0===e?void 0:e.setting_locked)||""}}}}]);