"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[2396,9773],{4068:function(e,t,n){n.r(t);var r=n(6796),a=n(5720),o=n(9801),i=n(5210),u=n(9509),l=n.n(u),s=n(7784),c=n(4070),d=n(583),g=n(4237),p=n(6192),v=n(31),b=n(2472),_=n(8424),f=n(2077),m=n(9208),h=n(3199);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var w=s.React.forwardRef,D=s.React.useEffect,P=s.React.useRef,R=s.React.useState,x=s.ReactRouter.useLocation,O=s.ReactRouter.useNavigate,S=s.ReactRouter.useSearchParams,T="log_page",j="search_term",Z={},k=new URLSearchParams(window.location.search),L=k.get(T)||"1",A=k.get(j)||"",C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=void 0===t?1:t,r=e.searchTerm,a=void 0===r?"":r,o="page-".concat(n);return a&&(o+="-".concat(a)),o},I=w((function(e,t){var n,u=e.customAttributes,w=void 0===u?{}:u,k=e.customClasses,I=void 0===k?[]:k,E=e.common,N=void 0===E?{}:E,G=e.data,B=void 0===G?{}:G,J=e.i18n,M=void 0===J?{}:J,U=N.endpoints,H=(void 0===U?{}:U).debug_log_page,q=H.action,z=void 0===q?"":q,F=H.nonce,K=void 0===F?"":F,Q=M||{},V=Q.debug_log,W=void 0===V?{}:V,X=W.top_heading,Y=void 0===X?"":X,$=W.data_grid,ee=void 0===$?{}:$,te=ee.top_heading,ne=void 0===te?"":te,re=ee.clear_search_aria_label,ae=void 0===re?"":re,oe=ee.empty_title,ie=void 0===oe?"":oe,ue=ee.empty_message,le=void 0===ue?"":ue,se=ee.grid_controls_search_button_label,ce=void 0===se?"":se,de=ee.grid_controls_search_placeholder,ge=void 0===de?"":de,pe=ee.pagination_next,ve=void 0===pe?"":pe,be=ee.pagination_prev,_e=void 0===be?"":be,fe=ee.pagination_next_aria_label,me=void 0===fe?"":fe,he=ee.pagination_prev_aria_label,ye=void 0===he?"":he,we=ee.search_no_results_title,De=void 0===we?"":we,Pe=ee.search_no_results_message,Re=void 0===Pe?"":Pe,xe=W.snackbar_debug_log_error,Oe=void 0===xe?"":xe,Se=Q.debug_messages,Te=void 0===Se?{}:Se,je=Te.fetching_debug_log_page,Ze=void 0===je?"":je,ke=Te.fetching_debug_log_page_error,Le=void 0===ke?"":ke,Ae=(null==B?void 0:B.debug_log)||{},Ce=Ae.ajax_grid_pagination_url,Ie=void 0===Ce?"":Ce,Ee=Ae.data_grid,Ne=void 0===Ee?{}:Ee,Ge=Ne.columns,Be=void 0===Ge?[]:Ge,Je=Ne.column_style_props,Me=void 0===Je?{}:Je,Ue=Ae.initial_load_timestamp,He=void 0===Ue?"":Ue,qe=Ae.initial_row_count,ze=void 0===qe?0:qe,Fe=Ae.rows_per_page,Ke=void 0===Fe?7:Fe,Qe=(null==B?void 0:B.caps)||{},Ve=x(),We=O(),Xe=(0,g.Ds)(),Ye=R(ze),$e=(0,i.Z)(Ye,2),et=$e[0],tt=$e[1],nt=S(),rt=(0,i.Z)(nt,2),at=rt[0],ot=(rt[1],(0,h.default)((function(e){return e.debugLogDataGridRows}))),it=(0,h.default)((function(e){return e.setDebugLogDataGridRows})),ut=(0,h.default)((function(e){return e.setDebugDetailsDialogData})),lt=(0,h.default)((function(e){return e.setDebugDetailsDialogOpen})),st=P(),ct=P("");D((function(){if(st.current){var e=at.get(T)||"1",t=at.get(j)||"";vt({nextSelectedPage:parseInt(e,10)-1,searchTerm:t},!0)}else st.current=!0}),[at]),D((function(){return window.addEventListener("popstate",gt),function(){window.removeEventListener("popstate",gt)}}),[]);var dt=C({page:L,searchTerm:A});Z[dt]={},Z[dt].rows=(null==B||null===(n=B.debug_log)||void 0===n||null===(n=n.data_grid)||void 0===n?void 0:n.data)||[],Z[dt].newRowCount=ze;var gt=function(){ct.current=""},pt=function(e){var t=e.page,n=e.searchTerm,r=void 0===n?"":n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=new URLSearchParams(Ve.search);o.set(T,t),r?o.set(j,r):o.delete(j),We("?".concat(o.toString()),{replace:a})},vt=function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,a,o,i,u,s,g,p,v,b=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>1&&void 0!==b[1]&&b[1],r=C({page:t.nextSelectedPage+1}),t.searchTerm||!Z[r]){e.next=8;break}return it(Z[r].rows),tt(parseInt(Z[r].newRowCount,10)),pt({page:t.nextSelectedPage+1},n),ct.current="",e.abrupt("return",t.nextSelectedPage);case 8:if(a={action:z,security:K,max_date:He,requested_page:t.nextSelectedPage+1,search_term:t.searchTerm||""},(o=JSON.stringify(a))!==ct.current){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,(0,f.Z)((0,d.gB)(Ze,JSON.stringify((0,m.Z)(["security"],a))),"info");case 14:return e.prev=14,e.next=17,(0,c.v_)({endpoint:Ie,body:a});case 17:if(g=e.sent,p=(null==g||null===(i=g.data)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.rows)||[],v=(null==g||null===(u=g.data)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.total)||"0",null==g||null===(s=g.data)||void 0===s||!s.success){e.next=27;break}return t.searchTerm||(Z[r]={rows:p,newRowCount:v}),it(p),tt(parseInt(v,10)),pt({page:t.nextSelectedPage+1,searchTerm:t.searchTerm||""},n),ct.current=o,e.abrupt("return",t.nextSelectedPage);case 27:Xe(Oe,"error"),e.next=35;break;case 30:return e.prev=30,e.t0=e.catch(14),Xe(e.t0,"error"),e.next=35,(0,f.Z)((0,d.gB)(Le,JSON.stringify(e.t0)),"error");case 35:case"end":return e.stop()}}),e,null,[[14,30]])})));return function(t){return e.apply(this,arguments)}}(),bt=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,s.classnames)({"gravitysmtp-tools-app__debug-log":!0},I)},w),_t=ot.length>0,ft={customClasses:["gravitysmtp-tools-app__debug-log-table"],id:"gravitysmtp-tools-app__debug-log-table",columns:Be,columnStyleProps:Me,data:ot,dataPerPage:_t?Ke:7,EmptyImage:v.Z,handleGridClicks:function(e){if("view"===e.action){var t,n,r,a,o=(null==e||null===(t=e.data)||void 0===t?void 0:t.id)||0,i=ot.filter((function(e){var t;return(null==e||null===(t=e.id)||void 0===t||null===(t=t.props)||void 0===t?void 0:t.content)===o}))[0];if(!i)return;ut({date:(null==i||null===(n=i.date)||void 0===n||null===(n=n.props)||void 0===n?void 0:n.content)||"",event:(null==i||null===(r=i.status)||void 0===r?void 0:r.props)||{},log:(null==i||null===(a=i.log)||void 0===a||null===(a=a.props)||void 0===a?void 0:a.label)||""}),lt(!0)}},hasBulkActions:!1,hasFilters:!1,hasSearch:!0,i18n:{emptyMessageI18n:le,emptyTitleI18n:ie,gridHeadingI18n:ne,searchNoResultsTitleI18n:De,searchNoResultsMessageI18n:Re},maintainHeight:!_t,page:parseInt(at.get(T)||"1",10)-1,paginationAttributes:{nextLabel:ve,nextAriaLabel:me,onClick:vt,pageCount:Math.ceil(et/Ke),previousLabel:_e,previousAriaLabel:ye},rowCount:et,searchButtonAttributes:{label:ce},searchInputAttributes:{clearableButtonAttributes:{ariaLabel:ae,icon:"x-circle",iconPrefix:"gravitysmtp-admin-icon"},placeholder:ge},SearchNoResultsImage:b.Z,searchTerm:at.get(j)||"",titleAttributes:{tagName:"h2"},useAjax:!0};return Qe.gravitysmtp_view_debug_log&&s.React.createElement("div",(0,r.Z)({},bt,{ref:t}),s.React.createElement(p.Z,{size:"display-sm",weight:"semibold",spacing:6,content:Y}),s.React.createElement(_.Z,ft))}));I.propTypes={customAttributes:s.PropTypes.object,customClasses:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.array,s.PropTypes.object]),data:s.PropTypes.object,i18n:s.PropTypes.object},I.displayName="DebugLogScreen",t.default=I},3199:function(e,t,n){n.r(t);var r,a,o=n(3267),i=n.n(o),u=n(760),l=(null===(r=(0,n(583).iE)(i(),"gravitysmtp_admin_config"))||void 0===r||null===(r=r.components)||void 0===r?void 0:r.tools)||{},s={debugLogDataGridRows:(null==l||null===(a=l.data)||void 0===a||null===(a=a.debug_log)||void 0===a||null===(a=a.data_grid)||void 0===a?void 0:a.data)||[],debugDetailsDialogData:{},debugDetailsDialogOpen:!1},c=(0,u.Ue)(s,(function(e){return{setDebugLogDataGridRows:function(t){return e((function(){return{debugLogDataGridRows:t}}))},setDebugDetailsDialogData:function(t){return e((function(){return{debugDetailsDialogData:t}}))},setDebugDetailsDialogOpen:function(t){return e((function(){return{debugDetailsDialogOpen:t}}))}}}));t.default=c},2077:function(e,t,n){n.d(t,{Z:function(){return p}});var r,a=n(9801),o=n(9509),i=n.n(o),u=n(9608),l=n.n(u),s=n(3267),c=n.n(s),d=n(4070),g=(null===(r=(0,n(583).iE)(c(),"gravitysmtp_admin_config"))||void 0===r?void 0:r.common)||{};function p(){return v.apply(this,arguments)}function v(){return v=(0,a.Z)(i().mark((function e(){var t,n,r,a,o,u,s,c,p,v,b=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=b.length>0&&void 0!==b[0]?b[0]:"",a=b.length>1&&void 0!==b[1]?b[1]:"debug",o=g.data,u=void 0===o?{}:o,s=g.endpoints,p=(null==(c=void 0===s?{}:s)||null===(t=c.log_debug_item)||void 0===t?void 0:t.action)||"",v=(null==c||null===(n=c.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=u&&u.debug_log_enabled&&p&&v&&r){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.v_)({endpoint:l(),body:{action:p,security:v,message:r,priority:a}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}},9208:function(e,t,n){var r=n(6588),a=n(5210);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return function n(o){return Object.entries(o).reduce((function(o,i){var u=(0,a.Z)(i,2),l=u[0],s=u[1];return"object"===(0,r.Z)(s)&&null!==s?o[l]=n(s):e.includes(l)?o[l]=null===s?null:t.repeat(s.length):o[l]=s,o}),Array.isArray(o)?[]:{})}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);