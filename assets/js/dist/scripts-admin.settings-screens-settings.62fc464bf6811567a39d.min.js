"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[8672,4587],{2641:function(e,t,n){n.r(t);var i=n(9801),r=n(6796),a=n(5210),o=n(5720),s=n(9509),c=n.n(s),l=n(9608),u=n.n(l),g=n(7784),d=n(760),m=n(4070),p=n(375),f=n(9805),v=n(7343),_=n(6192),y=n(6493),b=n(6901),h=n(7024),x=n(7066),Z=n(8887),O=n(2030),D=n(4237),k=n(2077),C=n(9208),w=n(7866);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=g.React.forwardRef,P=g.React.useRef,A=g.React.useState,T=g.ReactRouter.useLocation,z=g.ReactRouter.Link,j=S((function(e,t){var n,o,s,l,E=e.customAttributes,S=void 0===E?{}:E,j=e.customClasses,I=void 0===j?[]:j,N=e.common,B=void 0===N?{}:N,L=e.data,J=void 0===L?{}:L,F=e.i18n,M=void 0===F?{}:F,H=R({className:(0,g.classnames)({"gravitysmtp-general-settings":!0},I)},S),W=M||{},U=W.debug_messages,X=void 0===U?{}:U,$=X.uninstalling_plugin,q=X.uninstalling_plugin_error,G=W.settings,K=void 0===G?{}:G,Q=K.top_heading,V=K.license_box_heading,Y=K.license_box_content,ee=K.license_box_input_label,te=K.license_box_input_help_text,ne=K.license_box_button_text,ie=K.license_valid,re=K.license_invalid,ae=K.test_mode_box_content_1,oe=K.test_mode_box_toggle_label,se=K.general_settings_box_heading,ce=K.uninstall_box_heading,le=K.uninstall_box_content,ue=K.uninstall_box_button_label,ge=K.uninstall_dialog_confirm_change_heading,de=K.uninstall_dialog_confirm_change_content,me=K.uninstall_dialog_confirm_change_confirm,pe=K.error_uninstalling_message,fe=J.license_key,ve=J.license_key_is_valid,_e=J.plugins_url,ye=(null==B?void 0:B.i18n)||{},be=ye.debug_messages,he=void 0===be?{}:be,xe=he.saving_plugin_settings,Ze=void 0===xe?"":xe,Oe=he.saving_plugin_settings_error,De=void 0===Oe?"":Oe,ke=ye.general_settings_usage_analytics_label,Ce=void 0===ke?"":ke,we=ye.general_settings_usage_analytics_help_text,Ee=void 0===we?"":we,Re=(null==B?void 0:B.data)||{},Se=Re.usage_analytics_enabled,Pe=Re.usage_analytics_link,Ae=Re.param_keys,Te=(null==J?void 0:J.caps)||{},ze=A("boolean"==typeof ve&&!ve),je=(0,a.Z)(ze,2),Ie=je[0],Ne=je[1],Be=A(fe),Le=(0,a.Z)(Be,2),Je=Le[0],Fe=Le[1],Me=A(ve),He=(0,a.Z)(Me,2),We=He[0],Ue=He[1],Xe=A(""),$e=(0,a.Z)(Xe,2),qe=$e[0],Ge=$e[1],Ke=A(!1),Qe=(0,a.Z)(Ke,2),Ve=Qe[0],Ye=Qe[1],et=(0,w.default)((function(e){return e.setConfirmDialogOpen})),tt=(0,w.default)((function(e){return e.setConfirmDialogSettings})),nt=(0,w.default)((function(e){return e.setPageLoaderActive})),it=(0,w.default)((function(e){return e.testModeEnabled})),rt=(0,w.default)((function(e){return e.setTestModeEnabled})),at=P(null),ot=(null==B||null===(n=B.endpoints)||void 0===n||null===(n=n.save_plugin_settings)||void 0===n?void 0:n.action)||"",st=(null==B||null===(o=B.endpoints)||void 0===o||null===(o=o.save_plugin_settings)||void 0===o?void 0:o.nonce)||"",ct=(null==B||null===(s=B.endpoints)||void 0===s||null===(s=s.gravitysmtp_uninstall_plugin)||void 0===s?void 0:s.action)||"",lt=(null==B||null===(l=B.endpoints)||void 0===l||null===(l=l.gravitysmtp_uninstall_plugin)||void 0===l?void 0:l.nonce)||"",ut=(0,g.classnames)({"gravitysmtp-general-settings__license-save":!0,"gravitysmtp-general-settings__license-save--saving":Ve}),gt=(0,D.Ds)(),dt=T(),mt=function(){var e=(0,i.Z)(c().mark((function e(){var t,n,i,r,a,o,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=at.current.offsetWidth,n=Je.trim(),Ne(!1),Ge(t),Ye(!0),Fe(n),i={action:ot,security:st,key:Ae.license_key,value:n},e.next=9,(0,k.Z)((0,p.gB)(Ze,JSON.stringify((0,C.Z)(["security","value"],i))),"info");case 9:return e.prev=9,e.next=12,(0,m.v_)({endpoint:u(),body:i});case 12:a=e.sent,Ye(!1),Ge(""),null!=a&&null!==(r=a.data)&&void 0!==r&&r.success?(s=(null==a||null===(o=a.data)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.license_is_valid)||!1,Ue(s),!0===s?gt(ie):!1===s&&gt(re,"error")):(Ue(!1),gt(re,"error")),e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(9),e.next=23,(0,k.Z)((0,p.gB)(De,JSON.stringify(e.t0)),"error");case 23:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(){return e.apply(this,arguments)}}(),pt={customClasses:["gravitysmtp-general-settings__license-input"],controlled:!0,labelAttributes:{label:ee},helpTextAttributes:We?{}:{content:te,size:"text-xs",weight:"regular"},id:"gravitysmtp-general-settings__license-input",name:Ae.license_key,onChange:Fe,textSecurity:"disc",value:Je,customAttributes:{readOnly:!Te.gravitysmtp_edit_license_key}};!0===We?(pt.borderStyle="correct",pt.iconAttributes={iconPrefix:"gravitysmtp-admin-icon",preset:"status-correct"}):!1===We&&(pt.borderStyle="error",pt.iconAttributes={iconPrefix:"gravitysmtp-admin-icon",preset:"status-incorrect"});var ft=function(){var e=new URLSearchParams(dt.search),t=J.nav_item_param_key||"tab";e.set(t,"logging");var n=R(R({},dt),{},{search:"?".concat(e.toString())}),i=ae.split("%s");return g.React.createElement(g.React.Fragment,null,i[0],g.React.createElement(z,{className:"gform-link gform-typography--size-text-sm",to:n},i[1]),i[2])},vt=function(){var e=(0,i.Z)(c().mark((function e(t){var n,i,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rt(t),n={action:ot,security:st,key:Ae.test_mode,value:t?"true":"false"},e.next=4,(0,k.Z)((0,p.gB)(Ze,JSON.stringify((0,C.Z)(["security"],n))),"info");case 4:return e.prev=4,e.next=7,(0,m.v_)({endpoint:u(),body:n});case 7:null!=(r=e.sent)&&null!==(i=r.data)&&void 0!==i&&i.success,e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(4),e.next=16,(0,k.Z)((0,p.gB)(De,JSON.stringify(e.t0)),"error");case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),_t=function(){var e=(0,i.Z)(c().mark((function e(t){var n,i,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:ot,security:st,key:Ae.usage_analytics,value:t?"true":"false"},e.next=3,(0,k.Z)((0,p.gB)(Ze,JSON.stringify((0,C.Z)(["security"],n))),"info");case 3:return e.prev=3,e.next=6,(0,m.v_)({endpoint:u(),body:n});case 6:null!=(r=e.sent)&&null!==(i=r.data)&&void 0!==i&&i.success&&(B.data.usage_analytics_enabled=t,(0,p.X$)({event:"gravitysmtp/setting-updated",native:!1,data:{key:Ae.usage_analytics,value:t}})),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(3),e.next=15,(0,k.Z)((0,p.gB)(De,JSON.stringify(e.t0)),"error");case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),yt=function(){var e=(0,i.Z)(c().mark((function e(){var t,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nt(!0),t={action:ct,security:lt},e.next=4,(0,k.Z)((0,p.gB)($,JSON.stringify((0,C.Z)(["security"],t))),"info");case 4:return e.prev=4,e.next=7,(0,m.v_)({endpoint:u(),body:t});case 7:null!=(i=e.sent)&&null!==(n=i.data)&&void 0!==n&&n.success?window.location.href=_e:(nt(!1),gt(pe,"error")),e.next=18;break;case 11:return e.prev=11,e.t0=e.catch(4),nt(!1),gt(pe,"error"),e.next=18,(0,k.Z)((0,p.gB)(q,JSON.stringify(e.t0)),"error");case 18:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),bt={initialChecked:it,labelAttributes:{label:oe},helpTextAttributes:{content:g.React.createElement(ft,null),size:"text-sm",spacing:[4,0,0,0]},helpTextWidth:"full",labelPosition:"left",id:"test_mode",name:Ae.test_mode,onChange:vt,size:"size-m",spacing:6,width:"full",disabled:!Te.gravitysmtp_edit_test_mode},ht={initialChecked:Se,labelAttributes:{label:Ce},helpTextAttributes:{content:g.React.createElement(d.ji,{openingSymbol:"{{",closingSymbol:"}}",text:Ee,tokens:[{component:b.Z,key:"learn_link",props:{href:Pe,size:"text-sm",target:"_blank"}}]}),size:"text-sm",spacing:[4,0,0,0]},helpTextWidth:"full",labelPosition:"left",id:"usage_analytics",name:Ae.usage_analytics,onChange:_t,size:"size-m",width:"full",disabled:!Te.gravitysmtp_edit_usage_analytics};return g.React.createElement("div",(0,r.Z)({},H,{ref:t}),g.React.createElement(_.Z,{size:"display-sm",weight:"semibold",spacing:6,content:Q}),Te.gravitysmtp_view_license_key&&g.React.createElement(O.Z,{HeaderContent:function(e){return g.React.createElement(f.Z,{x:630},g.React.createElement(_.Z,(0,r.Z)({content:V,tagName:"h2",size:"text-lg",weight:"medium",spacing:2},e)),g.React.createElement(h.Z,(0,r.Z)({content:Y,size:"text-sm",color:"comet"},e)))},FooterContent:function(e){var t={};return qe&&(t.style={width:"".concat(qe,"px")}),t.disabled=!Te.gravitysmtp_edit_license_key,g.React.createElement(v.Z,(0,r.Z)({active:Ve,activeType:"loader",customAttributes:t,customClasses:ut,icon:"save-disk",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:ne,onClick:mt,size:"size-height-m",ref:at},e))},spacing:6},g.React.createElement(f.Z,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},g.React.createElement(y.Z,pt),Ie&&g.React.createElement(Z.Z,{customIconPrefix:"gravitysmtp-admin-icon",spacing:[3,0,0,0],type:"error"},re))),(Te.gravitysmtp_view_test_mode||Te.gravitysmtp_view_usage_analytics)&&g.React.createElement(O.Z,{HeaderContent:function(e){return g.React.createElement(f.Z,{x:630},g.React.createElement(_.Z,(0,r.Z)({content:se,tagName:"h2",size:"text-lg",weight:"medium"},e)))},spacing:6},g.React.createElement(f.Z,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},Te.gravitysmtp_view_test_mode&&g.React.createElement(x.Z,bt),Te.gravitysmtp_view_usage_analytics&&g.React.createElement(x.Z,ht))),Te.gravitysmtp_view_uninstall&&g.React.createElement(O.Z,{HeaderContent:function(e){return g.React.createElement(f.Z,{x:630},g.React.createElement(_.Z,(0,r.Z)({content:ce,tagName:"h2",size:"text-lg",weight:"medium"},e)))}},g.React.createElement(f.Z,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},g.React.createElement(h.Z,{content:le,size:"text-sm",color:"comet",spacing:6}),g.React.createElement(v.Z,{disabled:!Te.gravitysmtp_edit_uninstall,icon:"trash",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:ue,onClick:(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tt({confirmDialogConfirmButtonType:"amaranth-red",confirmDialogI18n:{confirm_change_confirm:me,confirm_change_content:de,confirm_change_heading:ge},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return et(!1)},confirmDialogOnClose:function(){return et(!1)},confirmDialogOnConfirm:function(){var e=(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return et(!1),e.next=3,yt();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)}))),size:"size-height-m",type:"amaranth-red"}))))}));j.propTypes={customAttributes:g.PropTypes.object,customClasses:g.PropTypes.oneOfType([g.PropTypes.string,g.PropTypes.array,g.PropTypes.object]),data:g.PropTypes.object,i18n:g.PropTypes.object},j.displayName="SettingsScreen",t.default=j},7866:function(e,t,n){n.r(t);var i,r,a,o,s,c,l,u,g,d=n(3267),m=n.n(d),p=n(7784),f=n(760),v=n(375),_=(null===(i=(0,v.iE)(m(),"gravitysmtp_admin_config"))||void 0===i||null===(i=i.components)||void 0===i?void 0:i.settings)||{},y=(null===(r=(0,v.iE)(m(),"gravitysmtp_admin_config"))||void 0===r?void 0:r.common)||{},b={activeIntegration:(g=null==_||null===(u=_.data)||void 0===u||null===(u=u.integrations)||void 0===u?void 0:u.find((function(e){var t;return null==e||null===(t=e.data)||void 0===t?void 0:t.enabled})),(null==g?void 0:g.id)||""),activeIntegrationSettings:"",confirmDialogCustomAttributes:{},confirmDialogI18n:{},confirmDialogOnCancel:function(){},confirmDialogOnClose:function(){},confirmDialogOnConfirm:function(){},confirmDialogOpen:!1,confirmDialogConfirmButtonType:"primary-new",debugLogEnabled:(null==y||null===(a=y.data)||void 0===a?void 0:a.debug_log_enabled)||!1,integrations:(null==_||null===(o=_.data)||void 0===o?void 0:o.integrations)||[],integrationSettingsDialogOpen:!1,integrationSettingsFormData:(l={},null==_||null===(c=_.data)||void 0===c||null===(c=c.integrations)||void 0===c||c.forEach((function(e){l[e.id]=(null==e?void 0:e.data)||{}})),l),noticeDialogOpen:!1,pageLoaderActive:!1,testModeEnabled:(null==y||null===(s=y.data)||void 0===s?void 0:s.test_mode_enabled)||!1},h=(0,f.Ue)(b,(function(e){return{setActiveIntegration:function(t){return e((function(){return{activeIntegration:t}}))},setActiveIntegrationSettings:function(t){return e((function(){return{activeIntegrationSettings:t}}))},setConfirmDialogOpen:function(t){return e((function(){return{confirmDialogOpen:t}}))},setConfirmDialogSettings:function(t){var n=t.confirmDialogCustomAttributes,i=void 0===n?{}:n,r=t.confirmDialogI18n,a=void 0===r?{}:r,o=t.confirmDialogOpen,s=void 0!==o&&o,c=t.confirmDialogOnCancel,l=void 0===c?function(){}:c,u=t.confirmDialogOnClose,g=void 0===u?function(){}:u,d=t.confirmDialogOnConfirm,m=void 0===d?function(){}:d,p=t.confirmDialogConfirmButtonType,f=void 0===p?"primary-new":p;e((function(){return{confirmDialogCustomAttributes:i,confirmDialogConfirmButtonType:f,confirmDialogI18n:a,confirmDialogOpen:s,confirmDialogOnCancel:l,confirmDialogOnClose:g,confirmDialogOnConfirm:m}}))},setIntegrationSettingsDialogOpen:function(t){return e((function(){return{integrationSettingsDialogOpen:t}}))},setNoticeDialogOpen:function(t){return e((function(){return{noticeDialogOpen:t}}))},setPageLoaderActive:function(t){return e((function(){return{pageLoaderActive:t}}))},setIntegrationSettingsFormData:function(t,n,i){return e((0,p.immer)((function(e){e.integrationSettingsFormData[t]||(e.integrationSettingsFormData[t]={}),e.integrationSettingsFormData[t][n]=i})))},setDebugLogEnabled:function(t){return e((function(){return{debugLogEnabled:t}}))},setTestModeEnabled:function(t){return e((function(){return{testModeEnabled:t}}))},updateIntegrationSettings:function(t,n){return e((function(){return{activeIntegrationSettings:t,integrationSettingsDialogOpen:n}}))},updateIntegrationStatus:function(t,n){var i=n.activated,r=n.configured,a=n.enabled,o=n.is_primary,s=n.is_backup;return e((0,p.immer)((function(e){var n=e.integrations.find((function(e){return e.id===t}));n&&(n.data||(n.data={}),void 0!==i&&(n.data.activated=i),void 0!==r&&(n.data.configured=r),void 0!==a&&(n.data.enabled=a),void 0!==o&&(n.data.is_primary=o),void 0!==s&&(n.data.is_backup=s))})))}}}));t.default=h},2077:function(e,t,n){n.d(t,{Z:function(){return m}});var i,r=n(9801),a=n(9509),o=n.n(a),s=n(9608),c=n.n(s),l=n(3267),u=n.n(l),g=n(4070),d=(null===(i=(0,n(375).iE)(u(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};function m(){return p.apply(this,arguments)}function p(){return p=(0,r.Z)(o().mark((function e(){var t,n,i,r,a,s,l,u,m,p,f=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=f.length>0&&void 0!==f[0]?f[0]:"",r=f.length>1&&void 0!==f[1]?f[1]:"debug",a=d.data,s=void 0===a?{}:a,l=d.endpoints,m=(null==(u=void 0===l?{}:l)||null===(t=u.log_debug_item)||void 0===t?void 0:t.action)||"",p=(null==u||null===(n=u.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=s&&s.debug_log_enabled&&m&&p&&i){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,g.v_)({endpoint:c(),body:{action:m,security:p,message:i,priority:r}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}},9208:function(e,t,n){var i=n(6588),r=n(5210);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return function n(a){return Object.entries(a).reduce((function(a,o){var s=(0,r.Z)(o,2),c=s[0],l=s[1];return"object"===(0,i.Z)(l)&&null!==l?a[c]=n(l):e.includes(c)?a[c]=null===l?null:t.repeat(l.length):a[c]=l,a}),Array.isArray(a)?[]:{})}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);