"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[3248],{9430:function(e,t,n){n.r(t);var a=n(6796),s=n(9801),r=n(5210),i=n(5720),o=n(9509),c=n.n(o),l=n(9608),u=n.n(l),d=n(7784),m=n(4070),p=n(375),_=n(8887),g=n(9805),b=n(7343),f=n(6192),v=n(6493),h=n(7511),y=n(2030),R=n(4237),x=n(7024),Z=n(7066),E=n(2077),w=n(9208);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var k=d.React.forwardRef,z=d.React.useEffect,P=d.React.useLayoutEffect,j=d.React.useState,A=d.React.useRef,C=d.ReactRouter.useSearchParams,T=k((function(e,t){var n,o,l=e.customAttributes,k=void 0===l?{}:l,T=e.customClasses,N=void 0===T?[]:T,S=e.common,F=void 0===S?{}:S,D=e.data,B=void 0===D?{}:D,J=e.i18n,W=void 0===J?{}:J,H=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,d.classnames)({"gravitysmtp-tools-app__send-a-test":!0},N)},k),I=W||{},K=I.debug_messages,L=K.sending_test_email,V=void 0===L?"":L,q=K.sending_test_email_error,G=void 0===q?"":q,M=I.send_a_test,Q=void 0===M?{}:M,U=Q.top_heading,X=Q.top_content,Y=Q.send_test_box_heading,$=Q.send_test_box_input_label,ee=Q.send_test_box_input_placeholder,te=Q.send_test_box_input_description,ne=Q.send_test_box_send_with_label,ae=Q.send_test_box_send_with_description,se=Q.send_test_box_send_as_html_label,re=Q.send_test_box_send_as_html_description,ie=Q.send_test_box_alerts_button_label,oe=Q.send_test_box_try_again_button_label,ce=Q.send_test_box_error_issue_heading,le=Q.send_test_box_error_possible_reasons_heading,ue=Q.send_test_box_error_recommended_steps_heading,de=Q.send_test_box_view_log_button_label,me=Q.send_test_box_copy_log_button_label,pe=Q.send_test_box_copy_log_success_message,_e=((null==F?void 0:F.data)||{}).test_mode_enabled,ge=(null==F?void 0:F.i18n)||{},be=ge.snackbar_send_test_mail_error,fe=ge.snackbar_send_test_mail_success,ve=B.caps,he=void 0===ve?{}:ve,ye=B.integrations,Re=(void 0===ye?[]:ye).filter((function(e){return!e.data.disabled&&e.data.configured})),xe=Re.map((function(e){return{label:(null==e?void 0:e.title)||"",value:(null==e?void 0:e.id)||""}})),Ze=!!Re.length,Ee=Ze?Re.find((function(e){return e.data.is_primary}))||Re[0]:{},we=_e||!Ze,Oe=C(),ke=(0,r.Z)(Oe,2),ze=ke[0],Pe=(ke[1],ze.get("integration")||""),je=j(!1),Ae=(0,r.Z)(je,2),Ce=Ae[0],Te=Ae[1],Ne=j(!1),Se=(0,r.Z)(Ne,2),Fe=Se[0],De=Se[1],Be=j({}),Je=(0,r.Z)(Be,2),We=Je[0],He=Je[1],Ie=j(""),Ke=(0,r.Z)(Ie,2),Le=Ke[0],Ve=Ke[1],qe=j(Pe||(null==Ee?void 0:Ee.id)||""),Ge=(0,r.Z)(qe,2),Me=Ge[0],Qe=Ge[1],Ue=j(!0),Xe=(0,r.Z)(Ue,2),Ye=Xe[0],$e=Xe[1],et=j(""),tt=(0,r.Z)(et,2),nt=tt[0],at=tt[1],st=(null==F||null===(n=F.endpoints)||void 0===n||null===(n=n.send_test)||void 0===n?void 0:n.action)||"",rt=(null==F||null===(o=F.endpoints)||void 0===o||null===(o=o.send_test)||void 0===o?void 0:o.nonce)||"",it=A(!0),ot=A(null),ct=A(null),lt=A(null),ut=A(null),dt=j(!1),mt=(0,r.Z)(dt,2),pt=mt[0],_t=mt[1],gt=(0,d.classnames)({"gravitysmtp-tools-app__send-a-test-trigger--sending":Ce});z((function(){pt&&ut.current&&(ut.current.focus(),_t(!1))}),[pt]),P((function(){it.current?it.current=!1:ot&&ct&&(Fe?ct.current.focus():ot.current&&ot.current.focus())}),[Fe]);var bt=(0,R.Ds)(),ft=function(){var e=(0,s.Z)(c().mark((function e(){var t,n,a,s,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==Le&&""!==Me){e.next=2;break}return e.abrupt("return");case 2:return at(lt.current.offsetWidth),Te(!0),t={action:st,security:rt,email:Le,connector_type:Me,as_html:Ye?"true":"false"},e.next=7,(0,E.Z)((0,p.gB)(V,JSON.stringify((0,w.Z)(["security"],t))),"info");case 7:return e.prev=7,e.next=10,(0,m.v_)({endpoint:u(),body:t});case 10:a=e.sent,Te(!1),null!=a&&null!==(n=a.data)&&void 0!==n&&n.success?bt(fe):null!=a&&null!==(s=a.error)&&void 0!==s&&null!==(s=s.detail)&&void 0!==s&&s.data?(r=(0,p.sO)(a.error.detail.data)?JSON.parse(a.error.detail.data):"",(0,p.Kn)(r.data)?(He(r.data),De(!0)):bt(r.data||be,"error")):bt(be,"error"),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(7),bt(e.t0,"error"),e.next=20,(0,E.Z)((0,p.gB)(G,JSON.stringify(e.t0)),"error");case 20:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),vt=Fe?1200:630;return he.gravitysmtp_view_tools_sendatest&&d.React.createElement("div",(0,a.Z)({},H,{ref:t}),d.React.createElement(f.Z,{size:"display-sm",weight:"semibold",spacing:1,content:U}),d.React.createElement(x.Z,{size:"text-sm",spacing:6,color:"comet",content:X}),d.React.createElement(y.Z,{HeaderContent:function(e){return d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,(0,a.Z)({content:Y,size:"text-lg",weight:"medium"},e)))},FooterContent:function(e){return Fe?d.React.createElement(b.Z,(0,a.Z)({label:oe,onClick:function(){De(!1),Ve(""),He({})},size:"size-height-m"},e)):d.React.createElement(b.Z,(0,a.Z)({active:Ce,activeType:"loader",customAttributes:{"data-test-id":"send-a-test-email-trigger",style:{width:"".concat(nt,"px")}},customClasses:gt,disabled:we,icon:"paper-plane",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:ie,onClick:ft,ref:lt,size:"size-height-m"},e))}},d.React.createElement(g.Z,{x:vt},Fe?d.React.createElement(d.React.Fragment,null,d.React.createElement(g.Z,{x:630},d.React.createElement(_.Z,{theme:"cosmos",type:"error",customIconPrefix:"gravitysmtp-admin-icon",content:We.error_message,spacing:[2,0,6,0]})),(null==We?void 0:We.issues)&&We.issues.length>0&&We.issues[0]&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:ce}),d.React.createElement(x.Z,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},We.issues.map((function(e,t){return d.React.createElement("li",{key:"issues-".concat(t)},e)}))))),(null==We?void 0:We.possible_reasons)&&We.possible_reasons.length>0&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:le}),d.React.createElement(x.Z,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},We.possible_reasons.map((function(e,t){return d.React.createElement("li",{key:"possible-reasons-".concat(t)},e)}))))),(null==We?void 0:We.recommended_steps)&&We.recommended_steps.length>0&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.Z,{size:"text-sm",tagName:"h5",weight:"medium",spacing:3,content:ue}),d.React.createElement(x.Z,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},We.recommended_steps.map((function(e,t){return d.React.createElement("li",{key:"recommended-steps-".concat(t)},e)}))))),d.React.createElement(g.Z,{display:"flex",spacing:2},d.React.createElement(b.Z,{label:de,onClick:function(){window.location.href="//".concat(window.location.host).concat(window.location.pathname,"?page=gravitysmtp-activity-log&tab=log-details&event_id=").concat(We.full_log.log_id)},size:"size-height-m",spacing:[0,3,0,0],type:"white",ref:ct}),d.React.createElement(b.Z,{icon:"copy",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:me,onClick:function(){(0,p.BR)(We.log_copy),bt(pe),_t(!0)},ref:ut,size:"size-height-m",type:"white"}))):d.React.createElement(d.React.Fragment,null,d.React.createElement(v.Z,{labelAttributes:{label:$},helpTextAttributes:{content:te},placeholder:ee,onChange:function(e){return Ve(e)},type:"email",disabled:we,customAttributes:{"data-test-id":"send-a-test-email-input",ref:ot},spacing:6}),Ze&&d.React.createElement(h.Z,{customAttributes:{"data-test-id":"send-a-test-integration"},initialValue:Me,labelAttributes:{label:ne},helpTextAttributes:{content:ae},name:"integration",onChange:function(e){return Qe(e)},options:xe,disabled:we,spacing:6}),d.React.createElement(Z.Z,{customAttributes:{"data-test-id":"send-a-test-html"},initialChecked:Ye,labelAttributes:{label:se},helpTextAttributes:{content:re,size:"text-sm",spacing:[4,0,0,0]},helpTextWidth:"full",labelPosition:"left",id:"send-a-test-html",name:"send-a-test-html",onChange:function(e){return $e(e)},size:"size-m",width:"full",disabled:we})))))}));T.propTypes={customAttributes:d.PropTypes.object,customClasses:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.array,d.PropTypes.object])},T.displayName="SendATestScreen",t.default=T},2077:function(e,t,n){n.d(t,{Z:function(){return p}});var a,s=n(9801),r=n(9509),i=n.n(r),o=n(9608),c=n.n(o),l=n(3267),u=n.n(l),d=n(4070),m=(null===(a=(0,n(375).iE)(u(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{};function p(){return _.apply(this,arguments)}function _(){return _=(0,s.Z)(i().mark((function e(){var t,n,a,s,r,o,l,u,p,_,g=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g.length>0&&void 0!==g[0]?g[0]:"",s=g.length>1&&void 0!==g[1]?g[1]:"debug",r=m.data,o=void 0===r?{}:r,l=m.endpoints,p=(null==(u=void 0===l?{}:l)||null===(t=u.log_debug_item)||void 0===t?void 0:t.action)||"",_=(null==u||null===(n=u.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=o&&o.debug_log_enabled&&p&&_&&a){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.v_)({endpoint:c(),body:{action:p,security:_,message:a,priority:s}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}},9208:function(e,t,n){var a=n(6588),s=n(5210);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return function n(r){return Object.entries(r).reduce((function(r,i){var o=(0,s.Z)(i,2),c=o[0],l=o[1];return"object"===(0,a.Z)(l)&&null!==l?r[c]=n(l):e.includes(c)?r[c]=null===l?null:t.repeat(l.length):r[c]=l,r}),Array.isArray(r)?[]:{})}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);