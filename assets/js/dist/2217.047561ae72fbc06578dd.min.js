"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[2217],{52217:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var a,i=n(71860),r=n(88856),o=n(90455),c=n(8140),l=n(78564),s=n.n(l),d=n(27122),u=n.n(d),m=n(97867),v=n(60177),g=n(13296),p=n(71376),_=n(84860),y=n(30242),f=n(80509),b=n(29549),h=n(5529),A=n(25980),x=n(82263),R=n(13379),E=n(43632),w=n(66598),k=n(22397),C=n(83707),z=n(93313),O=n(36770),P=n(40450),j=n.n(P);function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return L(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw r}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var T=(null===(a=(0,p.zj)(j(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.components)||{};var N=n(98895);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=m.React.forwardRef,G=m.React.useEffect,J=m.React.useState,F=m.React.useRef,M=m.ReactRouter.useLocation,U=m.ReactRouter.useNavigate,K=m.ReactRouter.useSearchParams,V=["date","from","to","subject"],B=[{key:"status",icon:"exclamation-circle"},{key:"service",icon:"cloud1"},{key:"log_id",icon:"document-text"}];(0,O.A)("email_open_tracking")&&function(){var e,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("."),a=T,i=S(n);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(!a||!(r in a))return t;a=a[r]}}catch(e){i.e(e)}finally{i.f()}return void 0!==a?a:t}("activity_log.data.open_tracking_enabled")&&B.push({key:"opened",icon:"mail-open"}),B.push({key:"source",icon:"cog"});var $=I((function(e,t){var n,a,r=e.common,l=void 0===r?{}:r,d=e.data,O=void 0===d?{}:d,P=e.endpoints,j=void 0===P?{}:P,S=e.i18n,L=void 0===S?{}:S,T=U(),D=M(),I=(0,N.default)((function(e){return e.setDeleteEventDialogOpen})),$=(0,N.default)((function(e){return e.setDeletingEventId})),q=(0,N.default)((function(e){return e.setViewEmailDialogOpen})),Q=(0,N.default)((function(e){return e.setViewEmailEventProperties})),W=(0,N.default)((function(e){return e.setLogDetail})),X=window.matchMedia("(min-width: 640px)"),Y=J(X.matches),Z=(0,c.A)(Y,2),ee=Z[0],te=Z[1],ne=J(!1),ae=(0,c.A)(ne,2),ie=ae[0],re=ae[1],oe=J(!1),ce=(0,c.A)(oe,2),le=ce[0],se=ce[1],de=K(),ue=(0,c.A)(de,2),me=ue[0],ve=ue[1],ge=me.get("event_id"),pe=F(),_e=(null==l||null===(n=l.endpoints)||void 0===n||null===(n=n.get_single_email)||void 0===n?void 0:n.action)||"",ye=(null==l||null===(a=l.endpoints)||void 0===a||null===(a=a.get_single_email)||void 0===a?void 0:a.nonce)||"",fe=(0,_.dh)();G((function(){var e=function(e){return te(e.matches)};return X.addListener(e),function(){return X.removeListener(e)}}),[X]);var be=(0,N.default)((function(e){return e.logDetail})),he=(null==be?void 0:be.technical_information)||[],Ae=(j||{}).gravitysmtp_resend_email,xe=void 0===Ae?{}:Ae,Re=xe.action,Ee=void 0===Re?"":Re,we=xe.nonce,ke=void 0===we?"":we,Ce=L||{},ze=Ce.debug_messages,Oe=void 0===ze?{}:ze,Pe=Oe.fetching_single_activity_log,je=void 0===Pe?"":Pe,Se=Oe.fetching_single_activity_log_error,Le=void 0===Se?"":Se,Te=Ce.log_detail,Ne=void 0===Te?{}:Te,De=Ne.top_heading,He=void 0===De?"":De,Ie=Ne.top_error,Ge=void 0===Ie?"":Ie,Je=Ne.action_button_view_email_label,Fe=void 0===Je?"":Je,Me=Ne.action_button_resend_label,Ue=void 0===Me?"":Me,Ke=(Ne.action_button_print_label,Ne.action_button_export_label,Ne.action_button_delete_label),Ve=void 0===Ke?"":Ke,Be=Ne.back_button_label,$e=void 0===Be?"":Be,qe=Ne.main_box_heading,Qe=void 0===qe?"":qe,We=Ne.nav_button_next_title,Xe=void 0===We?"":We,Ye=Ne.nav_button_prev_title,Ze=void 0===Ye?"":Ye,et=Ne.secondary_box_heading,tt=void 0===et?"":et,nt=Ne.sidebar_status_heading,at=void 0===nt?"":nt,it=Ne.sidebar_attachments_heading,rt=void 0===it?"":it,ot=Ce.resending_email,ct=Ce.resending_error,lt=Ce.snackbar_resend_error,st=Ce.snackbar_resend_success,dt=(null==l?void 0:l.i18n)||{},ut=dt.aria_label_collapsed_metabox,mt=void 0===ut?"":ut,vt=dt.aria_label_expanded_metabox,gt=void 0===vt?"":vt,pt=dt.snackbar_email_log_detail_empty_error,_t=void 0===pt?"":pt,yt=dt.snackbar_email_log_detail_generic_error,ft=void 0===yt?"":yt,bt=(null==O?void 0:O.caps)||{};G((function(){window.scrollTo(0,0)}),[]);var ht=function(){var e=(0,o.A)(s().mark((function e(){var t,n,a,i,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re(!0),t={action:_e,security:ye,event_id:ge},e.next=4,(0,C.A)((0,p.nv)(je,JSON.stringify((0,z.A)(["security"],t))),"info");case 4:return e.prev=4,e.next=7,(0,v.bE)({endpoint:u(),body:t});case 7:if(a=e.sent,re(!1),null==a||null===(n=a.data)||void 0===n||!n.success){e.next=17;break}if(o=null==a||null===(i=a.data)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.log_detail,(!Array.isArray(o)||o.length)&&o){e.next=14;break}return fe(_t,"error"),e.abrupt("return");case 14:W((null==a||null===(r=a.data)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.log_detail)||{}),e.next=18;break;case 17:fe(ft,"error");case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(4),fe(e.t0,"error"),e.next=25,(0,C.A)((0,p.nv)(Le,JSON.stringify(e.t0)),"error");case 25:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(){return e.apply(this,arguments)}}();G((function(){pe.current?ge&&ht():pe.current=!0}),[ge]);var At=function(){var e=(0,o.A)(s().mark((function e(){var t,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(be.log_id){e.next=2;break}return e.abrupt("return");case 2:return se(!0),t={action:Ee,security:ke,email_id:be.log_id},e.next=6,(0,C.A)((0,p.nv)(ot,JSON.stringify((0,z.A)(["security"],t))),"info");case 6:return e.prev=6,e.next=9,(0,v.bE)({endpoint:u(),body:t});case 9:null!=(a=e.sent)&&null!==(n=a.data)&&void 0!==n&&n.success?fe(st):fe(lt,"error"),e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(6),fe(lt,"error"),e.next=18,(0,C.A)((0,p.nv)(ct,JSON.stringify(e.t0)),"error");case 18:se(!1);case 19:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}(),xt=function(){return m.React.createElement(m.React.Fragment,null,m.React.createElement(y.A,{spacing:4},m.React.createElement(b.A,{container:!0,alignItems:"flex-start",elementType:"div",justifyContent:"flex-start",rowSpacing:4,type:"fluid",wrap:!ee},m.React.createElement(b.A,{item:!0,elementType:"div",customAttributes:{style:{flex:ee?"auto":"0 0 100%"}}},m.React.createElement(h.A,{content:He,size:"display-sm",weight:"semibold",tagName:"h2"})))),be.log_id?m.React.createElement(b.A,{container:!0,alignItems:"flex-start",elementType:"div",justifyContent:"flex-start",type:"fluid",wrap:!ee},m.React.createElement(b.A,{item:!0,elementType:"div",customAttributes:{style:{flex:ee?"auto":"0 0 100%"}}},m.React.createElement(f.A,{customAttributes:{title:$e},icon:"left-arrow",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",onClick:function(){var e;if("activity-log"===(null==D||null===(e=D.state)||void 0===e?void 0:e.previous))T(-1);else{var t=new URLSearchParams(D.search),n=O.nav_item_param_key||"tab";t.set(n,"activity-log"),t.delete("event_id");var a=H(H({},D),{},{search:"?".concat(t.toString())});T(a,{state:{previous:"log-details"}})}},size:"size-height-m",spacing:[0,4,4,0],type:"icon-white"}),m.React.createElement(f.A,{icon:"mail",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:Fe,onClick:function(){Q({date:be.date,isHtml:be.is_html,id:be.log_id,fromHash:be.fromHash,from:be.from,to:be.to,title:be.subject}),q(!0)},spacing:[0,4,4,0],size:"size-height-m",type:"white",disabled:!bt.gravitysmtp_view_email_log_preview}),m.React.createElement(f.A,{icon:"paper-plane",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:Ue,onClick:At,size:"size-height-m",spacing:[0,4,4,0],type:"white",disabled:!be.can_resend||le}),m.React.createElement(f.A,{icon:"trash",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:Ve,onClick:function(){I(!0),$(be.log_id)},size:"size-height-m",spacing:[0,0,4,0],type:"amaranth-red",disabled:!bt.gravitysmtp_delete_email_log_details})),m.React.createElement(b.A,{item:!0,elementType:"div",customAttributes:{style:{flex:"none"}}},m.React.createElement(f.A,{customAttributes:{title:Ze},disabled:null===be.next_id||ie,icon:"left-arrow",iconPrefix:"gravitysmtp-admin-icon",onClick:function(){ve(H(H({},(0,p.K_)()),{},{event_id:be.next_id}))},size:"size-height-s",spacing:[0,2,0,0],type:"icon-white"}),m.React.createElement(f.A,{customAttributes:{title:Xe},disabled:null===be.prev_id||ie,icon:"right-arrow",iconPrefix:"gravitysmtp-admin-icon",onClick:function(){ve(H(H({},(0,p.K_)()),{},{event_id:be.prev_id}))},size:"size-height-s",type:"icon-white"}))):m.React.createElement(x.A,{theme:"cosmos",type:"error",customIconPrefix:"gravitysmtp-admin-icon",content:Ge,spacing:[6,0,6,0]}))},Rt=function(e){return m.React.createElement(w.A,(0,i.A)({customClasses:["gravitysmtp-log-details__secondary-box-entry"],size:"text-sm"},e))},Et=function e(t){var n=t.id;return t.data.map((function(t,a){var i="".concat(n,"-").concat(a);return Array.isArray(t)?m.React.createElement(e,{key:i,id:i,data:t}):(0,p.Gv)(t)?m.React.createElement(wt,{key:i,id:i,data:t,isTopLevel:!1}):m.React.createElement(Rt,{key:i,content:t,spacing:4})}))},wt=function e(t){var n=t.id,a=t.data,i=t.isTopLevel;return Object.keys(a).map((function(t,r){var o=a[t],c="".concat(n,"-").concat(t,"-").concat(r);return Array.isArray(o)?m.React.createElement(Et,{key:c,id:c,data:o}):(0,p.Gv)(o)?m.React.createElement(y.A,{key:c,spacing:4},m.React.createElement(w.A,{customClasses:["gravitysmtp-log-details__secondary-box-entry"],content:t,size:"text-sm",weight:"medium"}),m.React.createElement(e,{id:c,data:o,isTopLevel:!1})):i?m.React.createElement(y.A,{key:c,spacing:4},m.React.createElement(w.A,{customClasses:["gravitysmtp-log-details__secondary-box-entry"],content:t,size:"text-sm",weight:"medium"}),m.React.createElement(Rt,{content:o})):m.React.createElement(Rt,{key:c,content:"".concat(t,": ").concat(o)})}))},kt=function(e){var t=e.id,n=e.data,a=e.isLast,i=null;return i=Array.isArray(n)?m.React.createElement(Et,{id:t,data:n}):(0,p.Gv)(n)?m.React.createElement(wt,{id:t,data:n,isTopLevel:!0}):m.React.createElement(Rt,{content:n}),m.React.createElement(R.A,{collapsed:"headers"===t,collapsible:"headers"===t,contentId:"gravitysmtp-log-details__secondary-box-".concat(t),customClasses:["gravitysmtp-log-details__secondary-box-".concat(t)],HeaderContent:function(){var e,n;return"headers"===t?m.React.createElement(w.A,{content:(null==L||null===(e=L.log_detail)||void 0===e?void 0:e.secondary_box_headers_heading)||"",size:"text-md",weight:"medium",tagName:"span"}):m.React.createElement(h.A,{content:(null==L||null===(n=L.log_detail)||void 0===n?void 0:n.secondary_box_log_heading)||"",size:"text-md",weight:"medium",tagName:"h3"})},i18n:{collapsedAriaLabel:mt,expandedAriaLabel:gt},collapsibleIconPrefix:"gravitysmtp-admin-icon",spacing:a?"":6},i)},Ct=function(){return m.React.createElement(h.A,{content:tt,size:"text-lg",weight:"medium",tagName:"h2"})},zt=function(){var e=Object.keys(he).filter((function(e){var t=he[e];return Array.isArray(t)?!!t.length:(0,p.Gv)(t)?!(0===Object.keys(t).length&&t.constructor===Object):!!t}));return m.React.createElement(R.A,{customClasses:["gravitysmtp-log-details__secondary-box"],HeaderContent:Ct},e.map((function(t,n){return m.React.createElement(kt,{key:t,id:t,data:he[t],isLast:n===e.length-1})})))},Ot=function(){return m.React.createElement(h.A,{content:at,size:"text-lg",weight:"medium",tagName:"h2"})},Pt=function(){return m.React.createElement(m.React.Fragment,null,m.React.createElement(R.A,{customClasses:["gravitysmtp-log-details__sidebar-box"],HeaderContent:Ot},B.map((function(e,t){var n,a=e.key,r=e.icon;return m.React.createElement(y.A,{key:a,customClasses:["gravitysmtp-log-details__sidebar-item"],display:"flex",spacing:0!==t?[3,0,0,0]:void 0},m.React.createElement(A.A,{icon:r,iconPrefix:"gravitysmtp-admin-icon",customClasses:["gravitysmtp-log-details__sidebar-item-icon"],spacing:[0,1,0,0]}),m.React.createElement(w.A,{content:null==L||null===(n=L.log_detail)||void 0===n?void 0:n["sidebar_".concat(a,"_label")],customClasses:["gravitysmtp-log-details__sidebar-item-label"],size:"text-sm",spacing:[0,1,0,0],weight:"regular"}),"status"===a?m.React.createElement(E.A,(0,i.A)({},(null==be?void 0:be[a])||{},{customClasses:["gravitysmtp-log-details__sidebar-item-value"]})):m.React.createElement(w.A,{color:"comet",content:null==be?void 0:be[a],customClasses:["gravitysmtp-log-details__sidebar-item-value"],size:"text-sm"}))}))),null!=be&&be.has_attachment?m.React.createElement(R.A,{HeaderContent:function(){return m.React.createElement(h.A,{content:rt,size:"text-lg",weight:"medium",tagName:"h2"})},spacing:[6,0,0,0]},be.attachments.map((function(e,t){return m.React.createElement(y.A,{key:"attachment-".concat(t),customClasses:["gravitysmtp-log-details__sidebar-item"],display:"flex",spacing:0!==t?[3,0,0,0]:void 0},m.React.createElement(A.A,{icon:"paper-clip",iconPrefix:"gravitysmtp-admin-icon",customClasses:["gravitysmtp-log-details__sidebar-item-icon"],spacing:[0,1,0,0]}),m.React.createElement(w.A,{content:e.file_extension.toUpperCase(),customClasses:["gravitysmtp-log-details__sidebar-item-label"],size:"text-sm",spacing:[0,1,0,0],weight:"regular"}),m.React.createElement(w.A,{color:"comet",content:e.file_name,customClasses:["gravitysmtp-log-details__sidebar-item-value"],size:"text-sm"}))}))):null)};return bt.gravitysmtp_view_email_log_details&&m.React.createElement("div",{className:"gravitysmtp-activity-log-app__log-details-wrapper",ref:t},m.React.createElement(g.e7,{condition:be.log_id,wrapper:function(e){return m.React.createElement(k.A,{customClasses:["gravitysmtp-activity-log-app__log-details"],Header:xt,SecondaryContentChildren:zt,SideBarChildren:Pt,sidebarMobilePosition:"start"},e)}},be.log_id?null:m.React.createElement(xt,null),m.React.createElement(R.A,{HeaderContent:function(){return m.React.createElement(m.React.Fragment,null,m.React.createElement(h.A,{content:Qe,size:"text-lg",weight:"medium"}))},customClasses:["gravitysmtp-log-details__main-box"]},V.map((function(e){var t;return m.React.createElement(y.A,{key:e,customClasses:["gravitysmtp-log-details__main-box-item"]},m.React.createElement(h.A,{content:null==L||null===(t=L.log_detail)||void 0===t?void 0:t["main_box_".concat(e,"_label")],customClasses:["gravitysmtp-log-details__main-box-heading"],size:"text-sm",weight:"semibold"}),m.React.createElement(w.A,{content:null==be?void 0:be[e],customClasses:["gravitysmtp-log-details__main-box-entry"],size:"text-sm"}))})))))}));$.propTypes={data:m.PropTypes.object,i18n:m.PropTypes.object},$.displayName="LogDetailsScreen";var q=$},36770:function(e,t,n){n.d(t,{A:function(){return s}});var a,i,r=n(40450),o=n.n(r),c=(null===(a=(0,n(71376).zj)(o(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},l=(null==c||null===(i=c.feature_flags)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.statuses)||{};function s(){return l[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""]||!1}}}]);