"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[6963],{1057:function(e,t,n){n.r(t);var a=n(9801),r=n(5720),i=n(5210),s=n(9509),c=n.n(s),u=n(9608),o=n.n(u),l=n(7784),d=n(760),p=n(4070),f=n(9805),_=n(7343),g=n(6192),m=n(6493),v=n(7024),y=n(4237),w=n(5212),b=n(1047),h=n(375),x=n(6901),z=n(7066),k=n(2077),Z=n(9208),R=l.React.useEffect,E=l.React.useRef,S=l.React.useState;t.default=function(e){var t,n,s,u,C=e.common,N=e.data,B=e.endpoints,A=e.i18n,O=(0,b.default)((function(e){return e.activeStep})),P=(0,b.default)((function(e){return e.isAnimatedIn})),J=(0,b.default)((function(e){return e.isOpen})),D=(0,b.default)((function(e){return e.setActiveStep})),I=(0,b.default)((function(e){return e.setActiveNavBarStepNext})),T=(0,b.default)((function(e){return e.setShouldRedirect})),L=(0,b.default)((function(e){return e.setHasDebugError})),j=A.debug_messages,F=void 0===j?{}:j,M=F.checking_license_key,U=F.checking_license_key_error,W=F.saving_should_display_error,H=F.saving_license_key_error,K=F.updating_usage_analytics_error,V=F.saving_license_key,q=F.setting_should_display_false,G=F.starting_subsequent_run,X=F.updating_usage_analytics,$=A.setup_wizard_welcome_title,Q=A.setup_wizard_welcome_copy,Y=(A.setup_wizard_welcome_list_01,A.setup_wizard_welcome_list_02,A.setup_wizard_welcome_list_03,A.setup_wizard_welcome_list_04,A.setup_wizard_get_started),ee=A.setup_wizard_verify_license,te=A.setup_wizard_checking_license,ne=A.setup_wizard_license_input_label,ae=A.setup_wizard_license_input_placeholder,re=N.import_data_possible,ie=N.license_key_is_valid,se=N.should_display,ce=(null==C?void 0:C.i18n)||{},ue=ce.general_settings_usage_analytics_label,oe=ce.general_settings_usage_analytics_help_text,le=(null==C?void 0:C.data)||{},de=le.param_keys,pe=le.usage_analytics_enabled,fe=le.usage_analytics_link,_e=re?2:3,ge=(0,y.Ds)(),me=se&&ie&&(null==N?void 0:N.license_key)||"",ve=S(!1),ye=(0,i.Z)(ve,2),we=ye[0],be=ye[1],he=S(me),xe=(0,i.Z)(he,2),ze=xe[0],ke=xe[1],Ze=S(!1),Re=(0,i.Z)(Ze,2),Ee=Re[0],Se=Re[1],Ce=(0,d.aM)(pe),Ne=(0,i.Z)(Ce,2),Be=Ne[0],Ae=Ne[1],Oe=(null==B||null===(t=B.save_plugin_settings)||void 0===t?void 0:t.action)||"",Pe=(null==B||null===(n=B.save_plugin_settings)||void 0===n?void 0:n.nonce)||"",Je=(null==B||null===(s=B.check_license)||void 0===s?void 0:s.action)||"",De=(null==B||null===(u=B.check_license)||void 0===u?void 0:u.nonce)||"",Ie=E();R((function(){1===O&&Ie.current&&Ie.current.focus()}),[O]),R((function(){var e=function(e){var t;(null===(t=e.detail)||void 0===t?void 0:t.key)===de.usage_analytics&&Ae(e.detail.value)};return document.addEventListener("gravitysmtp/setting-updated",e),function(){document.removeEventListener("gravitysmtp/setting-updated",e)}})),R((function(){J&&1===O&&!se&&(0,k.Z)((0,h.gB)(G,JSON.stringify({licenseKeyIsValid:ie,importDataPossible:re,nextStep:_e,activeStep:O,currentStep:1})),"info")}),[J]);var Te={ref:(0,d.P5)(1===O&&P),className:(0,l.classnames)((0,r.Z)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(1),!0)),"aria-hidden":1!==O},Le=function(){var e=(0,a.Z)(c().mark((function e(){var t,n,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n={action:Oe,security:Pe,key:"setup_wizard_should_display",value:!1},e.next=6,(0,k.Z)((0,h.gB)(q,JSON.stringify((0,Z.Z)(["security"],n))),"info");case 6:return e.next=8,(0,p.v_)({endpoint:o(),body:n});case 8:if(null!=(a=e.sent)&&null!==(t=a.data)&&void 0!==t&&t.success){e.next=14;break}return e.next=13,(0,k.Z)((0,h.gB)(W,JSON.stringify(null==a?void 0:a.error)),"error");case 13:L(!0);case 14:e.next=22;break;case 16:return e.prev=16,e.t0=e.catch(2),e.next=21,(0,k.Z)((0,h.gB)(W,JSON.stringify(e.t0)),"error");case 21:L(!0);case 22:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=(0,a.Z)(c().mark((function e(){var t,n,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={action:Oe,security:Pe,key:"license_key",value:ze.trim()},e.next=4,(0,k.Z)((0,h.gB)(V,JSON.stringify((0,Z.Z)(["security","license_key"],n))),"info");case 4:return e.next=6,(0,p.v_)({endpoint:o(),body:n});case 6:if(null!=(a=e.sent)&&null!==(t=a.data)&&void 0!==t&&t.success){e.next=12;break}return e.next=11,(0,k.Z)((0,h.gB)(H,JSON.stringify(null==a?void 0:a.error)),"error");case 11:L(!0);case 12:e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(0),e.next=19,(0,k.Z)((0,h.gB)(H,JSON.stringify(e.t0)),"error");case 19:L(!0);case 20:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=(0,a.Z)(c().mark((function e(t){var n,a,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={action:Oe,security:Pe,key:de.usage_analytics,value:t?"true":"false"},e.next=4,(0,k.Z)((0,h.gB)(X,JSON.stringify((0,Z.Z)(["security"],a))),"info");case 4:return e.next=6,(0,p.v_)({endpoint:o(),body:a});case 6:if(null!=(r=e.sent)&&null!==(n=r.data)&&void 0!==n&&n.success){e.next=14;break}return e.next=11,(0,k.Z)((0,h.gB)(K,JSON.stringify(null==r?void 0:r.error)),"error");case 11:L(!0),e.next=16;break;case 14:C.data.usage_analytics_enabled=t,Ae(t);case 16:e.next=24;break;case 18:return e.prev=18,e.t0=e.catch(0),e.next=23,(0,k.Z)((0,h.gB)(K,JSON.stringify(e.t0)),"error");case 23:L(!0);case 24:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),Me={initialChecked:pe,externalChecked:Be,externalControl:!0,labelAttributes:{label:ue},helpTextAttributes:{content:l.React.createElement(d.ji,{closingSymbol:"}}",openingSymbol:"{{",text:oe,tokens:[{component:x.Z,key:"learn_link",props:{href:fe,size:"text-xs",target:"_blank"}}]}),spacing:[4,0,0,0]},helpTextWidth:"full",labelPosition:"left",id:"usage_analytics_wizard",name:de.usage_analytics,onChange:Fe,size:"size-m",width:"full"},Ue=function(){var e=(0,a.Z)(c().mark((function e(){var t,n,a,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={action:Je,security:De,license_key:ze.trim()},e.next=4,(0,k.Z)((0,h.gB)(M,JSON.stringify((0,Z.Z)(["security","license_key"],n))),"info");case 4:return e.next=6,(0,p.v_)({endpoint:o(),body:n});case 6:if(a=e.sent,be(!1),null!=a&&null!==(t=a.data)&&void 0!==t&&t.success){e.next=16;break}return r=(0,h.sO)(a.error.detail.data)?JSON.parse(a.error.detail.data):"",e.next=12,(0,k.Z)((0,h.gB)(U,JSON.stringify(null==a?void 0:a.error)),"error");case 12:L(!0),ge(r.data,"error"),e.next=20;break;case 16:Se(!0),Le().then((function(){je()})),T(!1),setTimeout((function(){D(_e),I(),setTimeout((function(){Se(!1)}),300)}),1e3);case 20:e.next=28;break;case 22:return e.prev=22,e.t0=e.catch(0),e.next=27,(0,k.Z)((0,h.gB)(U,JSON.stringify(e.t0)),"error");case 27:L(!0);case 28:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}();return l.React.createElement("div",Te,l.React.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},l.React.createElement(l.SimpleBar,{scrollableNodeProps:{ref:Ie}},l.React.createElement("div",{className:"gravitysmtp-setup-wizard__content"},l.React.createElement(f.Z,{customClasses:["gravitysmtp-setup-wizard__inner-content"],x:368},l.React.createElement(d.Uo,{delay:200,transitionDuration:800},l.React.createElement(f.Z,{customClasses:["gravitysmtp-setup-wizard__logo-container"],spacing:12},l.React.createElement(w.GravitySMTPFullLogo,null)),l.React.createElement(f.Z,{customClasses:["gravitysmtp-setup-wizard__heading-container"]},l.React.createElement(g.Z,{content:$,size:"display-lg",spacing:6,tagName:"h2",weight:"semibold"})),l.React.createElement(f.Z,{customClasses:["gravitysmtp-setup-wizard__body-container"]},l.React.createElement(v.Z,{content:Q,spacing:8})),l.React.createElement(f.Z,{customClasses:["gravitysmtp-setup-wizard__footer-container"],spacing:8},ie?l.React.createElement(_.Z,{customClasses:["gravitysmtp-setup-wizard__get-started-button"],size:"size-height-xl",icon:"check-circle",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading",label:Y,type:"primary-new",width:"full",onClick:function(){se&&Le().then((function(){je()})),T(!1),D(_e),I()}}):l.React.createElement(l.React.Fragment,null,l.React.createElement(m.Z,{customAttributes:{disabled:we},customClasses:["gravitysmtp-setup-wizard__license-input"],id:"gravitysmtp-setup-wizard__license-input",labelAttributes:{label:ne},onChange:ke,placeholder:ae,size:"size-xl",spacing:5,textSecurity:"disc",value:ze}),l.React.createElement(_.Z,{customClasses:["gravitysmtp-setup-wizard__get-started-button"],size:"size-height-xl",icon:"check-circle",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading",label:ee,active:we,activeType:"loader",disabled:we||Ee,activeText:te,type:Ee?"apple-green":"primary-new",width:"full",onClick:(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return be(!0),e.next=3,Ue();case 3:case"end":return e.stop()}}),e)})))}))),l.React.createElement(f.Z,null,l.React.createElement(z.Z,Me))))))))}},2142:function(e,t,n){n.r(t);var a=n(5720),r=n(9801),i=n(6588),s=n(5210),c=n(9509),u=n.n(c),o=n(9608),l=n.n(o),d=n(7784),p=n(760),f=n(4070),_=n(375),g=n(9805),m=n(6192),v=n(7024),y=n(5271),w=n(5806),b=n(5212),h=n(2077),x=n(9208),z=n(1047),k=d.React.useEffect,Z=d.React.useRef,R=d.React.useState;t.default=function(e){var t,n,c=e.data,o=e.endpoints,E=e.i18n,S=E.debug_messages,C=void 0===S?{}:S,N=C.migrating_data,B=C.migrating_data_error,A=E.setup_wizard_next_button,O=E.setup_wizard_import_data_title,P=E.setup_wizard_import_data_copy,J=c.connectors_to_migrate,D=c.import_data,I=c.integrations,T=(0,z.default)((function(e){return e.activeStep})),L=(0,z.default)((function(e){return e.isAnimatedIn})),j=(0,z.default)((function(e){return e.importPlugin})),F=(0,z.default)((function(e){return e.setActiveStepNext})),M=(0,z.default)((function(e){return e.setHasDebugError})),U=(0,z.default)((function(e){return e.setImportPlugin})),W=(0,z.default)((function(e){return e.setIntegrationSettingsFormData})),H=(0,z.default)((function(e){return e.setSettingsUpdated})),K=(null==o||null===(t=o.migrate_settings)||void 0===t?void 0:t.action)||"",V=(null==o||null===(n=o.migrate_settings)||void 0===n?void 0:n.nonce)||"",q=R(!1),G=(0,s.Z)(q,2),X=G[0],$=G[1],Q=function e(t,n,a){t.forEach((function(t){var r;(null===(r=t.props)||void 0===r?void 0:r.name)===n&&(t.props.value=a),t.fields&&e(t.fields,n,a)}))},Y=function(e,t){e.forEach((function(e){var n=t[e.id];"object"!==(0,i.Z)(n)||null===n||Array.isArray(n)||Object.entries(n).forEach((function(t){var n=(0,s.Z)(t,2),a=n[0],r=n[1];e.settings&&Array.isArray(e.settings.fields)&&Q(e.settings.fields,a,r)}))}))},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(e).forEach((function(e){var t=(0,s.Z)(e,2),n=t[0],a=t[1];"object"===(0,i.Z)(a)&&null!==a&&!Array.isArray(a)&&Object.keys(a).length>0&&Object.entries(a).forEach((function(e){var t=(0,s.Z)(e,2),a=t[0],r=t[1];W(n,a,r)}))}))},te=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,a,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={action:K,security:V,connectors:J},e.next=4,(0,h.Z)((0,_.gB)(N,JSON.stringify((0,x.Z)(["security"],n))),"info");case 4:return e.next=6,(0,f.v_)({endpoint:l(),body:n});case 6:if(a=e.sent,$(!1),null!=a&&null!==(t=a.data)&&void 0!==t&&t.success){e.next=15;break}return e.next=12,(0,h.Z)((0,_.gB)(B,JSON.stringify(null==a?void 0:a.error)),"error");case 12:M(!0),e.next=18;break;case 15:ee(null==a||null===(r=a.data)||void 0===r?void 0:r.data),Y(I,null==a||null===(i=a.data)||void 0===i?void 0:i.data),H();case 18:e.next=26;break;case 20:return e.prev=20,e.t0=e.catch(0),e.next=25,(0,h.Z)((0,_.gB)(B,JSON.stringify(e.t0)),"error");case 25:M(!0);case 26:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),ne=D.filter((function(e){return e.activated})).map((function(e){var t="import_data_".concat(e.id),n=b["".concat(e.logo,"Logo")];return{id:t,labelAttributes:{label:e.title},name:"import_data",type:"image",value:e.id,children:d.React.createElement(n,null)}})),ae=Z();k((function(){2===T&&ae.current&&ae.current.focus()}),[T]);var re,ie={ref:(0,p.P5)(2===T&&L),className:(0,d.classnames)((0,a.Z)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(2),!0)),"aria-hidden":2!==T};return d.React.createElement("div",ie,d.React.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},d.React.createElement(d.SimpleBar,{scrollableNodeProps:{ref:ae}},d.React.createElement("div",{className:"gravitysmtp-setup-wizard__content"},d.React.createElement(g.Z,{customClasses:["gravitysmtp-setup-wizard__content-header"],spacing:6},d.React.createElement(m.Z,{content:O,spacing:4,size:"display-sm",tagName:"h2",weight:"medium"}),d.React.createElement(v.Z,{content:P,spacing:8})),d.React.createElement(y.Z,{customClasses:["gravitysmtp-setup-wizard__content-cards","gform-grid--container","gform-grid--wrap","gform-grid--row-spacing-6","gform-grid--col-spacing-6"],data:ne,id:"import_data",inputType:"radio",onChange:function(e,t){return U(t.target.value)},useWrapper:!0,wrapperAttributes:{customClasses:["gravitysmtp-setup-wizard__content-card","gform-grid--item"]}}),d.React.createElement(w.default,{i18n:E,nextButtonCustomAttributes:{disabled:!j||X,onClick:(re=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),e.next=3,te();case 3:F();case 4:case"end":return e.stop()}}),e)}))),function(){return re.apply(this,arguments)}),active:X,activeType:"loader",activeText:A,icon:X?"":"arrow-narrow-right",lockSize:!0}})))))}},2867:function(e,t,n){n.r(t);var a=n(5720),r=n(5210),i=n(7784),s=n(760),c=n(9805),u=n(6192),o=n(7024),l=n(5271),d=n(5806),p=n(5212),f=n(1047),_=i.React.useEffect,g=i.React.useRef;t.default=function(e){var t=e.data,n=e.i18n,m=n.setup_wizard_integration_title,v=n.setup_wizard_integration_copy_1,y=(n.setup_wizard_integration_copy_2,t.import_data_possible),w=t.integrations,b=(0,f.default)((function(e){return e.activeStep})),h=(0,f.default)((function(e){return e.isAnimatedIn})),x=(0,f.default)((function(e){return e.integration})),z=(0,f.default)((function(e){return e.integrationSettingsFormData})),k=(0,f.default)((function(e){return e.setIntegration})),Z=(0,f.default)((function(e){return e.setActiveStep})),R=(0,f.default)((function(e){return e.setActiveNavBarStep})),E=(0,f.default)((function(e){return e.setActiveNavBarStepNext})),S=(0,f.default)((function(e){return e.setActiveNavBarStepPrevious})),C=(0,f.default)((function(e){return e.setIntegrationSetupAction})),N=(0,f.default)((function(e){return e.setSetupStatus})),B=w.filter((function(e){var t;return!(null!=e&&null!==(t=e.data)&&void 0!==t&&t.disabled)})).map((function(e){var t="integration_".concat(e.id),n=null!=e&&e.full_logo?p["".concat(e.full_logo,"Logo")]:null;return{id:t,labelAttributes:{label:e.title},name:"integration",type:"image",value:e.id,children:n?i.React.createElement(n,null):null}})),A=g();_((function(){3===b&&A.current&&A.current.focus()}),[b]);var O={ref:(0,s.P5)(3===b&&h),className:(0,i.classnames)((0,a.Z)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(3),!0)),"aria-hidden":3!==b};return i.React.createElement("div",O,i.React.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},i.React.createElement(i.SimpleBar,{scrollableNodeProps:{ref:A}},i.React.createElement("div",{className:"gravitysmtp-setup-wizard__content"},i.React.createElement(c.Z,{customClasses:["gravitysmtp-setup-wizard__content-header"],spacing:6},i.React.createElement(u.Z,{content:m,spacing:4,size:"display-sm",tagName:"h2",weight:"medium"}),i.React.createElement(o.Z,{content:v,spacing:8})),i.React.createElement(l.Z,{customClasses:["gravitysmtp-setup-wizard__content-cards","gform-grid--container","gform-grid--wrap","gform-grid--row-spacing-6","gform-grid--col-spacing-6"],data:B,id:"integrations",inputType:"radio",initialValue:function(){for(var e=0,t=Object.entries(z);e<t.length;e++){var n=(0,r.Z)(t[e],2),a=n[0];if(n[1].enabled)return a}return""}(),onChange:function(e,t){return k(t.target.value)},useWrapper:!0,wrapperAttributes:{customClasses:["gravitysmtp-setup-wizard__content-card","gform-grid--item"]}}),i.React.createElement(d.default,{i18n:n,backButtonCustomAttributes:{onClick:function(){Z(y?2:1),S()}},skipButtonCustomAttributes:{onClick:function(){var e=y?5:4;N("skipped"),C("skip"),Z(5),R(e)}},nextButtonCustomAttributes:{disabled:!x,onClick:function(){C("next"),Z(4),E()}}})))))}},5155:function(e,t,n){n.r(t);var a=n(9801),r=n(5720),i=n(5210),s=n(9509),c=n.n(s),u=n(9608),o=n.n(u),l=n(7784),d=n(760),p=n(4070),f=n(375),_=n(9805),g=n(7343),m=n(6192),v=n(7024),y=n(2077),w=n(9208),b=n(5212),h=n(1047),x=l.React.useEffect,z=l.React.useRef,k=l.React.useState;t.default=function(e){var t=e.common,n=e.data,s=e.i18n,u=s.setup_wizard_back_button,Z=s.setup_wizard_dashboard_button,R=s.setup_wizard_setup_skipped_title,E=s.setup_wizard_setup_skipped_copy,S=s.setup_wizard_setup_success_title,C=s.setup_wizard_setup_success_copy,N=s.setup_wizard_setup_failed_title,B=s.setup_wizard_setup_failed_copy,A=s.setup_wizard_activate_integration_button,O=n.import_data_possible,P=n.integrations,J=t.endpoints,D=(void 0===J?{}:J).save_connector_settings,I=void 0===D?{}:D,T=I.action,L=void 0===T?"":T,j=I.nonce,F=void 0===j?"":j,M=t.i18n,U=(void 0===M?{}:M).debug_messages,W=void 0===U?{}:U,H=W.saving_integration_settings,K=void 0===H?"":H,V=W.saving_integration_settings_error,q=void 0===V?"":V,G=(0,h.default)((function(e){return e.activeStep})),X=(0,h.default)((function(e){return e.isAnimatedIn})),$=(0,h.default)((function(e){return e.integrationSetupAction})),Q=(0,h.default)((function(e){return e.setupStatus})),Y=(0,h.default)((function(e){return e.integration})),ee=(0,h.default)((function(e){return e.closeDialog})),te=(0,h.default)((function(e){return e.setActiveStep})),ne=(0,h.default)((function(e){return e.setActiveNavBarStep})),ae=(0,h.default)((function(e){return e.setSettingsUpdated})),re=(0,h.default)((function(e){return e.setHasDebugError})),ie=k(!1),se=(0,i.Z)(ie,2),ce=se[0],ue=se[1],oe="failed"===Q?b.MailFailedBg:b.MailSuccessBg,le="",de="",pe="primary-new";switch(Q){case"skipped":le=R,de=E;break;case"success":le=S,de=C,pe="white";break;case"failed":le=N,de=B}var fe=z();x((function(){5===G&&fe.current&&fe.current.focus()}),[G]);var _e={ref:(0,d.P5)(5===G&&X),className:(0,l.classnames)((0,r.Z)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(5),!0)),"aria-hidden":5!==G},ge=P.reduce((function(e,t){return e||t.id!==Y?e:t.title}),""),me=(0,f.gB)(A,ge),ve=P.filter((function(e){return!(e.data&&e.data.disabled)})).map((function(e){return e.id})),ye=function(){var e=(0,a.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:L,security:F,connector_type:t,no_validate:!0,settings:{is_primary:!1}},e.next=3,(0,y.Z)((0,f.gB)(K,t,JSON.stringify((0,w.Z)(["security"],n))),"info");case 3:e.prev=3,(0,p.v_)({endpoint:o(),body:n}),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(3),e.next=12,(0,y.Z)((0,f.gB)(q,t,JSON.stringify(e.t0)),"error");case 12:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=(0,a.Z)(c().mark((function e(){var t,n,a,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ve.filter((function(e){return e!==Y})).map(ye),e.next=3,Promise.all(t);case 3:return n={action:L,security:F,connector_type:Y,settings:{enabled:!0,is_primary:!0}},e.next=6,(0,y.Z)((0,f.gB)(K,Y,JSON.stringify((0,w.Z)(["security"],n))),"info");case 6:return e.prev=6,e.next=9,(0,p.v_)({endpoint:o(),body:n});case 9:if(null!=(r=e.sent)&&null!==(a=r.data)&&void 0!==a&&a.success){e.next=17;break}return e.next=14,(0,y.Z)((0,f.gB)(q,Y,JSON.stringify(null==r?void 0:r.error)),"error");case 14:re(!0),e.next=18;break;case 17:ae();case 18:e.next=26;break;case 20:return e.prev=20,e.t0=e.catch(6),e.next=25,(0,y.Z)((0,f.gB)(q,Y,JSON.stringify(e.t0)),"error");case 25:re(!0);case 26:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(){return e.apply(this,arguments)}}();return l.React.createElement("div",_e,l.React.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},l.React.createElement(l.SimpleBar,{scrollableNodeProps:{ref:fe}},l.React.createElement("div",{className:"gravitysmtp-setup-wizard__content"},l.React.createElement(_.Z,{customClasses:["gravitysmtp-setup-wizard__screen-nav-buttons"],display:"flex",spacing:10},l.React.createElement(g.Z,{customClasses:["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--back"],icon:"arrow-narrow-left",iconPrefix:"gravitysmtp-admin-icon",label:u,size:"size-height-xl",type:"icon-white",onClick:function(){var e=3-("skip"===$?1:0)+(O?1:0);te("skip"===$?3:4),ne(e)}}),l.React.createElement(g.Z,{customClasses:["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--skip"],icon:"arrow-narrow-right",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"trailing",label:Z,size:"size-height-xl",type:pe,onClick:function(){return ee()}}),"success"===Q&&l.React.createElement(g.Z,{active:ce,activeType:"loader",customClasses:["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--next"],label:me,lockSize:!0,size:"size-height-xl",type:"primary-new",onClick:(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),e.next=3,we();case 3:(0,f.X$)({event:"gravitysmtp/page_loader/active",native:!1,data:!0}),ee();case 5:case"end":return e.stop()}}),e)})))})),l.React.createElement(_.Z,{customClasses:["gravitysmtp-setup-wizard__content-header"],spacing:4},l.React.createElement(m.Z,{content:le,spacing:4,size:"display-sm",tagName:"h2",weight:"medium"}),l.React.createElement(v.Z,{content:de})),l.React.createElement(_.Z,{customClasses:["gravitysmtp-setup-wizard__content-body"]},l.React.createElement(oe,null))))))}},1868:function(e,t,n){n.r(t);var a=n(9801),r=n(5210),i=n(9509),s=n.n(i),c=n(9608),u=n.n(c),o=n(7784),l=n(4070),d=n(375),p=n(4237),f=n(7343),_=n(1480),g=n(7980),m=n(9805),v=n(4427),y=n(1057),w=n(2142),b=n(2867),h=n(8114),x=n(5155),z=n(1047),k=n(2077),Z=o.React.useState,R=o.React.useEffect,E=o.React.useRef;t.default=function(e){var t,n,i,c,S=Z(!0),C=(0,r.Z)(S,2),N=C[0],B=C[1],A=(0,z.default)((function(e){return e.innerDialogOpen})),O=(0,z.default)((function(e){return e.activeStep})),P=(0,z.default)((function(e){return e.activeNavBarStep})),J=(0,z.default)((function(e){return e.isOpen})),D=(0,z.default)((function(e){return e.settingsUpdated})),I=(0,z.default)((function(e){return e.shouldRedirect})),T=(0,z.default)((function(e){return e.hasDebugError})),L=(0,z.default)((function(e){return e.closeDialog})),j=(0,z.default)((function(e){return e.openDialog})),F=(0,z.default)((function(e){return e.setIsAnimatedIn})),M=(0,d.xK)(),U="gravitysmtp-settings"===(null==M?void 0:M.page)&&"integrations"===(null==M?void 0:M.tab),W=E(),H=e.data,K=H.admin_url,V=H.import_data_possible,q=H.integrations_url,G=H.license_key_is_valid,X=H.should_display,$=e.i18n.debug_messages,Q=(void 0===$?{}:$).starting_first_run,Y=e.common,ee=Y.data,te=void 0===ee?{}:ee,ne=Y.endpoints,ae=void 0===ne?{}:ne,re=(null==ae||null===(t=ae.save_plugin_settings)||void 0===t?void 0:t.action)||"",ie=(null==ae||null===(n=ae.save_plugin_settings)||void 0===n?void 0:n.nonce)||"",se=(null==ae||null===(i=ae.delete_debug_logs)||void 0===i?void 0:i.action)||"",ce=(null==ae||null===(c=ae.delete_debug_logs)||void 0===c?void 0:c.nonce)||"",ue=O;M["setup-wizard-page"]&&!V&&ue>=2&&(ue=O+1);var oe,le,de={closeOnMaskClick:!1,closeButtonTitle:e.i18n.setup_wizard_close_button,customCloseButtonClasses:["gravitysmtp-setup-wizard--exit-button"],customCloseButtonLabelAttributes:{className:(0,o.classnames)({"gform-button__icon":!0,"gravitysmtp-admin-icon":!0,"gravitysmtp-admin-icon--x":!0})},customWrapperClasses:["gravitysmtp-setup-wizard","gravitysmtp-setup-wizard--step-".concat(ue),"gravitysmtp-setup-wizard--inner-dialog-".concat(A)],customMaskClasses:[!N&&"gravitysmtp-setup-wizard--not-fullscreen"],id:"gravitysmtp-setup-wizard",isOpen:J,lockBody:!0,onOpen:(le=(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,te.debug_log_enabled=!0,e.next=6,(0,l.v_)({endpoint:u(),body:{action:re,security:ie,key:"debug_log_enabled",value:!0}});case 6:(0,k.Z)((0,d.gB)(Q,JSON.stringify({activeStep:O,importDataPossible:V,licenseKeyIsValid:G})),"info"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(){return le.apply(this,arguments)}),onOpenAfterAnimation:function(){F(!0)},onClose:(oe=(0,a.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=new URL(window.location.href)).searchParams.delete("setup-wizard-page"),history.pushState({},"",t.toString()),T||!X){e.next=16;break}return e.prev=5,te.debug_log_enabled=!1,e.next=9,(0,l.v_)({endpoint:u(),body:{action:re,security:ie,key:"debug_log_enabled",value:!1}});case 9:return e.next=11,(0,l.v_)({endpoint:u(),body:{action:se,security:ce,all_logs:"1"}});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5);case 16:if(!(W.current&&U&&D)){e.next=19;break}return window.location.reload(),e.abrupt("return");case 19:I||(document.body.classList.remove("gravitysmtp-apps--hidden"),!U&&W.current&&(window.location.href=q));case 20:case"end":return e.stop()}}),e,null,[[5,13]])}))),function(){return oe.apply(this,arguments)}),onCloseAfterAnimation:function(){W.current&&U&&D||(I||U)&&(L(),F(!1),I&&(window.location.href=K))},padContent:!1,position:N?"fixed":"absolute",mode:"container",zIndex:100001};R((function(){var e=function(){j()};return document.addEventListener("gravitysmtp/setup_wizard/open",e),function(){document.removeEventListener("gravitysmtp/setup_wizard/open",e)}}),[]),R((function(){J&&document.body.classList.add("gravitysmtp-setup-wizard--open")}),[J]),R((function(){W.current||(W.current=!0)}),[]);var pe=V?5:4;return o.React.createElement(p.wT,{defaultSettings:{errorIconAttributes:{icon:"exclamation-simple",iconPrefix:"gravitysmtp-admin-icon"},successIconAttributes:{icon:"correct",iconPrefix:"gravitysmtp-admin-icon"}}},o.React.createElement(_.Z,de,o.React.createElement(g.Z,{customClasses:["gravitysmtp-setup-wizard__nav-bar"]},o.React.createElement(v.Z,{activeStep:P,customClasses:["gravitysmtp-setup-wizard__steps"],icon:"check",iconPrefix:"gravitysmtp-admin-icon",numSteps:pe,spacing:[8,0,0]})),o.React.createElement(m.Z,{x:1030,customClasses:["gravitysmtp-setup-wizard__content-mask"],setDisplay:!1}),!A&&o.React.createElement(f.Z,{ariaLabel:"Toggle Fullscreen",circular:!0,customClasses:["gravitysmtp-setup-wizard__fullscreen-toggle"],icon:N?"contract":"expand",iconPrefix:"gravitysmtp-admin-icon",onClick:function(){B(!N)},type:"white"}),o.React.createElement(y.default,e),o.React.createElement(w.default,e),o.React.createElement(b.default,e),o.React.createElement(h.default,e),o.React.createElement(x.default,e)))}}}]);