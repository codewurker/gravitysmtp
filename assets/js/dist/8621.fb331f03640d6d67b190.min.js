"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[8621],{68621:function(e,t,a){a.r(t);var n=a(71860),i=a(88856),r=a(90455),c=a(8140),o=a(78564),l=a.n(o),s=a(27122),d=a.n(s),m=a(97867),u=a(60177),g=a(13296),v=a(71376),p=a(84860),_=a(30242),y=a(80509),f=a(29549),b=a(5529),h=a(25980),x=a(82263),A=a(13379),R=a(43632),E=a(66598),w=a(22397),k=a(83707),C=a(93313),z=a(98895);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,i.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j=m.React.forwardRef,L=m.React.useEffect,S=m.React.useState,N=m.React.useRef,T=m.ReactRouter.useLocation,D=m.ReactRouter.useNavigate,H=m.ReactRouter.useSearchParams,I=["date","from","to","subject"],G=[{key:"status",icon:"exclamation-circle"},{key:"service",icon:"cloud1"},{key:"log_id",icon:"document-text"},{key:"source",icon:"cog"}],J=j((function(e,t){var a,i,o=e.common,s=void 0===o?{}:o,P=e.data,j=void 0===P?{}:P,J=e.endpoints,F=void 0===J?{}:J,K=e.i18n,M=void 0===K?{}:K,U=D(),V=T(),B=(0,z.default)((function(e){return e.setDeleteEventDialogOpen})),q=(0,z.default)((function(e){return e.setDeletingEventId})),Q=(0,z.default)((function(e){return e.setViewEmailDialogOpen})),W=(0,z.default)((function(e){return e.setViewEmailEventProperties})),X=(0,z.default)((function(e){return e.setLogDetail})),Y=window.matchMedia("(min-width: 640px)"),Z=S(Y.matches),$=(0,c.A)(Z,2),ee=$[0],te=$[1],ae=S(!1),ne=(0,c.A)(ae,2),ie=ne[0],re=ne[1],ce=S(!1),oe=(0,c.A)(ce,2),le=oe[0],se=oe[1],de=H(),me=(0,c.A)(de,2),ue=me[0],ge=me[1],ve=ue.get("event_id"),pe=N(),_e=(null==s||null===(a=s.endpoints)||void 0===a||null===(a=a.get_single_email)||void 0===a?void 0:a.action)||"",ye=(null==s||null===(i=s.endpoints)||void 0===i||null===(i=i.get_single_email)||void 0===i?void 0:i.nonce)||"",fe=(0,p.dh)();L((function(){var e=function(e){return te(e.matches)};return Y.addListener(e),function(){return Y.removeListener(e)}}),[Y]);var be=(0,z.default)((function(e){return e.logDetail})),he=(null==be?void 0:be.technical_information)||[],xe=(F||{}).gravitysmtp_resend_email,Ae=void 0===xe?{}:xe,Re=Ae.action,Ee=void 0===Re?"":Re,we=Ae.nonce,ke=void 0===we?"":we,Ce=M||{},ze=Ce.debug_messages,Pe=void 0===ze?{}:ze,Oe=Pe.fetching_single_activity_log,je=void 0===Oe?"":Oe,Le=Pe.fetching_single_activity_log_error,Se=void 0===Le?"":Le,Ne=Ce.log_detail,Te=void 0===Ne?{}:Ne,De=Te.top_heading,He=void 0===De?"":De,Ie=Te.top_error,Ge=void 0===Ie?"":Ie,Je=Te.action_button_view_email_label,Fe=void 0===Je?"":Je,Ke=Te.action_button_resend_label,Me=void 0===Ke?"":Ke,Ue=(Te.action_button_print_label,Te.action_button_export_label,Te.action_button_delete_label),Ve=void 0===Ue?"":Ue,Be=Te.back_button_label,qe=void 0===Be?"":Be,Qe=Te.main_box_heading,We=void 0===Qe?"":Qe,Xe=Te.nav_button_next_title,Ye=void 0===Xe?"":Xe,Ze=Te.nav_button_prev_title,$e=void 0===Ze?"":Ze,et=Te.secondary_box_heading,tt=void 0===et?"":et,at=Te.sidebar_status_heading,nt=void 0===at?"":at,it=Te.sidebar_attachments_heading,rt=void 0===it?"":it,ct=Ce.resending_email,ot=Ce.resending_error,lt=Ce.snackbar_resend_error,st=Ce.snackbar_resend_success,dt=(null==s?void 0:s.i18n)||{},mt=dt.aria_label_collapsed_metabox,ut=void 0===mt?"":mt,gt=dt.aria_label_expanded_metabox,vt=void 0===gt?"":gt,pt=dt.snackbar_email_log_detail_empty_error,_t=void 0===pt?"":pt,yt=dt.snackbar_email_log_detail_generic_error,ft=void 0===yt?"":yt,bt=(null==j?void 0:j.caps)||{};L((function(){window.scrollTo(0,0)}),[]);var ht=function(){var e=(0,r.A)(l().mark((function e(){var t,a,n,i,r,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re(!0),t={action:_e,security:ye,event_id:ve},e.next=4,(0,k.A)((0,v.nv)(je,JSON.stringify((0,C.A)(["security"],t))),"info");case 4:return e.prev=4,e.next=7,(0,u.bE)({endpoint:d(),body:t});case 7:if(n=e.sent,re(!1),null==n||null===(a=n.data)||void 0===a||!a.success){e.next=17;break}if(c=null==n||null===(i=n.data)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.log_detail,(!Array.isArray(c)||c.length)&&c){e.next=14;break}return fe(_t,"error"),e.abrupt("return");case 14:X((null==n||null===(r=n.data)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.log_detail)||{}),e.next=18;break;case 17:fe(ft,"error");case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(4),fe(e.t0,"error"),e.next=25,(0,k.A)((0,v.nv)(Se,JSON.stringify(e.t0)),"error");case 25:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(){return e.apply(this,arguments)}}();L((function(){pe.current?ve&&ht():pe.current=!0}),[ve]);var xt=function(){var e=(0,r.A)(l().mark((function e(){var t,a,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(be.log_id){e.next=2;break}return e.abrupt("return");case 2:return se(!0),t={action:Ee,security:ke,email_id:be.log_id},e.next=6,(0,k.A)((0,v.nv)(ct,JSON.stringify((0,C.A)(["security"],t))),"info");case 6:return e.prev=6,e.next=9,(0,u.bE)({endpoint:d(),body:t});case 9:null!=(n=e.sent)&&null!==(a=n.data)&&void 0!==a&&a.success?fe(st):fe(lt,"error"),e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(6),fe(lt,"error"),e.next=18,(0,k.A)((0,v.nv)(ot,JSON.stringify(e.t0)),"error");case 18:se(!1);case 19:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}(),At=function(){return m.React.createElement(m.React.Fragment,null,m.React.createElement(_.A,{spacing:4},m.React.createElement(f.A,{container:!0,alignItems:"flex-start",elementType:"div",justifyContent:"flex-start",rowSpacing:4,type:"fluid",wrap:!ee},m.React.createElement(f.A,{item:!0,elementType:"div",customAttributes:{style:{flex:ee?"auto":"0 0 100%"}}},m.React.createElement(b.A,{content:He,size:"display-sm",weight:"semibold",tagName:"h2"})))),be.log_id?m.React.createElement(f.A,{container:!0,alignItems:"flex-start",elementType:"div",justifyContent:"flex-start",type:"fluid",wrap:!ee},m.React.createElement(f.A,{item:!0,elementType:"div",customAttributes:{style:{flex:ee?"auto":"0 0 100%"}}},m.React.createElement(y.A,{customAttributes:{title:qe},icon:"left-arrow",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",onClick:function(){var e;if("activity-log"===(null==V||null===(e=V.state)||void 0===e?void 0:e.previous))U(-1);else{var t=new URLSearchParams(V.search),a=j.nav_item_param_key||"tab";t.set(a,"activity-log"),t.delete("event_id");var n=O(O({},V),{},{search:"?".concat(t.toString())});U(n,{state:{previous:"log-details"}})}},size:"size-height-m",spacing:[0,4,4,0],type:"icon-white"}),m.React.createElement(y.A,{icon:"mail",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:Fe,onClick:function(){W({date:be.date,isHtml:be.is_html,id:be.log_id,fromHash:be.fromHash,from:be.from,to:be.to,title:be.subject}),Q(!0)},spacing:[0,4,4,0],size:"size-height-m",type:"white",disabled:!bt.gravitysmtp_view_email_log_preview}),m.React.createElement(y.A,{icon:"paper-plane",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:Me,onClick:xt,size:"size-height-m",spacing:[0,4,4,0],type:"white",disabled:!be.can_resend||le}),m.React.createElement(y.A,{icon:"trash",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:Ve,onClick:function(){B(!0),q(be.log_id)},size:"size-height-m",spacing:[0,0,4,0],type:"amaranth-red",disabled:!bt.gravitysmtp_delete_email_log_details})),m.React.createElement(f.A,{item:!0,elementType:"div",customAttributes:{style:{flex:"none"}}},m.React.createElement(y.A,{customAttributes:{title:$e},disabled:null===be.next_id||ie,icon:"left-arrow",iconPrefix:"gravitysmtp-admin-icon",onClick:function(){ge(O(O({},(0,v.K_)()),{},{event_id:be.next_id}))},size:"size-height-s",spacing:[0,2,0,0],type:"icon-white"}),m.React.createElement(y.A,{customAttributes:{title:Ye},disabled:null===be.prev_id||ie,icon:"right-arrow",iconPrefix:"gravitysmtp-admin-icon",onClick:function(){ge(O(O({},(0,v.K_)()),{},{event_id:be.prev_id}))},size:"size-height-s",type:"icon-white"}))):m.React.createElement(x.A,{theme:"cosmos",type:"error",customIconPrefix:"gravitysmtp-admin-icon",content:Ge,spacing:[6,0,6,0]}))},Rt=function(e){return m.React.createElement(E.A,(0,n.A)({customClasses:["gravitysmtp-log-details__secondary-box-entry"],size:"text-sm"},e))},Et=function e(t){var a=t.id;return t.data.map((function(t,n){var i="".concat(a,"-").concat(n);return Array.isArray(t)?m.React.createElement(e,{key:i,id:i,data:t}):(0,v.Gv)(t)?m.React.createElement(wt,{key:i,id:i,data:t,isTopLevel:!1}):m.React.createElement(Rt,{key:i,content:t,spacing:4})}))},wt=function e(t){var a=t.id,n=t.data,i=t.isTopLevel;return Object.keys(n).map((function(t,r){var c=n[t],o="".concat(a,"-").concat(t,"-").concat(r);return Array.isArray(c)?m.React.createElement(Et,{key:o,id:o,data:c}):(0,v.Gv)(c)?m.React.createElement(_.A,{key:o,spacing:4},m.React.createElement(E.A,{customClasses:["gravitysmtp-log-details__secondary-box-entry"],content:t,size:"text-sm",weight:"medium"}),m.React.createElement(e,{id:o,data:c,isTopLevel:!1})):i?m.React.createElement(_.A,{key:o,spacing:4},m.React.createElement(E.A,{customClasses:["gravitysmtp-log-details__secondary-box-entry"],content:t,size:"text-sm",weight:"medium"}),m.React.createElement(Rt,{content:c})):m.React.createElement(Rt,{key:o,content:"".concat(t,": ").concat(c)})}))},kt=function(e){var t=e.id,a=e.data,n=e.isLast,i=null;return i=Array.isArray(a)?m.React.createElement(Et,{id:t,data:a}):(0,v.Gv)(a)?m.React.createElement(wt,{id:t,data:a,isTopLevel:!0}):m.React.createElement(Rt,{content:a}),m.React.createElement(A.A,{collapsed:"headers"===t,collapsible:"headers"===t,contentId:"gravitysmtp-log-details__secondary-box-".concat(t),customClasses:["gravitysmtp-log-details__secondary-box-".concat(t)],HeaderContent:function(){var e,a;return"headers"===t?m.React.createElement(E.A,{content:(null==M||null===(e=M.log_detail)||void 0===e?void 0:e.secondary_box_headers_heading)||"",size:"text-md",weight:"medium",tagName:"span"}):m.React.createElement(b.A,{content:(null==M||null===(a=M.log_detail)||void 0===a?void 0:a.secondary_box_log_heading)||"",size:"text-md",weight:"medium",tagName:"h3"})},i18n:{collapsedAriaLabel:ut,expandedAriaLabel:vt},collapsibleIconPrefix:"gravitysmtp-admin-icon",spacing:n?"":6},i)},Ct=function(){return m.React.createElement(b.A,{content:tt,size:"text-lg",weight:"medium",tagName:"h2"})},zt=function(){var e=Object.keys(he).filter((function(e){var t=he[e];return Array.isArray(t)?!!t.length:(0,v.Gv)(t)?!(0===Object.keys(t).length&&t.constructor===Object):!!t}));return m.React.createElement(A.A,{customClasses:["gravitysmtp-log-details__secondary-box"],HeaderContent:Ct},e.map((function(t,a){return m.React.createElement(kt,{key:t,id:t,data:he[t],isLast:a===e.length-1})})))},Pt=function(){return m.React.createElement(b.A,{content:nt,size:"text-lg",weight:"medium",tagName:"h2"})},Ot=function(){return m.React.createElement(m.React.Fragment,null,m.React.createElement(A.A,{customClasses:["gravitysmtp-log-details__sidebar-box"],HeaderContent:Pt},G.map((function(e,t){var a,i=e.key,r=e.icon;return m.React.createElement(_.A,{key:i,customClasses:["gravitysmtp-log-details__sidebar-item"],display:"flex",spacing:0!==t?[3,0,0,0]:void 0},m.React.createElement(h.A,{icon:r,iconPrefix:"gravitysmtp-admin-icon",customClasses:["gravitysmtp-log-details__sidebar-item-icon"],spacing:[0,1,0,0]}),m.React.createElement(E.A,{content:null==M||null===(a=M.log_detail)||void 0===a?void 0:a["sidebar_".concat(i,"_label")],customClasses:["gravitysmtp-log-details__sidebar-item-label"],size:"text-sm",spacing:[0,1,0,0],weight:"regular"}),"status"===i?m.React.createElement(R.A,(0,n.A)({},(null==be?void 0:be[i])||{},{customClasses:["gravitysmtp-log-details__sidebar-item-value"]})):m.React.createElement(E.A,{color:"comet",content:null==be?void 0:be[i],customClasses:["gravitysmtp-log-details__sidebar-item-value"],size:"text-sm"}))}))),null!=be&&be.has_attachment?m.React.createElement(A.A,{HeaderContent:function(){return m.React.createElement(b.A,{content:rt,size:"text-lg",weight:"medium",tagName:"h2"})},spacing:[6,0,0,0]},be.attachments.map((function(e,t){return m.React.createElement(_.A,{key:"attachment-".concat(t),customClasses:["gravitysmtp-log-details__sidebar-item"],display:"flex",spacing:0!==t?[3,0,0,0]:void 0},m.React.createElement(h.A,{icon:"paper-clip",iconPrefix:"gravitysmtp-admin-icon",customClasses:["gravitysmtp-log-details__sidebar-item-icon"],spacing:[0,1,0,0]}),m.React.createElement(E.A,{content:e.file_extension.toUpperCase(),customClasses:["gravitysmtp-log-details__sidebar-item-label"],size:"text-sm",spacing:[0,1,0,0],weight:"regular"}),m.React.createElement(E.A,{color:"comet",content:e.file_name,customClasses:["gravitysmtp-log-details__sidebar-item-value"],size:"text-sm"}))}))):null)};return bt.gravitysmtp_view_email_log_details&&m.React.createElement("div",{className:"gravitysmtp-activity-log-app__log-details-wrapper",ref:t},m.React.createElement(g.e7,{condition:be.log_id,wrapper:function(e){return m.React.createElement(w.A,{customClasses:["gravitysmtp-activity-log-app__log-details"],Header:At,SecondaryContentChildren:zt,SideBarChildren:Ot,sidebarMobilePosition:"start"},e)}},be.log_id?null:m.React.createElement(At,null),m.React.createElement(A.A,{HeaderContent:function(){return m.React.createElement(m.React.Fragment,null,m.React.createElement(b.A,{content:We,size:"text-lg",weight:"medium"}))},customClasses:["gravitysmtp-log-details__main-box"]},I.map((function(e){var t;return m.React.createElement(_.A,{key:e,customClasses:["gravitysmtp-log-details__main-box-item"]},m.React.createElement(b.A,{content:null==M||null===(t=M.log_detail)||void 0===t?void 0:t["main_box_".concat(e,"_label")],customClasses:["gravitysmtp-log-details__main-box-heading"],size:"text-sm",weight:"semibold"}),m.React.createElement(E.A,{content:null==be?void 0:be[e],customClasses:["gravitysmtp-log-details__main-box-entry"],size:"text-sm"}))})))))}));J.propTypes={data:m.PropTypes.object,i18n:m.PropTypes.object},J.displayName="LogDetailsScreen",t.default=J}}]);