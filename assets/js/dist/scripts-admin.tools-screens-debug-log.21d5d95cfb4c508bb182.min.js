"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[2396,9773],{4068:function(e,t,n){n.r(t);var r=n(6796),a=n(5720),o=n(9801),i=n(5210),u=n(9509),l=n.n(u),s=n(7784),c=n(4070),d=n(583),g=n(4237),p=n(6192),v=n(31),b=n(2472),_=n(8887),f=n(8424),m=n(2077),h=n(9208),y=n(3199);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var D=s.React.forwardRef,P=s.React.useEffect,R=s.React.useRef,x=s.React.useState,O=s.ReactRouter.useLocation,S=s.ReactRouter.useNavigate,T=s.ReactRouter.useSearchParams,j="log_page",Z="search_term",k={},L=new URLSearchParams(window.location.search),A=L.get(j)||"1",I=L.get(Z)||"",C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=void 0===t?1:t,r=e.searchTerm,a=void 0===r?"":r,o="page-".concat(n);return a&&(o+="-".concat(a)),o},E=D((function(e,t){var n,u=e.customAttributes,D=void 0===u?{}:u,L=e.customClasses,E=void 0===L?[]:L,N=e.common,G=void 0===N?{}:N,B=e.data,J=void 0===B?{}:B,M=e.i18n,U=void 0===M?{}:M,H=G.data,q=(void 0===H?{}:H).test_mode,z=void 0!==q&&q,F=G.i18n,K=(void 0===F?{}:F).test_mode_warning_notice,Q=void 0===K?"":K,V=G.endpoints,W=(void 0===V?{}:V).debug_log_page,X=W.action,Y=void 0===X?"":X,$=W.nonce,ee=void 0===$?"":$,te=U||{},ne=te.debug_log,re=void 0===ne?{}:ne,ae=re.top_heading,oe=void 0===ae?"":ae,ie=re.data_grid,ue=void 0===ie?{}:ie,le=ue.top_heading,se=void 0===le?"":le,ce=ue.clear_search_aria_label,de=void 0===ce?"":ce,ge=ue.empty_title,pe=void 0===ge?"":ge,ve=ue.empty_message,be=void 0===ve?"":ve,_e=ue.grid_controls_search_button_label,fe=void 0===_e?"":_e,me=ue.grid_controls_search_placeholder,he=void 0===me?"":me,ye=ue.pagination_next,we=void 0===ye?"":ye,De=ue.pagination_prev,Pe=void 0===De?"":De,Re=ue.pagination_next_aria_label,xe=void 0===Re?"":Re,Oe=ue.pagination_prev_aria_label,Se=void 0===Oe?"":Oe,Te=ue.search_no_results_title,je=void 0===Te?"":Te,Ze=ue.search_no_results_message,ke=void 0===Ze?"":Ze,Le=re.snackbar_debug_log_error,Ae=void 0===Le?"":Le,Ie=te.debug_messages,Ce=void 0===Ie?{}:Ie,Ee=Ce.fetching_debug_log_page,Ne=void 0===Ee?"":Ee,Ge=Ce.fetching_debug_log_page_error,Be=void 0===Ge?"":Ge,Je=(null==J?void 0:J.debug_log)||{},Me=Je.ajax_grid_pagination_url,Ue=void 0===Me?"":Me,He=Je.data_grid,qe=void 0===He?{}:He,ze=qe.columns,Fe=void 0===ze?[]:ze,Ke=qe.column_style_props,Qe=void 0===Ke?{}:Ke,Ve=Je.initial_load_timestamp,We=void 0===Ve?"":Ve,Xe=Je.initial_row_count,Ye=void 0===Xe?0:Xe,$e=Je.rows_per_page,et=void 0===$e?7:$e,tt=(null==J?void 0:J.caps)||{},nt=O(),rt=S(),at=(0,g.Ds)(),ot=x(Ye),it=(0,i.Z)(ot,2),ut=it[0],lt=it[1],st=T(),ct=(0,i.Z)(st,2),dt=ct[0],gt=(ct[1],(0,y.default)((function(e){return e.debugLogDataGridRows}))),pt=(0,y.default)((function(e){return e.setDebugLogDataGridRows})),vt=(0,y.default)((function(e){return e.setDebugDetailsDialogData})),bt=(0,y.default)((function(e){return e.setDebugDetailsDialogOpen})),_t=R(),ft=R("");P((function(){if(_t.current){var e=dt.get(j)||"1",t=dt.get(Z)||"";wt({nextSelectedPage:parseInt(e,10)-1,searchTerm:t},!0)}else _t.current=!0}),[dt]),P((function(){return window.addEventListener("popstate",ht),function(){window.removeEventListener("popstate",ht)}}),[]);var mt=C({page:A,searchTerm:I});k[mt]={},k[mt].rows=(null==J||null===(n=J.debug_log)||void 0===n||null===(n=n.data_grid)||void 0===n?void 0:n.data)||[],k[mt].newRowCount=Ye;var ht=function(){ft.current=""},yt=function(e){var t=e.page,n=e.searchTerm,r=void 0===n?"":n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=new URLSearchParams(nt.search);o.set(j,t),r?o.set(Z,r):o.delete(Z),rt("?".concat(o.toString()),{replace:a})},wt=function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,a,o,i,u,s,g,p,v,b=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>1&&void 0!==b[1]&&b[1],r=C({page:t.nextSelectedPage+1}),t.searchTerm||!k[r]){e.next=8;break}return pt(k[r].rows),lt(parseInt(k[r].newRowCount,10)),yt({page:t.nextSelectedPage+1},n),ft.current="",e.abrupt("return",t.nextSelectedPage);case 8:if(a={action:Y,security:ee,max_date:We,requested_page:t.nextSelectedPage+1,search_term:t.searchTerm||""},(o=JSON.stringify(a))!==ft.current){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,(0,m.Z)((0,d.gB)(Ne,JSON.stringify((0,h.Z)(["security"],a))),"info");case 14:return e.prev=14,e.next=17,(0,c.v_)({endpoint:Ue,body:a});case 17:if(g=e.sent,p=(null==g||null===(i=g.data)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.rows)||[],v=(null==g||null===(u=g.data)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.total)||"0",null==g||null===(s=g.data)||void 0===s||!s.success){e.next=27;break}return t.searchTerm||(k[r]={rows:p,newRowCount:v}),pt(p),lt(parseInt(v,10)),yt({page:t.nextSelectedPage+1,searchTerm:t.searchTerm||""},n),ft.current=o,e.abrupt("return",t.nextSelectedPage);case 27:at(Ae,"error"),e.next=35;break;case 30:return e.prev=30,e.t0=e.catch(14),at(e.t0,"error"),e.next=35,(0,m.Z)((0,d.gB)(Be,JSON.stringify(e.t0)),"error");case 35:case"end":return e.stop()}}),e,null,[[14,30]])})));return function(t){return e.apply(this,arguments)}}(),Dt=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,s.classnames)({"gravitysmtp-tools-app__debug-log":!0},E)},D),Pt=gt.length>0,Rt={customClasses:["gravitysmtp-tools-app__debug-log-table"],id:"gravitysmtp-tools-app__debug-log-table",columns:Fe,columnStyleProps:Qe,data:gt,dataPerPage:Pt?et:7,EmptyImage:v.Z,handleGridClicks:function(e){if("view"===e.action){var t,n,r,a,o=(null==e||null===(t=e.data)||void 0===t?void 0:t.id)||0,i=gt.filter((function(e){var t;return(null==e||null===(t=e.id)||void 0===t||null===(t=t.props)||void 0===t?void 0:t.content)===o}))[0];if(!i)return;vt({date:(null==i||null===(n=i.date)||void 0===n||null===(n=n.props)||void 0===n?void 0:n.content)||"",event:(null==i||null===(r=i.status)||void 0===r?void 0:r.props)||{},log:(null==i||null===(a=i.log)||void 0===a||null===(a=a.props)||void 0===a?void 0:a.label)||""}),bt(!0)}},hasBulkActions:!1,hasFilters:!1,hasSearch:!0,i18n:{emptyMessageI18n:be,emptyTitleI18n:pe,gridHeadingI18n:se,searchNoResultsTitleI18n:je,searchNoResultsMessageI18n:ke},maintainHeight:!Pt,page:parseInt(dt.get(j)||"1",10)-1,paginationAttributes:{nextLabel:we,nextAriaLabel:xe,onClick:wt,pageCount:Math.ceil(ut/et),previousLabel:Pe,previousAriaLabel:Se},rowCount:ut,searchButtonAttributes:{label:fe},searchInputAttributes:{clearableButtonAttributes:{ariaLabel:de,icon:"x-circle",iconPrefix:"gravitysmtp-admin-icon"},placeholder:he},SearchNoResultsImage:b.Z,searchTerm:dt.get(Z)||"",titleAttributes:{tagName:"h2"},useAjax:!0};return tt.gravitysmtp_view_debug_log&&s.React.createElement("div",(0,r.Z)({},Dt,{ref:t}),s.React.createElement(p.Z,{size:"display-sm",weight:"semibold",spacing:6,content:oe}),z&&s.React.createElement(_.Z,{customIconPrefix:"gravitysmtp-admin-icon",spacing:[6,0,6,0],type:"notice"},Q),s.React.createElement(f.Z,Rt))}));E.propTypes={customAttributes:s.PropTypes.object,customClasses:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.array,s.PropTypes.object]),data:s.PropTypes.object,i18n:s.PropTypes.object},E.displayName="DebugLogScreen",t.default=E},3199:function(e,t,n){n.r(t);var r,a,o=n(3267),i=n.n(o),u=n(760),l=(null===(r=(0,n(583).iE)(i(),"gravitysmtp_admin_config"))||void 0===r||null===(r=r.components)||void 0===r?void 0:r.tools)||{},s={debugLogDataGridRows:(null==l||null===(a=l.data)||void 0===a||null===(a=a.debug_log)||void 0===a||null===(a=a.data_grid)||void 0===a?void 0:a.data)||[],debugDetailsDialogData:{},debugDetailsDialogOpen:!1},c=(0,u.Ue)(s,(function(e){return{setDebugLogDataGridRows:function(t){return e((function(){return{debugLogDataGridRows:t}}))},setDebugDetailsDialogData:function(t){return e((function(){return{debugDetailsDialogData:t}}))},setDebugDetailsDialogOpen:function(t){return e((function(){return{debugDetailsDialogOpen:t}}))}}}));t.default=c},2077:function(e,t,n){n.d(t,{Z:function(){return p}});var r,a=n(9801),o=n(9509),i=n.n(o),u=n(9608),l=n.n(u),s=n(3267),c=n.n(s),d=n(4070),g=(null===(r=(0,n(583).iE)(c(),"gravitysmtp_admin_config"))||void 0===r?void 0:r.common)||{};function p(){return v.apply(this,arguments)}function v(){return v=(0,a.Z)(i().mark((function e(){var t,n,r,a,o,u,s,c,p,v,b=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=b.length>0&&void 0!==b[0]?b[0]:"",a=b.length>1&&void 0!==b[1]?b[1]:"debug",o=g.data,u=void 0===o?{}:o,s=g.endpoints,p=(null==(c=void 0===s?{}:s)||null===(t=c.log_debug_item)||void 0===t?void 0:t.action)||"",v=(null==c||null===(n=c.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=u&&u.debug_log_enabled&&p&&v&&r){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.v_)({endpoint:l(),body:{action:p,security:v,message:r,priority:a}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}},9208:function(e,t,n){var r=n(6588),a=n(5210);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return function n(o){return Object.entries(o).reduce((function(o,i){var u=(0,a.Z)(i,2),l=u[0],s=u[1];return"object"===(0,r.Z)(s)&&null!==s?o[l]=n(s):e.includes(l)?o[l]=null===s?null:t.repeat(s.length):o[l]=s,o}),Array.isArray(o)?[]:{})}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);