"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[2802,4587],{9997:function(e,t,n){n.r(t);var i=n(6796),o=n(9801),a=n(5210),r=n(5720),l=n(9509),s=n.n(l),c=n(9608),g=n.n(c),u=n(7784),d=n(4070),_=n(375),m=n(9805),f=n(7343),b=n(6192),p=n(6901),v=n(7511),h=n(7024),y=n(7066),D=n(2030),O=n(4237),x=n(2077),C=n(9208),Z=n(7866);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var E=u.React.forwardRef,k=u.React.useState,S=E((function(e,t){var n,l,c=e.customAttributes,E=void 0===c?{}:c,S=e.customClasses,A=void 0===S?[]:S,R=e.common,z=void 0===R?{}:R,P=e.data,T=void 0===P?{}:P,j=e.i18n,I=void 0===j?{}:j,L=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,u.classnames)({"gravitysmtp-settings-app__logging":!0},A)},E),N=(null==I?void 0:I.logging)||{},B=N.top_heading,F=N.top_content,J=N.logging_box_heading,M=N.enable_log_label,H=N.enable_log_helper_text,V=N.save_email_body_label,U=N.save_email_body_helper_text,W=N.save_attachments_label,q=N.save_attachments_helper_text,G=N.email_log_retention_label,K=N.email_log_retention_helper_text,Q=N.error_saving_snackbar_message,X=N.debug_logging_box_heading,Y=N.enable_debug_log_label,$=N.enable_debug_log_helper_text,ee=N.debug_log_retention_label,te=N.debug_log_retention_helper_text,ne=N.view_debug_log_button_text,ie=N.delete_debug_log_button_text,oe=N.delete_debug_log_dialog_confirm_change_heading,ae=N.delete_debug_log_dialog_confirm_change_content,re=N.delete_debug_log_dialog_confirm_change_confirm,le=N.snackbar_debug_log_delete_error,se=N.snackbar_debug_log_delete_success,ce=(null==T?void 0:T.email_log_settings)||{},ge=ce.email_log_enabled,ue=ce.save_email_body_enabled,de=ce.save_attachments_enabled,_e=ce.email_log_retention,me=ce.retention_options,fe=(null==T?void 0:T.debug_log_settings)||{},be=fe.debug_log_retention,pe=fe.debug_log_url,ve=fe.retention_options,he=z||{},ye=he.i18n,De=void 0===ye?{}:ye,Oe=De.debug_messages,xe=void 0===Oe?{}:Oe,Ce=xe.deleting_all_debug_logs,Ze=void 0===Ce?"":Ce,we=xe.deleting_all_debug_logs_error,Ee=void 0===we?"":we,ke=xe.saving_plugin_settings,Se=void 0===ke?"":ke,Ae=xe.saving_plugin_settings_error,Re=void 0===Ae?"":Ae,ze=De.snackbar_generic_update_success,Pe=void 0===ze?"":ze,Te=he.endpoints,je=(void 0===Te?{}:Te).delete_debug_logs,Ie=void 0===je?{}:je,Le=Ie.action,Ne=void 0===Le?"":Le,Be=Ie.nonce,Fe=void 0===Be?"":Be,Je=(null==T?void 0:T.caps)||{},Me=(null==z||null===(n=z.endpoints)||void 0===n||null===(n=n.save_plugin_settings)||void 0===n?void 0:n.action)||"",He=(null==z||null===(l=z.endpoints)||void 0===l||null===(l=l.save_plugin_settings)||void 0===l?void 0:l.nonce)||"",Ve=(0,Z.default)((function(e){return e.debugLogEnabled})),Ue=(0,Z.default)((function(e){return e.setDebugLogEnabled})),We=(0,Z.default)((function(e){return e.setConfirmDialogSettings})),qe=(0,Z.default)((function(e){return e.setConfirmDialogOpen})),Ge=(0,O.Ds)(),Ke=k(ge),Qe=(0,a.Z)(Ke,2),Xe=Qe[0],Ye=Qe[1],$e=function(){var e=(0,o.Z)(s().mark((function e(){var t,n,i,o,a,r=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={action:Me,security:He,key:t=r.length>0&&void 0!==r[0]?r[0]:"",value:n=r.length>1&&void 0!==r[1]?r[1]:""},e.next=5,(0,x.Z)((0,_.gB)(Se,JSON.stringify((0,C.Z)(["security"],i))),"info");case 5:return e.prev=5,e.next=8,(0,d.v_)({endpoint:g(),body:i});case 8:null!=(a=e.sent)&&null!==(o=a.data)&&void 0!==o&&o.success?(T.email_log_settings[t]=n,["event_log_retention","debug_log_retention"].includes(t)&&Ge(Pe,"success")):Ge(Q,"error"),e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(5),e.next=17,(0,x.Z)((0,_.gB)(Re,JSON.stringify(e.t0)),"error");case 17:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=(0,o.Z)(s().mark((function e(){var t,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={action:Ne,security:Fe,all_logs:"1"},e.next=3,(0,x.Z)((0,_.gB)(Ze,JSON.stringify((0,C.Z)(["security"],t))),"info");case 3:return e.prev=3,e.next=6,(0,d.v_)({endpoint:g(),body:t});case 6:null!=(i=e.sent)&&null!==(n=i.data)&&void 0!==n&&n.success?Ge(se,"success"):Ge(le,"error"),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(3),Ge(le,"error"),e.next=15,(0,x.Z)((0,_.gB)(Ee,JSON.stringify(e.t0)),"error");case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();return u.React.createElement("div",(0,i.Z)({},L,{ref:t}),u.React.createElement(b.Z,{size:"display-sm",weight:"semibold",spacing:1,content:B}),u.React.createElement(h.Z,{size:"text-sm",spacing:6,color:"comet",content:F}),Je.gravitysmtp_view_email_log_settings&&u.React.createElement(u.React.Fragment,null,u.React.createElement(D.Z,{HeaderContent:function(e){return u.React.createElement(b.Z,(0,i.Z)({content:J,tagName:"h2",size:"text-lg",weight:"medium"},e))},spacing:6},u.React.createElement(m.Z,{customClasses:["gravitysmtp-logging-settings__box-container"],x:630},u.React.createElement(y.Z,{helpTextAttributes:{content:H,size:"text-sm",spacing:[4,0,0,0]},initialChecked:ge,labelAttributes:{label:M},onChange:function(e){Ye(e),$e("event_log_enabled",e)},labelPosition:"left",name:"event_log_enabled",spacing:6,size:"size-m",width:"full",disabled:!Je.gravitysmtp_edit_email_log_settings}),Xe&&u.React.createElement(y.Z,{helpTextAttributes:{content:U,size:"text-sm",spacing:[4,0,0,0]},initialChecked:ue,labelAttributes:{label:V},onChange:function(e){$e("save_email_body_enabled",e)},labelPosition:"left",name:"save_email_body_enabled",spacing:6,size:"size-m",width:"full",disabled:!Je.gravitysmtp_edit_email_log_settings}),Xe&&u.React.createElement(y.Z,{helpTextAttributes:{content:q,size:"text-sm",spacing:[4,0,0,0]},initialChecked:de,labelAttributes:{label:W},onChange:function(e){$e("save_attachments_enabled",e)},labelPosition:"left",name:"save_attachments_enabled",spacing:6,size:"size-m",width:"full",disabled:!Je.gravitysmtp_edit_email_log_settings}),u.React.createElement(v.Z,{initialValue:_e,labelAttributes:{label:G},helpTextAttributes:{content:K},name:"event_log_retention",onChange:function(e){$e("event_log_retention",e)},options:me,disabled:!Je.gravitysmtp_edit_email_log_settings}))),u.React.createElement(D.Z,{HeaderContent:function(e){return u.React.createElement(b.Z,(0,i.Z)({content:X,tagName:"h2",size:"text-lg",weight:"medium"},e))}},u.React.createElement(m.Z,{customClasses:["gravitysmtp-logging-settings__box-container"],x:630},u.React.createElement(y.Z,{initialChecked:Ve,labelAttributes:{label:Y},helpTextAttributes:{content:$,size:"text-sm",spacing:[4,0,0]},onChange:function(e){Ue(e),$e("debug_log_enabled",e),T.debug_log_settings.debug_log_enabled=e,z.data.debug_log_enabled=e},helpTextWidth:"full",labelPosition:"left",name:"debug_log_enabled",spacing:6,size:"size-m",width:"full",disabled:!Je.gravitysmtp_edit_email_log_settings}),u.React.createElement(v.Z,{initialValue:be,labelAttributes:{label:ee},helpTextAttributes:{content:te},name:"debug_log_retention",onChange:function(e){$e("debug_log_retention",e)},options:ve,disabled:!Je.gravitysmtp_edit_email_log_settings,spacing:6}),u.React.createElement(m.Z,{display:"flex",customClasses:["gravitysmtp-logging-settings__debug-log-buttons"]},u.React.createElement(p.Z,{content:ne,customClasses:["gform-button","gform-button--size-height-m","gform-button--white","gform-button--width-auto","gform-button--icon-leading","gform-typography--size-text-sm","gform-typography--weight-medium"],href:pe}),u.React.createElement(f.Z,{label:ie,onClick:(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:We({confirmDialogConfirmButtonType:"amaranth-red",confirmDialogI18n:{confirm_change_confirm:re,confirm_change_content:ae,confirm_change_heading:oe},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return qe(!1)},confirmDialogOnClose:function(){return qe(!1)},confirmDialogOnConfirm:function(){var e=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe(!1),e.next=3,et();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)}))),icon:"trash",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading",size:"size-height-m",type:"amaranth-red"}))))))}));S.propTypes={customAttributes:u.PropTypes.object,customClasses:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.array,u.PropTypes.object])},S.displayName="LoggingScreen",t.default=S},7866:function(e,t,n){n.r(t);var i,o,a,r,l,s,c,g,u,d=n(3267),_=n.n(d),m=n(7784),f=n(760),b=n(375),p=(null===(i=(0,b.iE)(_(),"gravitysmtp_admin_config"))||void 0===i||null===(i=i.components)||void 0===i?void 0:i.settings)||{},v=(null===(o=(0,b.iE)(_(),"gravitysmtp_admin_config"))||void 0===o?void 0:o.common)||{},h={activeIntegration:(u=null==p||null===(g=p.data)||void 0===g||null===(g=g.integrations)||void 0===g?void 0:g.find((function(e){var t;return null==e||null===(t=e.data)||void 0===t?void 0:t.enabled})),(null==u?void 0:u.id)||""),activeIntegrationSettings:"",confirmDialogCustomAttributes:{},confirmDialogI18n:{},confirmDialogOnCancel:function(){},confirmDialogOnClose:function(){},confirmDialogOnConfirm:function(){},confirmDialogOpen:!1,confirmDialogConfirmButtonType:"primary-new",debugLogEnabled:(null==v||null===(a=v.data)||void 0===a?void 0:a.debug_log_enabled)||!1,integrations:(null==p||null===(r=p.data)||void 0===r?void 0:r.integrations)||[],integrationSettingsDialogOpen:!1,integrationSettingsFormData:(c={},null==p||null===(s=p.data)||void 0===s||null===(s=s.integrations)||void 0===s||s.forEach((function(e){c[e.id]=(null==e?void 0:e.data)||{}})),c),noticeDialogOpen:!1,pageLoaderActive:!1,testModeEnabled:(null==v||null===(l=v.data)||void 0===l?void 0:l.test_mode_enabled)||!1},y=(0,f.Ue)(h,(function(e){return{setActiveIntegration:function(t){return e((function(){return{activeIntegration:t}}))},setActiveIntegrationSettings:function(t){return e((function(){return{activeIntegrationSettings:t}}))},setConfirmDialogOpen:function(t){return e((function(){return{confirmDialogOpen:t}}))},setConfirmDialogSettings:function(t){var n=t.confirmDialogCustomAttributes,i=void 0===n?{}:n,o=t.confirmDialogI18n,a=void 0===o?{}:o,r=t.confirmDialogOpen,l=void 0!==r&&r,s=t.confirmDialogOnCancel,c=void 0===s?function(){}:s,g=t.confirmDialogOnClose,u=void 0===g?function(){}:g,d=t.confirmDialogOnConfirm,_=void 0===d?function(){}:d,m=t.confirmDialogConfirmButtonType,f=void 0===m?"primary-new":m;e((function(){return{confirmDialogCustomAttributes:i,confirmDialogConfirmButtonType:f,confirmDialogI18n:a,confirmDialogOpen:l,confirmDialogOnCancel:c,confirmDialogOnClose:u,confirmDialogOnConfirm:_}}))},setIntegrationSettingsDialogOpen:function(t){return e((function(){return{integrationSettingsDialogOpen:t}}))},setNoticeDialogOpen:function(t){return e((function(){return{noticeDialogOpen:t}}))},setPageLoaderActive:function(t){return e((function(){return{pageLoaderActive:t}}))},setIntegrationSettingsFormData:function(t,n,i){return e((0,m.immer)((function(e){e.integrationSettingsFormData[t]||(e.integrationSettingsFormData[t]={}),e.integrationSettingsFormData[t][n]=i})))},setDebugLogEnabled:function(t){return e((function(){return{debugLogEnabled:t}}))},setTestModeEnabled:function(t){return e((function(){return{testModeEnabled:t}}))},updateIntegrationSettings:function(t,n){return e((function(){return{activeIntegrationSettings:t,integrationSettingsDialogOpen:n}}))},updateIntegrationStatus:function(t,n){var i=n.activated,o=n.configured,a=n.enabled,r=n.is_primary,l=n.is_backup;return e((0,m.immer)((function(e){var n=e.integrations.find((function(e){return e.id===t}));n&&(n.data||(n.data={}),void 0!==i&&(n.data.activated=i),void 0!==o&&(n.data.configured=o),void 0!==a&&(n.data.enabled=a),void 0!==r&&(n.data.is_primary=r),void 0!==l&&(n.data.is_backup=l))})))}}}));t.default=y},2077:function(e,t,n){n.d(t,{Z:function(){return _}});var i,o=n(9801),a=n(9509),r=n.n(a),l=n(9608),s=n.n(l),c=n(3267),g=n.n(c),u=n(4070),d=(null===(i=(0,n(375).iE)(g(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};function _(){return m.apply(this,arguments)}function m(){return m=(0,o.Z)(r().mark((function e(){var t,n,i,o,a,l,c,g,_,m,f=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=f.length>0&&void 0!==f[0]?f[0]:"",o=f.length>1&&void 0!==f[1]?f[1]:"debug",a=d.data,l=void 0===a?{}:a,c=d.endpoints,_=(null==(g=void 0===c?{}:c)||null===(t=g.log_debug_item)||void 0===t?void 0:t.action)||"",m=(null==g||null===(n=g.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=l&&l.debug_log_enabled&&_&&m&&i){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,u.v_)({endpoint:s(),body:{action:_,security:m,message:i,priority:o}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}},9208:function(e,t,n){var i=n(6588),o=n(5210);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return function n(a){return Object.entries(a).reduce((function(a,r){var l=(0,o.Z)(r,2),s=l[0],c=l[1];return"object"===(0,i.Z)(c)&&null!==c?a[s]=n(c):e.includes(s)?a[s]=null===c?null:t.repeat(c.length):a[s]=c,a}),Array.isArray(a)?[]:{})}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);