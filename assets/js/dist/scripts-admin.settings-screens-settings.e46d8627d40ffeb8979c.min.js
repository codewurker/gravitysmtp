"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[8672,4587],{2641:function(e,t,n){n.r(t);var i=n(9801),a=n(6796),r=n(5210),o=n(5720),c=n(9509),s=n.n(c),l=n(9608),u=n.n(l),g=n(7784),d=n(760),m=n(4070),p=n(583),v=n(9805),f=n(7343),_=n(6192),y=n(6493),b=n(6901),h=n(7024),x=n(7066),Z=n(8887),O=n(2030),R=n(4237),w=n(2077),k=n(9208),D=n(7866);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=g.React.forwardRef,P=g.React.useRef,I=g.React.useState,A=g.ReactRouter.useLocation,T=g.ReactRouter.Link,z=S((function(e,t){var n,o,c,l,E=e.customAttributes,S=void 0===E?{}:E,z=e.customClasses,j=void 0===z?[]:z,N=e.common,B=void 0===N?{}:N,J=e.data,F=void 0===J?{}:J,L=e.i18n,M=void 0===L?{}:L,H=C({className:(0,g.classnames)({"gravitysmtp-general-settings":!0},j)},S),W=M||{},U=W.debug_messages,X=void 0===U?{}:U,$=X.uninstalling_plugin,q=X.uninstalling_plugin_error,G=W.settings,K=void 0===G?{}:G,Q=K.top_heading,V=K.license_box_heading,Y=K.license_box_content,ee=K.license_box_input_label,te=K.license_box_input_help_text,ne=K.license_box_button_text,ie=K.license_valid,ae=K.license_invalid,re=K.test_mode_box_heading,oe=K.test_mode_box_content_1,ce=K.test_mode_box_toggle_label,se=K.test_mode_box_toggle_help_text,le=K.general_settings_box_heading,ue=K.uninstall_box_heading,ge=K.uninstall_box_content,de=K.uninstall_box_button_label,me=K.uninstall_dialog_confirm_change_heading,pe=K.uninstall_dialog_confirm_change_content,ve=K.uninstall_dialog_confirm_change_confirm,fe=K.error_uninstalling_message,_e=F.license_key,ye=F.license_key_is_valid,be=F.plugins_url,he=(null==B?void 0:B.i18n)||{},xe=he.debug_messages,Ze=void 0===xe?{}:xe,Oe=Ze.saving_plugin_settings,Re=void 0===Oe?"":Oe,we=Ze.saving_plugin_settings_error,ke=void 0===we?"":we,De=he.general_settings_usage_analytics_label,Ee=void 0===De?"":De,Ce=he.general_settings_usage_analytics_help_text,Se=void 0===Ce?"":Ce,Pe=he.test_mode_warning_notice,Ie=void 0===Pe?"":Pe,Ae=(null==B?void 0:B.data)||{},Te=Ae.usage_analytics_enabled,ze=Ae.usage_analytics_link,je=Ae.param_keys,Ne=(null==F?void 0:F.caps)||{},Be=I("boolean"==typeof ye&&!ye),Je=(0,r.Z)(Be,2),Fe=Je[0],Le=Je[1],Me=I(_e),He=(0,r.Z)(Me,2),We=He[0],Ue=He[1],Xe=I(ye),$e=(0,r.Z)(Xe,2),qe=$e[0],Ge=$e[1],Ke=I(""),Qe=(0,r.Z)(Ke,2),Ve=Qe[0],Ye=Qe[1],et=I(!1),tt=(0,r.Z)(et,2),nt=tt[0],it=tt[1],at=(0,D.default)((function(e){return e.setConfirmDialogOpen})),rt=(0,D.default)((function(e){return e.setConfirmDialogSettings})),ot=(0,D.default)((function(e){return e.setPageLoaderActive})),ct=(0,D.default)((function(e){return e.testMode})),st=(0,D.default)((function(e){return e.setTestMode})),lt=P(null),ut=(null==B||null===(n=B.endpoints)||void 0===n||null===(n=n.save_plugin_settings)||void 0===n?void 0:n.action)||"",gt=(null==B||null===(o=B.endpoints)||void 0===o||null===(o=o.save_plugin_settings)||void 0===o?void 0:o.nonce)||"",dt=(null==B||null===(c=B.endpoints)||void 0===c||null===(c=c.gravitysmtp_uninstall_plugin)||void 0===c?void 0:c.action)||"",mt=(null==B||null===(l=B.endpoints)||void 0===l||null===(l=l.gravitysmtp_uninstall_plugin)||void 0===l?void 0:l.nonce)||"",pt=(0,g.classnames)({"gravitysmtp-general-settings__license-save":!0,"gravitysmtp-general-settings__license-save--saving":nt}),vt=(0,R.Ds)(),ft=A(),_t=function(){var e=(0,i.Z)(s().mark((function e(){var t,n,i,a,r,o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=lt.current.offsetWidth,n=We.trim(),Le(!1),Ye(t),it(!0),Ue(n),i={action:ut,security:gt,key:je.license_key,value:n},e.next=9,(0,w.Z)((0,p.gB)(Re,JSON.stringify((0,k.Z)(["security"],i))),"info");case 9:return e.prev=9,e.next=12,(0,m.v_)({endpoint:u(),body:i});case 12:r=e.sent,it(!1),Ye(""),null!=r&&null!==(a=r.data)&&void 0!==a&&a.success?(c=(null==r||null===(o=r.data)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.license_is_valid)||!1,Ge(c),!0===c?vt(ie):!1===c&&vt(ae,"error")):(Ge(!1),vt(ae,"error")),e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(9),e.next=23,(0,w.Z)((0,p.gB)(ke,JSON.stringify(e.t0)),"error");case 23:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(){return e.apply(this,arguments)}}(),yt={customClasses:["gravitysmtp-general-settings__license-input"],controlled:!0,labelAttributes:{label:ee},helpTextAttributes:qe?{}:{content:te,size:"text-xs",weight:"regular"},id:"gravitysmtp-general-settings__license-input",name:je.license_key,onChange:Ue,textSecurity:"disc",value:We,customAttributes:{readOnly:!Ne.gravitysmtp_edit_license_key}};!0===qe?(yt.borderStyle="correct",yt.iconAttributes={iconPrefix:"gravitysmtp-admin-icon",preset:"status-correct"}):!1===qe&&(yt.borderStyle="error",yt.iconAttributes={iconPrefix:"gravitysmtp-admin-icon",preset:"status-incorrect"});var bt=function(){var e=(0,i.Z)(s().mark((function e(t){var n,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return st(t),n={action:ut,security:gt,key:je.test_mode,value:t?"true":"false"},e.next=4,(0,w.Z)((0,p.gB)(Re,JSON.stringify((0,k.Z)(["security"],n))),"info");case 4:return e.prev=4,e.next=7,(0,m.v_)({endpoint:u(),body:n});case 7:null!=(a=e.sent)&&null!==(i=a.data)&&void 0!==i&&i.success,e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(4),e.next=16,(0,w.Z)((0,p.gB)(ke,JSON.stringify(e.t0)),"error");case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),ht=function(){var e=(0,i.Z)(s().mark((function e(t){var n,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:ut,security:gt,key:je.usage_analytics,value:t?"true":"false"},e.next=3,(0,w.Z)((0,p.gB)(Re,JSON.stringify((0,k.Z)(["security"],n))),"info");case 3:return e.prev=3,e.next=6,(0,m.v_)({endpoint:u(),body:n});case 6:null!=(a=e.sent)&&null!==(i=a.data)&&void 0!==i&&i.success&&(B.data.usage_analytics_enabled=t,(0,p.X$)({event:"gravitysmtp/setting-updated",native:!1,data:{key:je.usage_analytics,value:t}})),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(3),e.next=15,(0,w.Z)((0,p.gB)(ke,JSON.stringify(e.t0)),"error");case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),xt=function(){var e=(0,i.Z)(s().mark((function e(){var t,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ot(!0),t={action:dt,security:mt},e.next=4,(0,w.Z)((0,p.gB)($,JSON.stringify((0,k.Z)(["security"],t))),"info");case 4:return e.prev=4,e.next=7,(0,m.v_)({endpoint:u(),body:t});case 7:null!=(i=e.sent)&&null!==(n=i.data)&&void 0!==n&&n.success?window.location.href=be:(ot(!1),vt(fe,"error")),e.next=18;break;case 11:return e.prev=11,e.t0=e.catch(4),ot(!1),vt(fe,"error"),e.next=18,(0,w.Z)((0,p.gB)(q,JSON.stringify(e.t0)),"error");case 18:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),Zt={initialChecked:ct,labelAttributes:{label:ce},helpTextAttributes:{content:se,spacing:[4,0,0,0]},helpTextWidth:"full",labelPosition:"left",id:"test_mode",name:je.test_mode,onChange:bt,size:"size-m",width:"full",disabled:!Ne.gravitysmtp_edit_test_mode},Ot={initialChecked:Te,labelAttributes:{label:Ee},helpTextAttributes:{content:g.React.createElement(d.ji,{openingSymbol:"{{",closingSymbol:"}}",text:Se,tokens:[{component:b.Z,key:"learn_link",props:{href:ze,size:"text-xs",target:"_blank"}}]}),spacing:[4,0,0,0]},helpTextWidth:"full",labelPosition:"left",id:"usage_analytics",name:je.usage_analytics,onChange:ht,size:"size-m",width:"full",disabled:!Ne.gravitysmtp_edit_usage_analytics};return g.React.createElement("div",(0,a.Z)({},H,{ref:t}),g.React.createElement(_.Z,{size:"display-sm",weight:"semibold",spacing:6,content:Q}),ct&&g.React.createElement(Z.Z,{customIconPrefix:"gravitysmtp-admin-icon",spacing:[6,0,6,0],type:"notice"},Ie),Ne.gravitysmtp_view_license_key&&g.React.createElement(O.Z,{HeaderContent:function(e){return g.React.createElement(v.Z,{x:630},g.React.createElement(_.Z,(0,a.Z)({content:V,tagName:"h2",size:"text-lg",weight:"medium",spacing:2},e)),g.React.createElement(h.Z,(0,a.Z)({content:Y,size:"text-sm",color:"comet"},e)))},FooterContent:function(e){var t={};return Ve&&(t.style={width:"".concat(Ve,"px")}),t.disabled=!Ne.gravitysmtp_edit_license_key,g.React.createElement(f.Z,(0,a.Z)({active:nt,activeType:"loader",customAttributes:t,customClasses:pt,icon:"save-disk",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:ne,onClick:_t,size:"size-height-m",ref:lt},e))},spacing:6},g.React.createElement(v.Z,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},g.React.createElement(y.Z,yt),Fe&&g.React.createElement(Z.Z,{customIconPrefix:"gravitysmtp-admin-icon",spacing:[3,0,0,0],type:"error"},ae))),Ne.gravitysmtp_view_test_mode&&g.React.createElement(O.Z,{HeaderContent:function(e){var t=new URLSearchParams(ft.search),n=F.nav_item_param_key||"tab";t.set(n,"logging");var i=C(C({},ft),{},{search:"?".concat(t.toString())}),r=oe.split("%s");if(3!==r.length)return g.React.createElement(v.Z,{x:630},g.React.createElement(_.Z,(0,a.Z)({content:re,tagName:"h2",size:"text-lg",weight:"medium",spacing:2},e)),g.React.createElement(h.Z,(0,a.Z)({content:oe,size:"text-sm",color:"comet"},e)));var o=g.React.createElement(g.React.Fragment,null,r[0],g.React.createElement(T,{className:"gform-link",to:i},r[1]),r[2]);return g.React.createElement(v.Z,{x:630},g.React.createElement(_.Z,(0,a.Z)({content:re,tagName:"h2",size:"text-lg",weight:"medium",spacing:2},e)),g.React.createElement(h.Z,(0,a.Z)({size:"text-sm",color:"comet"},e),o))},spacing:6},g.React.createElement(v.Z,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},g.React.createElement(x.Z,Zt))),Ne.gravitysmtp_view_usage_analytics&&g.React.createElement(O.Z,{HeaderContent:function(e){return g.React.createElement(v.Z,{x:630},g.React.createElement(_.Z,(0,a.Z)({content:le,tagName:"h2",size:"text-lg",weight:"medium"},e)))},spacing:6},g.React.createElement(v.Z,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},g.React.createElement(x.Z,Ot))),Ne.gravitysmtp_view_uninstall&&g.React.createElement(O.Z,{HeaderContent:function(e){return g.React.createElement(v.Z,{x:630},g.React.createElement(_.Z,(0,a.Z)({content:ue,tagName:"h2",size:"text-lg",weight:"medium"},e)))}},g.React.createElement(v.Z,{customClasses:["gravitysmtp-general-settings__license-input-container"],x:630},g.React.createElement(h.Z,{content:ge,size:"text-xs",color:"comet",spacing:6}),g.React.createElement(f.Z,{disabled:!Ne.gravitysmtp_edit_uninstall,icon:"trash",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:de,onClick:(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rt({confirmDialogConfirmButtonType:"amaranth-red",confirmDialogI18n:{confirm_change_confirm:ve,confirm_change_content:pe,confirm_change_heading:me},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return at(!1)},confirmDialogOnConfirm:function(){var e=(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return at(!1),e.next=3,xt();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)}))),size:"size-height-m",type:"amaranth-red"}))))}));z.propTypes={customAttributes:g.PropTypes.object,customClasses:g.PropTypes.oneOfType([g.PropTypes.string,g.PropTypes.array,g.PropTypes.object]),data:g.PropTypes.object,i18n:g.PropTypes.object},z.displayName="SettingsScreen",t.default=z},7866:function(e,t,n){n.r(t);var i,a,r,o,c,s,l,u=n(3267),g=n.n(u),d=n(7784),m=n(760),p=n(583),v=(null===(i=(0,p.iE)(g(),"gravitysmtp_admin_config"))||void 0===i||null===(i=i.components)||void 0===i?void 0:i.settings)||{},f={activeIntegration:(l=null==v||null===(s=v.data)||void 0===s||null===(s=s.integrations)||void 0===s?void 0:s.find((function(e){var t;return null==e||null===(t=e.data)||void 0===t?void 0:t.enabled})),(null==l?void 0:l.id)||""),activeIntegrationSettings:"",activatingIntegration:"",changeIntegrationDialogOpen:!1,confirmDialogI18n:{},confirmDialogOnCancel:function(){},confirmDialogOnConfirm:function(){},confirmDialogOpen:!1,confirmDialogConfirmButtonType:"primary-new",integrations:(null==v||null===(a=v.data)||void 0===a?void 0:a.integrations)||[],integrationSettingsDialogOpen:!1,integrationSettingsFormData:(c={},null==v||null===(o=v.data)||void 0===o||null===(o=o.integrations)||void 0===o||o.forEach((function(e){c[e.id]=(null==e?void 0:e.data)||{}})),c),pageLoaderActive:!1,testMode:(null===(r=(0,p.iE)(g(),"gravitysmtp_admin_config"))||void 0===r||null===(r=r.common)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.test_mode)||!1},_=(0,m.Ue)(f,(function(e){return{setActiveIntegration:function(t){return e((function(){return{activeIntegration:t}}))},setActiveIntegrationSettings:function(t){return e((function(){return{activeIntegrationSettings:t}}))},setActivatingIntegration:function(t){return e((function(){return{activatingIntegration:t}}))},setChangeIntegrationDialogOpen:function(t){return e((function(){return{changeIntegrationDialogOpen:t}}))},setConfirmDialogOpen:function(t){return e((function(){return{confirmDialogOpen:t}}))},setConfirmDialogSettings:function(t){var n=t.confirmDialogI18n,i=void 0===n?{}:n,a=t.confirmDialogOpen,r=void 0!==a&&a,o=t.confirmDialogOnCancel,c=void 0===o?function(){}:o,s=t.confirmDialogOnConfirm,l=void 0===s?function(){}:s,u=t.confirmDialogConfirmButtonType,g=void 0===u?"primary-new":u;e((function(){return{confirmDialogConfirmButtonType:g,confirmDialogI18n:i,confirmDialogOpen:r,confirmDialogOnCancel:c,confirmDialogOnConfirm:l}}))},setIntegrationSettingsDialogOpen:function(t){return e((function(){return{integrationSettingsDialogOpen:t}}))},setPageLoaderActive:function(t){return e((function(){return{pageLoaderActive:t}}))},setIntegrationSettingsFormData:function(t,n,i){return e((0,d.immer)((function(e){e.integrationSettingsFormData[t]||(e.integrationSettingsFormData[t]={}),e.integrationSettingsFormData[t][n]=i})))},setTestMode:function(t){return e((function(){return{testMode:t}}))},updateIntegrationSettings:function(t,n){return e((function(){return{activeIntegrationSettings:t,integrationSettingsDialogOpen:n}}))},updateIntegrationStatus:function(t,n){var i=n.activated,a=n.configured,r=n.enabled;return e((0,d.immer)((function(e){var n=e.integrations.find((function(e){return e.id===t}));n&&(n.data||(n.data={}),void 0!==i&&(n.data.activated=i),void 0!==a&&(n.data.configured=a),void 0!==r&&(n.data.enabled=r))})))}}}));t.default=_},2077:function(e,t,n){n.d(t,{Z:function(){return m}});var i,a=n(9801),r=n(9509),o=n.n(r),c=n(9608),s=n.n(c),l=n(3267),u=n.n(l),g=n(4070),d=(null===(i=(0,n(583).iE)(u(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};function m(){return p.apply(this,arguments)}function p(){return p=(0,a.Z)(o().mark((function e(){var t,n,i,a,r,c,l,u,m,p,v=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=v.length>0&&void 0!==v[0]?v[0]:"",a=v.length>1&&void 0!==v[1]?v[1]:"debug",r=d.data,c=void 0===r?{}:r,l=d.endpoints,m=(null==(u=void 0===l?{}:l)||null===(t=u.log_debug_item)||void 0===t?void 0:t.action)||"",p=(null==u||null===(n=u.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=c&&c.debug_log_enabled&&m&&p&&i){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,g.v_)({endpoint:s(),body:{action:m,security:p,message:i,priority:a}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}},9208:function(e,t,n){var i=n(6588),a=n(5210);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return function n(r){return Object.entries(r).reduce((function(r,o){var c=(0,a.Z)(o,2),s=c[0],l=c[1];return"object"===(0,i.Z)(l)&&null!==l?r[s]=n(l):e.includes(s)?r[s]=null===l?null:t.repeat(l.length):r[s]=l,r}),Array.isArray(r)?[]:{})}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);