"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[3229,1882],{32141:function(t,e,n){n.r(e),n.d(e,{default:function(){return C}});var a,r=n(86796),i=n(79801),o=n(15720),c=n(15210),s=n(89509),l=n.n(s),u=n(27784),d=n(39805),v=n(99064),p=n(71295),f=n(49608),g=n.n(f),m=n(63267),b=n.n(m),y=n(84070),h=(null===(a=(0,n(375).iE)(b(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},O=function(){},D=function(t){t.error},P=function(){var t=(0,i.Z)(l().mark((function t(e){var n,a,r,i,o,c,s,u,d,v,p,f,m,b,P,w,_,j,k;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.dateRange,a=void 0===n?0:n,r=e.endDate,i=void 0===r?"":r,o=e.errorCallback,c=void 0===o?null:o,s=e.startDate,u=void 0===s?"":s,d=e.successCallback,v=void 0===d?null:d,p=h.endpoints,f=(void 0===p?{}:p).get_dashboard_data,b=(m=void 0===f?{}:f).action,P=void 0===b?"":b,w=m.nonce,_={action:P,security:void 0===w?"":w},a?_.date_range=a:(_.start_date=u,_.end_date=i),t.prev=4,t.next=7,(0,y.v_)({endpoint:g(),body:_});case 7:null!=(k=t.sent)&&null!==(j=k.data)&&void 0!==j&&j.success?(v||O)({data:null==k?void 0:k.data}):(c||D)({error:null==k?void 0:k.error}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}(),w=P,_=n(87608);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var k=u.React.forwardRef,S=u.React.useState,E=function(t){var e=new Date,n=new Date;return t>1&&n.setDate(e.getDate()-t+1),1===t?[e,e]:[n,e]},Z=function(t,e){var n,a,r,i;return n=e,a={year:"numeric",month:"short",day:"numeric"},r=t.toLocaleDateString(void 0,a),i=n.toLocaleDateString(void 0,a),r===i?r:"".concat(r," - ").concat(i)},x=k((function(t,e){var n,a=t.customAttributes,s=void 0===a?{}:a,f=t.customClasses,g=void 0===f?[]:f,m=t.data,b=void 0===m?{}:m,y=t.i18n,h=void 0===y?{}:y,O=b.date_ranges,D=void 0===O?{}:O,P=D.initial_value,k=void 0===P?0:P,x=D.max_end,C=void 0===x?"":x,R=D.min_start,A=void 0===R?"":R,F=D.options,T=void 0===F?[]:F,L=C?new Date(C):null,z=A?new Date(A):null,N=h.stats,V=(void 0===N?{}:N).date_range_label,I=void 0===V?"":V,M=(null===(n=T.find((function(t){return t.value===k})))||void 0===n?void 0:n.label)||"",U=E(k),Y=Z(U[0],U[1]),q=(0,_.default)((function(t){return t.setLoadingData})),B=(0,_.default)((function(t){return t.setStateValues})),G=S(M),H=(0,c.Z)(G,2),J=H[0],K=H[1],Q=S(k),W=(0,c.Z)(Q,2),X=W[0],$=W[1],tt=S(Y),et=(0,c.Z)(tt,2),nt=et[0],at=et[1],rt=S(U),it=(0,c.Z)(rt,2),ot=it[0],ct=it[1],st=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({className:(0,u.classnames)({"gravitysmtp-dashboard-app__date-filters":!0},g)},s),lt=function(t){var e=t.data,n=(void 0===e?{}:e).data,a=void 0===n?{}:n,r=a.chart,i=(void 0===r?{}:r).values,o=void 0===i?[]:i,c=a.rankings,s=void 0===c?{}:c,l=s.recipients,u=void 0===l?[]:l,d=s.sources,v=void 0===d?[]:d,p=a.totals,f=void 0===p?{}:p,g=f.emails,m=void 0===g?0:g,b=f.failed,y=void 0===b?0:b,h=f.pending,O=void 0===h?0:h,D=f.sent;B({chartData:o,recipients:u,sources:v,totalEmails:m,totalFailed:y,totalPending:O,totalSent:void 0===D?0:D})},ut=function(){var t=(0,i.Z)(l().mark((function t(e,n,a){var r,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=E(a),i=Z(r[0],r[1]),q(!0),K(n),$(a),ct(r),at(i),t.next=9,w({dateRange:a,successCallback:function(t){lt(t)}});case 9:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),dt=function(){var t=(0,i.Z)(l().mark((function t(e){var n,a,r,i,o,s,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return q(!0),ct(e),K(I),$(0),Array.isArray(e)?(r=(0,c.Z)(e,2),n=r[0],a=r[1]):n=a=e,i=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(a,"-").concat(r," ").concat(e?"00:00:00":"23:59:59")},o=i(n),s=i(a,!1),u=Z(n,a),at(u),t.next=12,w({startDate:o,endDate:s,successCallback:function(t){lt(t)}});case 12:ct(e),q(!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),vt={calendarAttributes:{maxDate:L,minDate:z,onChange:dt,selectRange:!0,value:ot},triggerAttributes:{customClasses:["gravitysmtp-dashboard-app__date-filters__datepicker"],label:nt,icon:"calendar",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading"},withTrigger:!0},pt=T.map((function(t){return{key:"list-item-".concat(t.value),props:{id:"list-item-".concat(t.value),label:t.label,customAttributes:{disabled:X===t.value,id:"list-item-".concat(t.value),onClick:(e=(0,i.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(n,t.label,t.value);case 2:q(!1);case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}}};var e})),ft={closeOnClick:!0,customClasses:["gravitysmtp-dashboard-app__date-filters__date-filter"],listItems:pt,triggerAttributes:{iconPrefix:"gravitysmtp-admin-icon",icon:"accordion-arrow",iconPosition:"trailing",label:J,size:"size-height-m",type:"white"},width:192};return u.React.createElement("div",(0,r.Z)({},st,{ref:e}),u.React.createElement(d.Z,{display:"flex",spacing:6},u.React.createElement(p.ZP,ft),u.React.createElement(v.Z,vt)))}));x.propTypes={customAttributes:u.PropTypes.object,customClasses:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.array,u.PropTypes.object])},x.displayName="DateFilters";var C=x},87608:function(t,e,n){n.r(e);var a,r,i,o,c,s,l,u,d=n(15720),v=n(63267),p=n.n(v),f=n(77424);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){(0,d.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b=(null===(a=(0,n(375).iE)(p(),"gravitysmtp_admin_config"))||void 0===a||null===(a=a.components)||void 0===a?void 0:a.dashboard)||{},y=(null==b?void 0:b.data)||{},h={chartData:(null==y||null===(r=y.chart)||void 0===r?void 0:r.values)||[],loadingData:!1,recipients:(null==y||null===(i=y.rankings)||void 0===i?void 0:i.recipients)||[],sources:(null==y||null===(o=y.rankings)||void 0===o?void 0:o.sources)||[],totalEmails:(null==y||null===(c=y.totals)||void 0===c?void 0:c.emails)||0,totalFailed:(null==y||null===(s=y.totals)||void 0===s?void 0:s.failed)||0,totalPending:(null==y||null===(l=y.totals)||void 0===l?void 0:l.pending)||0,totalSent:(null==y||null===(u=y.totals)||void 0===u?void 0:u.sent)||0},O=(0,f.Ue)(h,(function(t){return{setLoadingData:function(e){return t((function(t){return m(m({},t),{},{loadingData:e})}))},setStateValues:function(e){return t((function(t){return m(m({},t),{},{chartData:void 0!==e.chartData?e.chartData:t.chartData,recipients:void 0!==e.recipients?e.recipients:t.recipients,sources:void 0!==e.sources?e.sources:t.sources,totalEmails:void 0!==e.totalEmails?e.totalEmails:t.totalEmails,totalFailed:void 0!==e.totalFailed?e.totalFailed:t.totalFailed,totalPending:void 0!==e.totalPending?e.totalPending:t.totalPending,totalSent:void 0!==e.totalSent?e.totalSent:t.totalSent})}))}}}));e.default=O}}]);