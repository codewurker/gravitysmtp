"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[5574],{5574:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var a,i,o,r=n(9801),s=n(6796),l=n(5210),c=n(5720),g=n(9509),d=n.n(g),u=n(7784),_=n(9805),b=n(7343),m=n(6192),v=n(6901),f=n(7511),p=n(7024),h=n(7066),y=n(2030),k=n(4237),S=n(3342),E=n(9608),Z=n.n(E),x=n(3267),C=n.n(x),w=n(4070),D=n(375),O=n(2077),A=n(9208),T=(null===(a=(0,D.iE)(C(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},M=function(e){(0,e.addSnackbarMessage)(e.saveSuccessSnackBarMessage,"success")},P=function(e){var t=e.addSnackbarMessage;e.error;t(e.saveErrorSnackBarMessage,"error")},B=function(){var e=(0,r.Z)(d().mark((function e(t){var n,a,i,o,r,s,l,c,g,u,_,b,m,v,f,p,h,y,k,S,E,x,C,B,I,L,z,G,R,N,j,V,U,W,J,H,q,F,K,Q,X,Y,$,ee,te,ne,ae,ie,oe,re,se,le,ce;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.addSnackbarMessage,a=void 0===n?function(){}:n,i=t.errorCallback,o=void 0===i?null:i,r=t.snackBarErrorMessage,s=void 0===r?"":r,l=t.snackBarSuccessMessage,c=void 0===l?"":l,g=t.successCallback,u=void 0===g?null:g,_=t.type,b=void 0===_?"debug":_,m=t.useDebugLogger,v=void 0===m||m,f=T.i18n,h=(p=void 0===f?{}:f).debug_messages,k=(y=void 0===h?{}:h).deleting_activity_log_rows,S=void 0===k?"":k,E=y.deleting_activity_log_rows_error,x=void 0===E?"":E,C=y.deleting_all_debug_logs,B=void 0===C?"":C,I=y.deleting_all_debug_logs_error,L=void 0===I?"":I,z=p.snackbar_activity_log_delete_error,G=void 0===z?"":z,R=p.snackbar_activity_log_delete_success,N=void 0===R?"":R,j=p.snackbar_debug_log_delete_error,V=void 0===j?"":j,U=p.snackbar_debug_log_delete_success,W=void 0===U?"":U,J=T.endpoints,q=(H=void 0===J?{}:J).delete_events,K=(F=void 0===q?{}:q).action,Q=void 0===K?"":K,X=F.nonce,Y=void 0===X?"":X,$=H.delete_debug_logs,te=(ee=void 0===$?{}:$).action,ne=void 0===te?"":te,ae=ee.nonce,ie=void 0===ae?"":ae,oe=c||"debug"===b?W:N,re=s||"debug"===b?V:G,se={action:"debug"===b?ne:Q,security:"debug"===b?ie:Y},"debug"===b?se.all_logs="1":(se.all_events="1",se.event_ids=[1]),!v){e.next=9;break}return e.next=9,(0,O.Z)((0,D.gB)("debug"===b?B:S,JSON.stringify((0,A.Z)(["security"],se))),"info");case 9:return e.prev=9,e.next=12,(0,w.v_)({endpoint:Z(),body:se});case 12:null!=(ce=e.sent)&&null!==(le=ce.data)&&void 0!==le&&le.success?(u||M)({addSnackbarMessage:a,data:null==ce?void 0:ce.data,saveSuccessSnackBarMessage:oe}):(o||P)({addSnackbarMessage:a,error:null==ce?void 0:ce.error,saveErrorSnackBarMessage:re}),e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(9),a(re,"error"),!v){e.next=23;break}return e.next=23,(0,O.Z)((0,D.gB)("debug"===b?L:x,JSON.stringify(e.t0)),"error");case 23:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}(),I=B,L=(null===(i=(0,D.iE)(C(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{},z=(null==L||null===(o=L.data)||void 0===o?void 0:o.param_keys)||{};function G(){return z[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""]||""}var R=n(662),N=n(36),j=n(7866);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=u.React.forwardRef,J=u.React.useState,H=W((function(e,t){var n=e.customAttributes,a=void 0===n?{}:n,i=e.customClasses,o=void 0===i?[]:i,c=e.common,g=void 0===c?{}:c,E=e.data,Z=void 0===E?{}:E,x=e.i18n,C=void 0===x?{}:x,w=U({className:(0,u.classnames)({"gravitysmtp-settings-app__logging":!0},o)},a),D=(null==C?void 0:C.logging)||{},O=D.top_heading,A=D.top_content,T=D.logging_box_heading,M=D.enable_log_label,P=D.enable_log_helper_text,B=D.save_email_body_label,L=D.save_email_body_helper_text,z=D.save_attachments_label,V=D.save_attachments_helper_text,W=D.email_log_retention_label,H=D.email_log_retention_helper_text,q=D.email_log_max_records_helper_text,F=D.debug_logging_box_heading,K=D.enable_debug_log_label,Q=D.enable_debug_log_helper_text,X=D.debug_log_retention_label,Y=D.debug_log_retention_helper_text,$=D.view_activity_log_button_text,ee=D.delete_activity_log_button_text,te=D.view_debug_log_button_text,ne=D.delete_debug_log_button_text,ae=D.delete_debug_log_dialog_confirm_change_heading,ie=D.delete_email_log_dialog_confirm_change_content,oe=D.delete_debug_log_dialog_confirm_change_content,re=D.delete_debug_log_dialog_confirm_change_confirm,se=(null==Z?void 0:Z.email_log_settings)||{},le=se.email_log_enabled,ce=se.email_log_retention,ge=se.email_log_url,de=se.retention_options,ue=se.save_attachments_enabled,_e=se.save_email_body_enabled,be=(null==Z?void 0:Z.debug_log_settings)||{},me=be.debug_log_retention,ve=be.debug_log_url,fe=be.retention_options,pe=(0,j.default)((function(e){return e.debugLogEnabled})),he=(0,j.default)((function(e){return e.setDebugLogEnabled})),ye=(0,j.default)((function(e){return e.setConfirmDialogSettings})),ke=(0,j.default)((function(e){return e.setConfirmDialogOpen})),Se=(0,k.Ds)(),Ee=J(le),Ze=(0,l.Z)(Ee,2),xe=Ze[0],Ce=Ze[1];return u.React.createElement("div",(0,s.Z)({},w,{ref:t}),u.React.createElement(m.Z,{size:"display-sm",weight:"semibold",spacing:1,content:O}),u.React.createElement(p.Z,{size:"text-sm",spacing:6,color:"comet",content:A}),(0,R.Z)("CAPS_VIEW_EMAIL_LOG_SETTINGS")&&u.React.createElement(y.Z,{HeaderContent:function(e){return u.React.createElement(m.Z,(0,s.Z)({content:T,tagName:"h2",size:"text-lg",weight:"medium"},e))},spacing:6},u.React.createElement(_.Z,{customClasses:["gravitysmtp-logging-settings__box-container"],x:630},u.React.createElement(h.Z,{customAttributes:{"data-test-id":"settings-activity-log-enable"},helpTextAttributes:{content:P,size:"text-sm"},initialChecked:le,labelAttributes:U({label:M},(0,N.Z)(G("event_log_enabled"))),onChange:function(e){Ce(e),(0,S.Z)({addSnackbarMessage:Se,key:G("event_log_enabled"),updateData:Z.email_log_settings,value:e})},labelPosition:"left",name:G("event_log_enabled"),spacing:6,size:"size-m",width:"full",disabled:!(0,R.Z)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}),xe&&u.React.createElement(h.Z,{customAttributes:{"data-test-id":"settings-save-email-body-enable"},helpTextAttributes:{content:L,size:"text-sm"},initialChecked:_e,labelAttributes:U({label:B},(0,N.Z)(G("save_email_body_enabled"))),onChange:function(e){(0,S.Z)({addSnackbarMessage:Se,key:G("save_email_body_enabled"),updateData:Z.email_log_settings,value:e})},labelPosition:"left",name:G("save_email_body_enabled"),spacing:6,size:"size-m",width:"full",disabled:!(0,R.Z)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}),xe&&u.React.createElement(h.Z,{customAttributes:{"data-test-id":"settings-save-attachments-enable"},helpTextAttributes:{content:V,size:"text-sm"},initialChecked:ue,labelAttributes:U({label:z},(0,N.Z)(G("save_attachments_enabled"))),onChange:function(e){(0,S.Z)({addSnackbarMessage:Se,key:G("save_attachments_enabled"),updateData:Z.email_log_settings,value:e})},labelPosition:"left",name:G("save_attachments_enabled"),spacing:6,size:"size-m",width:"full",disabled:!(0,R.Z)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}),u.React.createElement(f.Z,{customAttributes:{"data-test-id":"settings-email-log-retention"},wrapperClasses:[!Z.email_log_settings.log_retention_period_enabled&&"gravitysmtp-logging-settings__log-retention--locked"],initialValue:ce,labelAttributes:U({label:W},(0,N.Z)(G("event_log_retention"),!Z.email_log_settings.log_retention_period_enabled)),helpTextAttributes:{content:Z.email_log_settings.log_retention_period_enabled?H:q,size:Z.email_log_settings.log_retention_period_enabled?"text-xs":"text-sm"},name:G("event_log_retention"),onChange:function(e){(0,S.Z)({addSnackbarMessage:Se,showSnackBarSuccess:!0,key:G("event_log_retention"),updateData:Z.email_log_settings,value:e})},options:de,disabled:!(0,R.Z)("CAPS_EDIT_EMAIL_LOG_SETTINGS"),spacing:6}),u.React.createElement(_.Z,{display:"flex",customClasses:["gravitysmtp-logging-settings__debug-log-buttons"]},(0,R.Z)("CAPS_VIEW_EMAIL_LOG")&&u.React.createElement(v.Z,{content:$,customAttributes:{"data-test-id":"settings-activity-log-link"},customClasses:["gform-button","gform-button--size-height-m","gform-button--white","gform-button--width-auto","gform-button--icon-leading","gform-typography--size-text-sm","gform-typography--weight-medium"],href:ge}),(0,R.Z)("CAPS_DELETE_EMAIL_LOG")&&u.React.createElement(b.Z,{customAttributes:{"data-test-id":"settings-activity-log-delete"},label:ee,onClick:(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ye({confirmDialogConfirmButtonType:"amaranth-red",confirmDialogI18n:{confirm_change_confirm:re,confirm_change_content:ie,confirm_change_heading:ae},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return ke(!1)},confirmDialogOnClose:function(){return ke(!1)},confirmDialogOnConfirm:function(){var e=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ke(!1),e.next=3,I({addSnackbarMessage:Se,type:"email"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)}))),icon:"trash",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading",size:"size-height-m",type:"amaranth-red"})))),(0,R.Z)("CAPS_VIEW_DEBUG_LOG_SETTINGS")&&u.React.createElement(y.Z,{HeaderContent:function(e){return u.React.createElement(m.Z,(0,s.Z)({content:F,tagName:"h2",size:"text-lg",weight:"medium"},e))}},u.React.createElement(_.Z,{customClasses:["gravitysmtp-logging-settings__box-container"],x:630},u.React.createElement(h.Z,{customAttributes:{"data-test-id":"settings-debug-log-enable"},initialChecked:pe,labelAttributes:U({label:K},(0,N.Z)(G("debug_log_enabled"))),helpTextAttributes:{content:Q,size:"text-sm"},onChange:function(e){he(e),(0,S.Z)({addSnackbarMessage:Se,key:G("debug_log_enabled"),successCallback:function(){Z.debug_log_settings.debug_log_enabled=e,g.data.debug_log_enabled=e},value:e})},helpTextWidth:"full",labelPosition:"left",name:G("debug_log_enabled"),spacing:6,size:"size-m",width:"full",disabled:!(0,R.Z)("CAPS_EDIT_DEBUG_LOG_SETTINGS")}),u.React.createElement(f.Z,{initialValue:me,labelAttributes:U({label:X},(0,N.Z)(G("debug_log_retention"))),helpTextAttributes:{content:Y},name:G("debug_log_retention"),onChange:function(e){(0,S.Z)({addSnackbarMessage:Se,showSnackBarSuccess:!0,key:G("debug_log_retention"),updateData:Z.debug_log_settings,value:e})},options:fe,disabled:!(0,R.Z)("CAPS_EDIT_DEBUG_LOG_SETTINGS"),spacing:6}),u.React.createElement(_.Z,{display:"flex",customClasses:["gravitysmtp-logging-settings__debug-log-buttons"]},(0,R.Z)("CAPS_VIEW_DEBUG_LOG")&&u.React.createElement(v.Z,{content:te,customAttributes:{"data-test-id":"settings-debug-log-link"},customClasses:["gform-button","gform-button--size-height-m","gform-button--white","gform-button--width-auto","gform-button--icon-leading","gform-typography--size-text-sm","gform-typography--weight-medium"],href:ve}),(0,R.Z)("CAPS_DELETE_DEBUG_LOG")&&u.React.createElement(b.Z,{customAttributes:{"data-test-id":"settings-debug-log-delete"},label:ne,onClick:(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ye({confirmDialogConfirmButtonType:"amaranth-red",confirmDialogI18n:{confirm_change_confirm:re,confirm_change_content:oe,confirm_change_heading:ae},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return ke(!1)},confirmDialogOnClose:function(){return ke(!1)},confirmDialogOnConfirm:function(){var e=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ke(!1),e.next=3,I({addSnackbarMessage:Se});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)}))),icon:"trash",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading",size:"size-height-m",type:"amaranth-red"})))))}));H.propTypes={customAttributes:u.PropTypes.object,customClasses:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.array,u.PropTypes.object])},H.displayName="LoggingScreen";var q=H},3342:function(e,t,n){var a,i=n(9801),o=n(9509),r=n.n(o),s=n(9608),l=n.n(s),c=n(3267),g=n.n(c),d=n(4070),u=n(375),_=n(2077),b=n(9208),m=(null===(a=(0,u.iE)(g(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},v=function(e){var t=e.addSnackbarMessage,n=e.key,a=e.saveSuccessSnackBarMessage,i=e.showSnackBarSuccess,o=e.updateData,r=e.value;o[n]&&(o[n]=r),i&&t(a,"success")},f=function(e){var t=e.addSnackbarMessage,n=(e.error,e.saveErrorSnackBarMessage);e.showSnackBarError&&t(n,"error")},p=function(){var e=(0,i.Z)(r().mark((function e(t){var n,a,i,o,s,c,g,p,h,y,k,S,E,Z,x,C,w,D,O,A,T,M,P,B,I,L,z,G,R,N,j,V,U,W,J,H,q,F,K,Q,X,Y,$,ee,te;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.addSnackbarMessage,a=void 0===n?function(){}:n,i=t.errorCallback,o=void 0===i?null:i,s=t.key,c=void 0===s?"":s,g=t.showSnackBarError,p=void 0===g||g,h=t.showSnackBarSuccess,y=void 0!==h&&h,k=t.snackBarErrorMessage,S=void 0===k?"":k,E=t.snackBarSuccessMessage,Z=void 0===E?"":E,x=t.successCallback,C=void 0===x?null:x,w=t.updateData,D=void 0===w?{}:w,O=t.useDebugLogger,A=void 0===O||O,T=t.value,M=void 0===T?"":T,P=m.i18n,I=(B=void 0===P?{}:P).snackbar_generic_update_error,L=void 0===I?"":I,z=B.snackbar_generic_update_success,G=void 0===z?"":z,R=B.debug_messages,j=(N=void 0===R?{}:R).saving_plugin_settings,V=void 0===j?"":j,U=N.saving_plugin_settings_error,W=void 0===U?"":U,J=m.endpoints,H=(void 0===J?{}:J).save_plugin_settings,F=(q=void 0===H?{}:H).action,K=void 0===F?"":F,Q=q.nonce,X=Z||G,Y=S||L,$={action:K,security:void 0===Q?"":Q,key:c,value:M},!A){e.next=8;break}return e.next=8,(0,_.Z)((0,u.gB)(V,JSON.stringify((0,b.Z)(["security"],$))),"info");case 8:return e.prev=8,e.next=11,(0,d.v_)({endpoint:l(),body:$});case 11:null!=(te=e.sent)&&null!==(ee=te.data)&&void 0!==ee&&ee.success?(C||v)({addSnackbarMessage:a,data:null==te?void 0:te.data,key:c,saveSuccessSnackBarMessage:X,showSnackBarSuccess:y,updateData:D,value:M}):(o||f)({addSnackbarMessage:a,error:null==te?void 0:te.error,saveErrorSnackBarMessage:Y,showSnackBarError:p}),e.next=21;break;case 15:if(e.prev=15,e.t0=e.catch(8),!A){e.next=21;break}return e.next=21,(0,_.Z)((0,u.gB)(W,JSON.stringify(e.t0)),"error");case 21:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}();t.Z=p},7131:function(e,t,n){n.d(t,{Z:function(){return c}});var a,i,o=n(3267),r=n.n(o),s=(null===(a=(0,n(375).iE)(r(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},l=(null==s||null===(i=s.data)||void 0===i?void 0:i.constants)||{};function c(){return l[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""]||""}},662:function(e,t,n){n.d(t,{Z:function(){return m}});var a,i,o,r,s=n(3267),l=n.n(s),c=n(375),g=n(7131),d=(null===(a=(0,c.iE)(l(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.components)||{},u=(null==d||null===(i=d.activity_log)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.caps)||{},_=(null==d||null===(o=d.settings)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.caps)||{},b=(null==d||null===(r=d.tools)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.caps)||{};function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,g.Z)(e);return u[t]||_[t]||b[t]||!1}},36:function(e,t,n){var a,i=n(3267),o=n.n(i),r=(null===(a=(0,n(375).iE)(o(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{};t.Z=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{iconPrefix:"gravitysmtp-admin-icon",locked:(null==r||null===(e=r.data)||void 0===e||null===(e=e.locked_settings)||void 0===e?void 0:e.includes(n))||a,lockedMessage:i||(null==r||null===(t=r.i18n)||void 0===t?void 0:t.setting_locked)||""}}}}]);