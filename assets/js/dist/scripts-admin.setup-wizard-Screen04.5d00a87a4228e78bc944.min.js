"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[5830,1967,9529],{8114:function(t,e,n){n.r(e);var r=n(5720),i=n(9801),a=n(5210),o=n(9509),u=n.n(o),s=n(9608),c=n.n(s),l=n(7784),d=n(760),p=n(583),v=n(4070),f=n(9805),g=n(6192),m=n(7024),_=n(8957),b=n(4237),y=n(2077),w=n(9208),h=n(5806),S=n(1047),O=l.React.useEffect,x=l.React.useRef,k=l.React.useState;e.default=function(t){var e,n,o,s=t.common,Z=t.data,z=t.endpoints,P=t.i18n,A=s.i18n,E=(void 0===A?{}:A).debug_messages,N=void 0===E?{}:E,B=N.saving_integration_settings,C=void 0===B?"":B,D=N.saving_integration_settings_error,j=void 0===D?"":D,R=P.setup_wizard_next_button,I=void 0===R?"":R,F=P.setup_wizard_mail_settings_title,U=void 0===F?"":F,J=P.setup_wizard_mail_settings_copy,H=void 0===J?"":J,T=P.setup_wizard_integration_settings_error,W=void 0===T?"":T,q=Z.integrations,G=(0,S.default)((function(t){return t.activeStep})),K=(0,S.default)((function(t){return t.isAnimatedIn})),L=(0,S.default)((function(t){return t.integration})),M=(0,S.default)((function(t){return t.integrationSettingsFormData})),Q=(0,S.default)((function(t){return t.setActiveStepNext})),V=(0,S.default)((function(t){return t.setActiveNavBarStepNext})),X=(0,S.default)((function(t){return t.setSetupStatus})),Y=(0,S.default)((function(t){return t.setIntegrationSettingsFormData})),$=(0,S.default)((function(t){return t.setSettingsUpdated})),tt=(0,S.default)((function(t){return t.setHasDebugError})),et=x(null),nt=k(!1),rt=(0,a.Z)(nt,2),it=rt[0],at=rt[1],ot=(0,p.Bl)(q,"id",L),ut=(null==ot||null===(e=ot.settings)||void 0===e?void 0:e.fields)||[],st=(null==z||null===(n=z.save_connector_settings)||void 0===n?void 0:n.action)||"",ct=(null==z||null===(o=z.save_connector_settings)||void 0===o?void 0:o.nonce)||"",lt=(0,b.Ds)(),dt=function(){var t=(0,i.Z)(u().mark((function t(){var e,n,r,i,a,o,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=et.current.offsetWidth,et.current.style.width="".concat(e,"px"),n={action:st,security:ct,connector_type:L,settings:M[L]},t.next=5,(0,y.Z)((0,p.gB)(C,L,JSON.stringify((0,w.Z)(["api_key","server_api_token","password","security"],n))),"info");case 5:return t.prev=5,t.next=8,(0,v.v_)({endpoint:c(),body:n});case 8:if(i=t.sent,at(!1),null!=i&&null!==(r=i.data)&&void 0!==r&&r.success){t.next=18;break}return s=(0,p.sO)(null==i||null===(a=i.error)||void 0===a||null===(a=a.detail)||void 0===a?void 0:a.data)?JSON.parse(null==i||null===(o=i.error)||void 0===o||null===(o=o.detail)||void 0===o?void 0:o.data):"",t.next=14,(0,y.Z)((0,p.gB)(j,L,JSON.stringify(s)),"error");case 14:tt(!0),lt((null==s?void 0:s.data)||W,"error"),t.next=22;break;case 18:X("success"),Q(),V(),$();case 22:t.next=30;break;case 24:return t.prev=24,t.t0=t.catch(5),t.next=29,(0,y.Z)((0,p.gB)(j,L,JSON.stringify(t.t0)),"error");case 29:tt(!0);case 30:et.current&&(et.current.style.width="");case 31:case"end":return t.stop()}}),t,null,[[5,24]])})));return function(){return t.apply(this,arguments)}}(),pt=x();O((function(){4===G&&pt.current&&pt.current.focus()}),[G]);var vt,ft={ref:(0,d.P5)(4===G&&K),className:(0,l.classnames)((0,r.Z)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(4),!0)),"aria-hidden":4!==G};return l.React.createElement("div",ft,l.React.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},l.React.createElement(l.SimpleBar,{scrollableNodeProps:{ref:pt}},l.React.createElement("div",{className:"gravitysmtp-setup-wizard__content"},l.React.createElement(f.Z,{customClasses:["gravitysmtp-setup-wizard__content-header"],spacing:6},l.React.createElement(g.Z,{content:U,spacing:8,size:"display-sm",tagName:"h2",weight:"medium"}),l.React.createElement(m.Z,{content:(0,p.gB)(H,null==ot?void 0:ot.title),spacing:6,size:"text-lg",weight:"medium"}),l.React.createElement("form",{id:L},l.React.createElement(_.Z,{id:L,fields:ut,setFieldData:function(t,e){return Y(L,t,e)}}))),l.React.createElement(h.default,{i18n:P,skipButtonCustomAttributes:{onClick:function(){X("skipped"),Q(),V()}},nextButtonCustomAttributes:{onClick:(vt=(0,i.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return at(!0),t.next=3,dt();case 3:case"end":return t.stop()}}),t)}))),function(){return vt.apply(this,arguments)}),active:it,activeType:"loader",activeText:I,disabled:it,icon:it?"":"arrow-narrow-right",lockSize:!0,ref:et}})))))}},5806:function(t,e,n){n.r(e);var r=n(107),i=n(5720),a=n(5689),o=n(7784),u=n(9805),s=n(7343),c=n(1047),l=["customClasses"],d=["customClasses"],p=["customClasses"],v=["customClasses"];function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=(0,o.React.forwardRef)((function(t,e){var n=t.backButtonCustomAttributes,i=void 0===n?{}:n,f=t.nextButtonCustomAttributes,m=void 0===f?{}:f,_=t.i18n,b=t.showBackButton,y=void 0===b||b,w=t.showSkipButton,h=void 0===w||w,S=t.showNextButton,O=void 0===S||S,x=t.skipButtonCustomAttributes,k=void 0===x?{}:x,Z=t.wrapperCustomAttributes,z=void 0===Z?{}:Z,P=_.setup_wizard_back_button,A=_.setup_wizard_skip_button,E=_.setup_wizard_next_button,N=(0,c.default)((function(t){return t.setActiveStepNext})),B=(0,c.default)((function(t){return t.setActiveStepPrevious})),C=(0,c.default)((function(t){return t.setActiveNavBarStepNext})),D=(0,c.default)((function(t){return t.setActiveNavBarStepPrevious})),j=z.customClasses,R=(0,a.Z)(z,l),I=g({customClasses:o.classnames.apply(void 0,[["gravitysmtp-setup-wizard__screen-nav-buttons"]].concat((0,r.Z)(j||[]))),display:"flex",spacing:[6,0,0],ref:e},R),F=i.customClasses,U=(0,a.Z)(i,d),J=g({customClasses:o.classnames.apply(void 0,[["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--back"]].concat((0,r.Z)(F||[]))),icon:"arrow-narrow-left",iconPrefix:"gravitysmtp-admin-icon",label:P,size:"size-height-xl",type:"icon-white",onClick:function(){B(),D()}},U),H=k.customClasses,T=(0,a.Z)(k,p),W=g({customClasses:o.classnames.apply(void 0,[["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--skip"]].concat((0,r.Z)(H||[]))),icon:"arrow-narrow-right",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"trailing",label:A,size:"size-height-xl",type:"white",onClick:function(){N(),C()}},T),q=m.customClasses,G=(0,a.Z)(m,v),K=g({customClasses:o.classnames.apply(void 0,[["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--next"]].concat((0,r.Z)(q||[]))),icon:"arrow-narrow-right",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"trailing",label:E,size:"size-height-xl",onClick:function(){N(),C()}},G);return o.React.createElement(u.Z,I,y&&o.React.createElement(s.Z,J),h&&o.React.createElement(s.Z,W),O&&o.React.createElement(s.Z,K))}));e.default=m},1047:function(t,e,n){n.r(e);var r,i,a,o,u=n(5720),s=n(7784),c=n(760),l=n(583),d=n(3267),p=n.n(d);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g,m,_=(null===(r=(0,l.iE)(p(),"gravitysmtp_admin_config"))||void 0===r||null===(r=r.components)||void 0===r?void 0:r.setup_wizard)||{},b="",y=f(f({hasDebugError:!1,importDataPossible:null===(i=_.data)||void 0===i?void 0:i.import_data_possible,isAnimatedIn:!1,integrationSetupAction:"skip",setupStatus:"skipped",settingsUpdated:!1,shouldRedirect:(null==_||null===(a=_.data)||void 0===a?void 0:a.should_display)||!1,integrationSettingsFormData:(m={},null==_||null===(g=_.data)||void 0===g||null===(g=g.integrations)||void 0===g||g.forEach((function(t){var e;m[t.id]=(null==t?void 0:t.data)||{},null!==(e=m[t.id])&&void 0!==e&&e.enabled&&(b=t.id)})),m)},(null===(o=(0,l.iE)(p(),"gravitysmtp_admin_config"))||void 0===o||null===(o=o.components)||void 0===o||null===(o=o.setup_wizard)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.defaults)||{}),{},{integration:b}),w=(0,c.Ue)(y,(function(t){return{closeDialog:function(){return t((function(){return{isOpen:!1}}))},openDialog:function(){return t((function(){return{isOpen:!0}}))},setActiveStepNext:function(){return t((function(t){return{activeStep:t.activeStep+1}}))},setActiveStepPrevious:function(){return t((function(t){return{activeStep:t.activeStep-1}}))},setActiveStep:function(e){return t((function(){return{activeStep:e}}))},setActiveNavBarStepNext:function(){return t((function(t){return{activeNavBarStep:t.activeNavBarStep+1}}))},setActiveNavBarStepPrevious:function(){return t((function(t){return{activeNavBarStep:t.activeNavBarStep-1}}))},setActiveNavBarStep:function(e){return t((function(){return{activeNavBarStep:e}}))},setHasDebugError:function(e){return t((function(){return{hasDebugError:e}}))},setImportPlugin:function(e){return t((function(){return{importPlugin:e}}))},setIntegration:function(e){return t((function(){return{integration:e}}))},setIsAnimatedIn:function(e){return t((function(){return{isAnimatedIn:e}}))},setIntegrationSetupAction:function(e){return t((function(){return{integrationSetupAction:e}}))},setSetupStatus:function(e){return t((function(){return{setupStatus:e}}))},setSettingsUpdated:function(){return t((function(){return{settingsUpdated:!0}}))},setShouldRedirect:function(e){return t((function(){return{shouldRedirect:e}}))},setInnerDialogOpen:function(e){return t((function(){return{innerDialogOpen:e}}))},setIntegrationSettingsFormData:function(e,n,r){return t((0,s.immer)((function(t){t.integrationSettingsFormData[e]||(t.integrationSettingsFormData[e]={}),t.integrationSettingsFormData[e][n]=r})))}}}));e.default=w},2077:function(t,e,n){n.d(e,{Z:function(){return v}});var r,i=n(9801),a=n(9509),o=n.n(a),u=n(9608),s=n.n(u),c=n(3267),l=n.n(c),d=n(4070),p=(null===(r=(0,n(583).iE)(l(),"gravitysmtp_admin_config"))||void 0===r?void 0:r.common)||{};function v(){return f.apply(this,arguments)}function f(){return f=(0,i.Z)(o().mark((function t(){var e,n,r,i,a,u,c,l,v,f,g=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=g.length>0&&void 0!==g[0]?g[0]:"",i=g.length>1&&void 0!==g[1]?g[1]:"debug",a=p.data,u=void 0===a?{}:a,c=p.endpoints,v=(null==(l=void 0===c?{}:c)||null===(e=l.log_debug_item)||void 0===e?void 0:e.action)||"",f=(null==l||null===(n=l.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=u&&u.debug_log_enabled&&v&&f&&r){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,(0,d.v_)({endpoint:s(),body:{action:v,security:f,message:r,priority:i}}).catch((function(t){}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}},9208:function(t,e,n){var r=n(6588),i=n(5210);e.Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return function n(a){return Object.entries(a).reduce((function(a,o){var u=(0,i.Z)(o,2),s=u[0],c=u[1];return"object"===(0,r.Z)(c)&&null!==c?a[s]=n(c):t.includes(s)?a[s]=null===c?null:e.repeat(c.length):a[s]=c,a}),Array.isArray(a)?[]:{})}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);